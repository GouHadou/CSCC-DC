//Basic actors, some of them inherit from here for easier management.

Actor BaseMM8BDMWepTM : BaseCSCCWep  {+INVENTORY.UNDROPPABLE +WEAPON.CHEATNOTWEAPON inventory.icon "TNT1A0"}


actor ProjectileBase
{
PROJECTILE
+SKYEXPLODE
+DONTBLAST
+MTHRUSPECIES
+BLOODSPLATTER
Speed 40
Damage (10)
radius 5
height 5
scale 2.5
States
{
Spawn:
TNT1 A 0 
BUST T 1 
loop
Death:
BUST T 1 
stop
}
}

actor FastProjectileBase : Fastprojectile
{
PROJECTILE
+SKYEXPLODE
+DONTBLAST
+MTHRUSPECIES
+BLOODSPLATTER
MissileHeight 8
Speed 90
Damage (10)
radius 5
height 5
scale 2.5
States
{
Spawn:
TNT1 A 0 
BUST A 1 
loop
Death:
BUST A 1 
stop
}
}


actor HitscanPuffBase : BulletPuff
{
scale 1
+PUFFONACTORS
+ALWAYSPUFF
+PUFFGETSOWNER
+MTHRUSPECIES
alpha 1.0
States
{
Spawn:
TNT1 A 0 
BUST A 1 
stop
}
}


actor BasicExplosion
{
Obituary "%o told %k they are OP and should be nerfed."
DamageType "Normal"
-SOLID
+DONTBLAST
+NOGRAVITY
+MISSILE
+RIPPER
+SKYEXPLODE
+NOINTERACTION
+DONTSPLASH
+THRUGHOST
+THRUACTORS
+DONTREFLECT
height 1
radius 1
Damage(0)
Speed 0
States
{
Spawn:
TNT1 A 0
TNT1 A 1 A_Explode(5000,32,0)
stop
}
}

Actor BasicHelper
{
+NOINTERACTION
-SOLID
+MISSILE
radius 1
height 1
+NOGRAVITY
+DONTBLAST
+DONTREFLECT
renderstyle none
States
{
Spawn:
TNT1 A 1
stop
Death:
TNT1 A 1
stop
}
}

actor BasicClientSide
{
+CLIENTSIDEONLY
+NOINTERACTION
+NOGRAVITY
-SOLID
radius 2
height 2
scale 2.5
}

actor FXActor_A : BasicClientSide
{
PROJECTILE
Reactiontime 35
Renderstyle "Translucent"
Alpha 1.0
States
{
Spawn:
BUST A 0
BUST A 2
stop
}
}

actor FXActor_B : FXActor_A{Renderstyle "Add"}
actor FXActor_C : FXActor_A{Renderstyle "Subtract"}

actor BasicNotClientSide : BasicClientSide
{
-CLIENTSIDEONLY
}

actor TeamColor_CI : CustomInventory
{
states
{
Pickup:
TNT1 A 0 A_JumpIfInventory("LightTeamFlag",1,"FireB")
TNT1 A 0 A_JumpIfInventory("WilyTeamFlag",1,"FireR")
TNT1 A 0 A_JumpIfInventory("CossackTeamFlag",1,"FireO")
TNT1 A 0 A_JumpIfInventory("KingTeamFlag",1,"FireP")
TNT1 A 0 A_Jump(256,"FireX")
TNT1 A 0
goto Done
Done:
TNT1 A 0
stop
}
}

actor Nudge : CustomInventory
{
states
{
Pickup:
//TNT1 A 0 A_Stop
TNT1 A 0 A_Jumpif(Momx == 0 && Momy == 0, "Pickup2")
stop
Pickup2:
TNT1 A 0 A_Recoil(-1)
stop
}
}

actor ReSolidifier : BasicHelper
{
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_CheckFlag("SOLID","Spawn3",AAPTR_TARGET)
TNT1 A 0 A_GiveToTarget("UnSolid",1)
Spawn2:
TNT1 A 0
TNT1 A 0 A_GiveToTarget("ReSolidifierCheckPickup",1)
TNT1 A 1
TNT1 A 0 A_JumpIfInTargetInventory("UnSolid",1,"Spawn2a")
TNT1 A 0 A_CheckFlag("SOLID","Spawn3",AAPTR_TARGET)
goto SuperDeath
Spawn2a:
TNT1 A 0 A_JumpIfInTargetInventory("StaminaFlag",1,"Spawn2")
TNT1 A 0 A_GiveInventory("WeaponCharge",1)
TNT1 A 0 A_JumpIfInventory("WeaponCharge",10,"Spawn2H")
goto Spawn2
Spawn2H:
TNT1 A 0 A_GiveToTarget("StopBeingUnSolidNoob",1)
TNT1 A 0 A_TakeInventory("WeaponCharge",100)
goto Spawn2
Spawn3:
TNT1 A 1 A_GiveToTarget("StaminaFlag",5)
TNT1 A 0 A_JumpIfInTargetInventory("StaminaFlag",496,2)
TNT1 A 0 A_CheckFlag("SOLID","Spawn3",AAPTR_TARGET)
TNT1 A 0
stop
SuperDeath:
TNT1 A 1
stop
Death:
TNT1 A 1
stop
}
}

actor UnSolid : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor ReSolidifierCheckPickup : CustomInventory
{
states
{
Pickup:
TNT1 A 0 A_SpawnItemEx("ReSolidifierCheck",0,0,0,momx,momy,momz,0,8,0)
stop
}
}

actor StopBeingUnSolidNoob : CustomInventory
{
states
{
Pickup:
TNT1 A 0 DamageThing(1,15)
stop
}
}

actor ReSolidifierCheck
{
PROJECTILE
+DONTSPLASH
+SKYEXPLODE
+DONTBLAST
+DONTREFLECT
+THRUGHOST
Damage (0)
radius 24
height 84
States
{
Spawn:
TNT1 A 0
TNT1 A 1
TNT1 A 0 A_GiveToTarget("ReSolidify",1)
stop
Death:
XDeath:
TNT1 A 0 A_TakeFromTarget("StaminaFlag",2)
stop
}
}

actor ReSolidify : CustomInventory
{
states
{
Pickup:
TNT1 A 0 A_JumpIfInventory("UnSolid",1,"Pickup2")
stop
Pickup2:
TNT1 A 0 A_ChangeFlag("SOLID",1)
TNT1 A 0 A_TakeInventory("UnSolid",1)
stop
}
}

Actor MovementHalt : CustomInventory
{
States
{
Pickup:
TNT1 A 0 A_Stop
TNT1 A 0 A_ScaleVelocity(0.0)
stop
}
}


//Deployable actors use 2 special scripts to keep track of their numbers and apply a TID
//To them, these can be used for things like sticky bombs for example
actor DeployableBase  
{
+MISSILE //needs to soley rely on this and not the projectile combo flag
+NOBLOOD
+DONTBLAST
+NOTARGETSWITCH
+SHOOTABLE
radius 8
height 8
speed 0
health 10
scale 2
Var int user_tally; //necessary for Deployable script
states
{
Spawn:
TNT1 A 0
BUST A 0 ACS_NamedExecuteAlways("ObjectTally",0)//grants a TID and ups the tally for other deployables tied to the player
BUST A 1 
BUST A 0 A_Jumpif(user_tally >= 4,"Perish") //Self destruct once more than 3
loop
Death:
PRMN A 0 ACS_NamedExecuteAlways("ObjectDeathTally",0) //causes all related deployables to drop their tally
Goto Perish
Perish:
HARD BCDE 3
BUST A 0
stop
}
}


actor HexBarrierBase  //for multipart hexagon barriers
{
  Radius 14
  Height 12
  Scale 0.5
  RenderStyle None
  Alpha 0.25
  //Bloodtype "ShieldHit"
  //Species "BLUEMember"
  Health 900
  Painchance 256
  //Designatedteam 0
  +MISSILE
  +SHOOTABLE
  +NOTARGETSWITCH
  +NOGRAVITY
  +NOTELEPORT
  +NOTARGETSWITCH
  +THRUSPECIES
  +DONTRIP
  +DONTSPLASH
  +FLOORCLIP
  //+REFLECTIVE
  +DONTREFLECT
  +NODAMAGETHRUST
  //+DONTTHRUST 
  +DONTBLAST
  +GHOST	//Give projectiles that you wish to pass through the shield THRUGHOST flag
  States
  {
  Spawn:
	TNT1 A 0
	TNT1 A 0 A_SpawnItemEx ("HexBitVisual", 0, 0, 16, 0, 0, 0, 0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
    HEXA A 2 
    stop
	Pain:
	TNT1 A 0  A_PlaySoundEX ("item/protoreflect","Soundslot5")
	stop
  Death:
    TNT1 A 2
    stop
  }
}

actor ShieldHit
{
  Radius 1
  Height 1
  Scale 0.5
  Renderstyle Add
  +NOGRAVITY
  +NOINTERACTION
  States
  {
  Spawn:
    MMFX A 0 bright
    MMFX A 1 bright A_Stop
    MMFX A 0 bright A_PlaySound ("weapon/MirrorDeflect")
    MMFX A 1 bright
    stop
  }
}

actor HexBitVisual
{
  Radius 8
  Height 8
  Scale 0.5
  RenderStyle Add	//Fuzzy looks great in software mode
  Alpha 0.35
  +NOINTERACTION
  //+CLIENTSIDEONLY
  +FLOORCLIP
  States
  {
  Spawn:
  TNT1 A 0
    HEXA AAAA 1 bright 
    //HEXA AA 1 bright A_Fadeout(0.4)
    stop
  Death:
    TNT1 A 2
    stop
  }
}

actor BasicPowerUpGiver : PowerUpGiver //Might help in the future, who knows.
{
inventory.maxamount 0
powerup.duration -10
powerup.color "00 00 00", 0.0
powerup.type "BasicPower"
+INVENTORY.AUTOACTIVATE
+INVENTORY.ALWAYSPICKUP
states
{
Pickup:
TNT1 A 175 
stop
}
}

actor PowerBasicPower : Powerup {}