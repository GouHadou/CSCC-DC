actor TreoWep : BaseMM8BDMWep
{
Weapon.AmmoUse 2
Weapon.AmmoGive 36
Obituary "%o got burnt by %k's \chWill-O-Wisp."
weapon.ammotype "TreoAmmo"
weapon.ammotype2 "BlueFireAmmo"
inventory.pickupsound "weapon/weaponup"
+WEAPON.AMMO_OPTIONAL 
+WEAPON.NOAUTOAIM
//inventory.icon "COOWI"
Scale 2.0
States
{
Spawn:
TNT1 A 0
TNT1 A 1// A_SpawnItemEX("GigaDrainWepDropped")
stop
Ready:
COOW B 0 ACS_ExecuteAlways(998,0,300,1)
TRHU A 3 A_WeaponReady
COOW B 0 A_GiveInventory("BlueFireAmmo",2)
SLAH A 0 A_JumpIfInventory("HaveFunPlanting",1,"Planting")
//COOW B 0 A_GiveInventory("TreoAmmo",10)
Goto Ready+1
Deselect: // The deselect state, or you can call it the most annoying thing ever.
DRIA A 0 A_GiveInventory("BlueFireFlag",2)
TNT1 A 0 A_GiveInventory("TreoWepX",1)
TNT1 A 0 A_SelectWeapon("TreoWepX")
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
TRHU D 1 A_Lower
Loop
Select:
TNT1 A 0 A_TakeInventory("TreoWepX",1)
DRIA A 0 A_TakeInventory("BlueFireFlag",99)
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
TRHU A 1 A_Raise
Loop
Fire:
TRHU A 1

Hold:
COOW B 0 A_JumpIfInventory("TreoAmmo",18,"MegaCharge")
TRHU A 2 A_GiveInventory("TreoAmmo",1)
COOW B 0 A_ReFire
Goto Absorb

MegaCharge:
COOW B 0 A_JumpIfInventory("TreoAmmo",36,"GigaCharge")
TRHU A 2 A_GiveInventory("TreoAmmo",1)
COOW B 0 A_ReFire
Goto MegaDrain

GigaCharge:
TRHU A 1
COOW B 0 A_ReFire
Goto GigaDrain

Absorb:
COOW B 0 A_PlaySoundEx("weapon/mbuster","Weapon")
COOW B 0 A_FireCustomMissile("DamageChecker",0,0,0,0)
COOW B 0 A_FireCustomMissile("AbsorbSeed",0,0,0,0)
COOW B 0 A_PlaySoundEx("weapon/mbuster","Weapon")
COOW B 0 A_FireCustomMissile("TreoSeed",-8,0,32,0)
COOW B 0 A_PlaySoundEx("weapon/mbuster","Weapon")
COOW B 0 A_FireCustomMissile("TreoSeed",8,0,-32,0)
COOW B 0 A_TakeInventory("TreoAmmo",999)
TRHU BCB 3
TRHU A 12
COOW B 0 A_Refire
Goto Ready+1

MegaDrain:
SCLA A 0 A_PlaySoundEx("weapon/slashclaw","Weapon")
COOW B 0 A_FireCustomMissile("DamageChecker2",0,0,0,0)
COOW B 0 A_FireCustomMissile("MegaSeed",0,0,0,0)
SCLA A 0 A_PlaySoundEx("weapon/slashclaw","Weapon")
COOW B 0 A_FireCustomMissile("TreoSeed",-8,0,32,0)
SCLA A 0 A_PlaySoundEx("weapon/slashclaw","Weapon")
COOW B 0 A_FireCustomMissile("TreoSeed",8,0,-32,0)
COOW B 0 A_TakeInventory("TreoAmmo",999)
TRHU BCB 3
TRHU A 16
COOW B 0 A_Refire
Goto Ready+1

GigaDrain:
COOW B 0 A_PlaySoundEx("weapon/leafshield","Weapon")
COOW B 0 A_FireCustomMissile("DamageChecker3",0,0,0,0)
COOW B 0 A_FireCustomMissile("GigaSeed",0,0,0,0)
COOW B 0 A_PlaySoundEx("weapon/leafshield","Weapon")
COOW B 0 A_FireCustomMissile("TreoSeed",-8,0,32,0)
COOW B 0 A_PlaySoundEx("weapon/leafshield","Weapon")
COOW B 0 A_FireCustomMissile("TreoSeed",8,0,-32,0)
COOW B 0 A_TakeInventory("TreoAmmo",999)
TRHU BCB 3
TRHU A 16
COOW B 0 A_Refire
Goto Ready+1

AltFire:
COOW B 0 A_JumpIfInventory("BlueFireAmmo",8,1)
goto Ready+1
COOW B 0 A_PlaySoundEx("weapon/scorchwheel","Weapon")
COOW B 0 A_GiveInventory("HaveShotFlag",1)
COOW B 0 A_FireCustomMissile("WillOWisp",0,1,8,0)
COOW B 0 A_TakeInventory("BlueFireAmmo",8)
TRHU B 2
TRHU B 2
Goto AltHold

AltHold:
TRHU B 1 A_RailWait
COOW D 0 A_Refire
COOW B 0 A_TakeInventory("HaveShotFlag",1)
TRHU B 10 A_GiveInventory("BlueFireFlag",2)
COOW D 0 A_TakeInventory("BlueFireFlag",999)
TRHU CB 2
Goto Ready+1

Planting:
COOW B 0 A_PlaySoundEx("weapon/megabuster","Weapon")
COOW B 0 A_FireCustomMissile("PlantSeed",0,1,8,0)
COOW B 0 A_TakeInventory("BlueFireAmmo",28)
COOW B 0 A_TakeInventory("HaveFunPlanting",1)
TRHU BCB 2
TRHU A 10
Goto Ready+1

NoAmmo:
TRHU A 1
TRHU A 1 ACS_Execute(979,0)
Goto Ready+1
}
}

actor BlueFireFlag : Inventory
{
inventory.amount 1
inventory.maxamount 2
}

actor DrainFlag : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor HaveShotFlag : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor TreoTreeFlag : Inventory
{
inventory.amount 1
inventory.maxamount 4
}


actor HaveFunPlanting : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor TreoHealFXFlag : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor BlueFireAmmo : Ammo
{
inventory.amount 1
inventory.maxamount 28
}

actor TreoAmmo : Ammo
{
inventory.amount 1
inventory.maxamount 36
+INVENTORY.IGNORESKILL
}

actor TreoHealFX
{
PROJECTILE
+NOINTERACTION
Radius 5
Height 5
scale 2.5
damage (0)
speed 0
States
{
Spawn:
TRDR DEFG 2 A_PlaySoundEx("item/energyup","Weapon")
stop
}
}

actor PlantSeed
{
PROJECTILE
Obituary "%o was pelted by %k's \csSeeds."
-NOGRAVITY
Radius 5
Height 5
scale 2.5
damage (10)
damagetype "TreoBurn"
+FORCEXYBILLBOARD
+NOTARGETSWITCH
+DOOMBOUNCE
BounceFactor 0
WallBounceFactor 0.9
speed 40
States
{
Spawn:
COOW E 0 ThrustThingZ(0, 12, 0, 1)
TRSE BCDEFG 4 A_CheckFloor("Death")
Continue:
TRSE BCDEFG 4 A_CheckFloor("Death")
loop
Death:
COOW EF 0 A_SpawnItemEx("TreoTree")
Stop
}
}
actor TreoTree
{
Translation "192:192=124:124", "198:198=112:112"
+DONTBLAST
+SHOOTABLE
+NOEXPLODEFLOOR
-NOGRAVITY
+MISSILE
health 1
+FOILINVUL
scale 2.5
Height 64
Radius 64
speed 0
scale 2.5
reactiontime 225
damagetype "TreoBurn"
//damagefactor "TreoBurn", 0.0
states
{
Spawn:
TRSE HIJ 3
TREO A 6
Spawn2:
TREO A 0 A_CountDown
TRES A 1 A_JumpIfInTargetInventory("CutterFlag",1,"Death")
loop
Crash:
XDeath:
TREO H 0 A_TakeFromTarget("TreoTreeFlag",1)
TREO HHHH 1 A_SpawnItemEx("WillFireBit",0,0,0,random(-10,10),random(-10,10),random(10,15),random(0,360))
DRIL A 0 A_Explode(5, 128, 0)
TREO HHHH 1 A_SpawnItemEx("WillFireBit",0,0,0,random(-10,10),random(-10,10),random(10,15),random(0,360))
DRIL A 0 A_Explode(5, 128, 0)
TREO HHHH 1 A_SpawnItemEx("WillFireBit",0,0,0,random(-10,10),random(-10,10),random(10,15),random(0,360))
DRIL A 0 A_Explode(5, 128, 0)
TREO HHHH 1 A_SpawnItemEx("WillFireBit",0,0,0,random(-10,10),random(-10,10),random(10,15),random(0,360))
DRIL A 0 A_Explode(5, 128, 0)
stop
Death:
TREO H 0 A_TakeFromTarget("TreoTreeFlag",1)
TREO HHHH 1 A_SpawnItemEx("WillFireBit",0,0,0,random(-10,10),random(-10,10),random(10,15),random(0,360))
DRIL A 0 A_Explode(5, 128, 0)
TREO HHHH 1 A_SpawnItemEx("WillFireBit",0,0,0,random(-10,10),random(-10,10),random(10,15),random(0,360))
DRIL A 0 A_Explode(5, 128, 0)
TREO HHHH 1 A_SpawnItemEx("WillFireBit",0,0,0,random(-10,10),random(-10,10),random(10,15),random(0,360))
DRIL A 0 A_Explode(5, 128, 0)
TREO HHHH 1 A_SpawnItemEx("WillFireBit",0,0,0,random(-10,10),random(-10,10),random(10,15),random(0,360))
DRIL A 0 A_Explode(5, 128, 0)
stop
}
}

actor DamageChecker
{
Obituary "%o was sapped by %k's \cdAbsorb."
PROJECTILE
-NOGRAVITY
Radius 5
Height 5
scale 2.5
damage (1)
//damagetype "AbsorbDrain"
+FORCEXYBILLBOARD
+NOTARGETSWITCH
speed 40
States
{
Spawn:
COOW E 0 ThrustThingZ(0, 12, 0, 1)
TNT1 AAAA 3
Continue:
TNT1 AAAA 3 
loop
/*XDeath:
TNT1 AAA 1 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
Stop
Drain:
COOW EF 0 A_SpawnItemEx("DrainBit",random(-50,50),random(-50,50),random(-50,50))
COOW EF 0 A_TakeInventory("DrainFlag",999)
Stop
*/}
}

actor TreoSeed
{
PROJECTILE
Obituary "%o was pelted by %k's \csSeeds."
-NOGRAVITY
Radius 5
Height 5
scale 2.5
damage (10)
//damagetype "AbsorbDrain"
+FORCEXYBILLBOARD
+NOTARGETSWITCH
speed 35
States
{
Spawn:
COOW E 0 ThrustThingZ(0, 12, 0, 1)
TRSE AAAA 3
Continue:
TRSE AAAA 3 
loop
Death:
ACOE DEF 2 A_PlaySoundEx("weapon/pshot","Weapon")
Stop
}
}


actor DamageChecker2 : DamageChecker
{
Obituary "%o was sapped by %k's \cdMega Drain."
Radius 10
Height 10
speed 50
}

actor DamageChecker3 : DamageChecker
{
Obituary "%o was sapped by %k's \crGiga Drain."
Radius 20
Height 20
speed 60
}


actor AbsorbSeed
{
PROJECTILE
Obituary "%o was sapped by %k's \cdAbsorb."
-NOGRAVITY
Radius 5
Height 5
scale 2.5
damage (13)
damagetype "AbsorbDrain"
+FORCEXYBILLBOARD
+NOTARGETSWITCH
speed 40
States
{
Spawn:
COOW E 0 ThrustThingZ(0, 12, 0, 1)
TAGL ABCDCB 3
Continue:
TAGL ABCDCB 3 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
loop
Crash:
XDeath:
TNT1 AA 0 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
TNT1 AAAAAAA 1 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
Stop
Drain:
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("DrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 2 A_SpawnItemEx("DrainBit",random(-50,50),random(-50,50),random(-50,50))
COOW EF 0 A_TakeFromTarget("DrainFlag",999)
Stop
Death:
ACOE DEF 2 A_PlaySoundEx("weapon/pshot","Weapon")
Stop
}
}

actor DrainBit : RollingCutter
{
+NOINTERACTION
+NOGRAVITY
+FORCEXYBILLBOARD
-SOLID
scale 2.5
height 0
radius 0
scale 2.5
damage (0)
speed 10
seesound "weapon/noisecrush"
States
{
Spawn:
TRDR A 2 A_FaceTarget
RCUT A 0 A_JumpIfCloser(40,"Death")
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
RCUT A 0 A_CustomMissile("DrainBit",0,0,0,0)
Stop
Death:
TNT1 A 0 A_SpawnItemEx("TreoHealFX",random(-50,50),random(-50,50),random(-50,50))
TNT1 A 1 A_GiveToTarget("DrainHealth",1)
Stop
}
}

actor MegaDrainBit : RollingCutter
{
+NOINTERACTION
+NOGRAVITY
+FORCEXYBILLBOARD
-SOLID
scale 2.5
height 0
radius 0
scale 2.5
damage (0)
speed 10
States
{
Spawn:
TRDR B 2 A_FaceTarget
RCUT A 0 A_JumpIfCloser(40,"Death")
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
RCUT A 0 A_CustomMissile("MegaDrainBit",0,0,0,0)
Stop
Death:
TNT1 A 0 A_SpawnItemEx("TreoHealFX",random(-50,50),random(-50,50),random(-50,50))
TNT1 A 1 A_GiveToTarget("DrainHealth",1)
Stop
}
}

actor GigaDrainBit : RollingCutter
{
+NOINTERACTION
+NOGRAVITY
+FORCEXYBILLBOARD
-SOLID
scale 2.5
height 0
radius 0
scale 2.5
damage (0)
speed 10
States
{
Spawn:
TRDR C 2 A_FaceTarget
RCUT A 0 A_JumpIfCloser(40,"Death")
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
RCUT A 0 A_CustomMissile("GigaDrainBit",0,0,0,0)
Stop
Death:
TNT1 A 0 A_SpawnItemEx("TreoHealFX",random(-50,50),random(-50,50),random(-50,50))
TNT1 A 1 A_GiveToTarget("DrainHealth",1)
Stop
}
}



actor DrainHealth : Health
{
inventory.amount 2
inventory.maxamount 100
}

actor MegaSeed : AbsorbSeed
{
Obituary "%o was sapped by %k's \cdMega Drain."
Radius 10
Height 10
damage (25)
speed 50
States
{
Spawn:
COOW E 0 ThrustThingZ(0, 12, 0, 1)
TABS BCDC 3
Continue:
TABS BCDC 3 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
loop
Crash:
XDeath:
TNT1 AA 0 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
TNT1 AAAAAAA 1 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
Stop
Crash:
XDeath:
TNT1 AA 0 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
TNT1 AAAAAAA 1 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
Stop
Drain:
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("MegaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 2 A_SpawnItemEx("MegaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("MegaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 2 A_SpawnItemEx("MegaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("MegaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
COOW EF 0 A_TakeFromTarget("DrainFlag",999)
Stop
Death:
ACOE DEF 2 A_PlaySoundEx("weapon/pshot","Weapon")
Stop
}
}

actor GigaSeed : AbsorbSeed
{
Obituary "%o was sapped by %k's \cqGiga Drain."
Radius 20
Height 20
damage (40)
speed 60
States
{
Spawn:
COOW E 0 ThrustThingZ(0, 12, 0, 1)
TABS EFGHGF 3
Continue:
TABS EFGHGF 3 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
loop
Crash:
XDeath:
TNT1 AA 0 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
TNT1 AAAAAAA 1 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
Stop
Crash:
XDeath:
TNT1 AA 0 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
TNT1 AAAAAAA 1 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
Stop
Drain:
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 2 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 2 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 2 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 2 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 2 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
COOW EF 0 A_TakeFromTarget("DrainFlag",999)
Stop
Death:
ACOE ABC 2 A_PlaySoundEx("weapon/pshot","Weapon")
Stop
}
}

actor TreeWillOWisp : MageStaffFX2
{
PROJECTILE
+DONTBLAST
+SEEKERMISSILE
-EXTREMEDEATH
Radius 10
Height 10
scale 2.5
damage (0)
damagetype "Burn"
speed 5
States
{
Spawn:
COOW EFGHEFGH 3 A_MStaffTrack
loop
Death:
DRIL A 0 A_Explode(20, 96, 0)
COOW B 0 A_TakeFromTarget("BlueFireFlag",99)
Stop
}
}

actor WillOWisp
{
PROJECTILE
Obituary "%o got burnt by %k's \chWill-O-Wisp."
+DONTBLAST
Radius 20
Height 20
scale 2.5
damage (0)
damagetype "TreoBurn"
speed 20
States
{
Spawn:
/*
REMI B 2 ACS_ExecuteAlways(989, 0, ACS_ExecuteWithResult(257)+100)
c
REMI B 0 A_ChangeVelocity(cos(pitch)*11, 0, -sin(pitch)*11,CVF_RELATIVE)
*/

COOW E 0 A_SpawnItemEx("WillFire3FX")
COOW E 0 ACS_ExecuteAlways(989, 0, ACS_ExecuteWithResult(257)+100)
REMI B 0 A_ScaleVelocity(0.20)
COOW E 0 A_ChangeVelocity(cos(pitch)*11, 0, -sin(pitch)*11,CVF_RELATIVE)
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,180,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,9,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 0 A_GiveToTarget("TargetMarker", 1)
loop
Death:
TNT1 A 0 A_SpawnItemEx("OilPitIgnite",0,0,8)
DRIL A 0 A_Explode(15, 96, 0)
TNT1 AAAA 1 A_SpawnItemEx("WillFireBit",0,0,0,random(-10,10),random(-10,10),random(10,15),random(0,360))
COOW B 0 A_TakeFromTarget("BlueFireFlag",99)
Stop
}
}


/*
actor WillOWisp
{
PROJECTILE
Obituary "%o got burnt by %k's \chWill-O-Wisp."
+DONTBLAST
Radius 10
Height 10
scale 2.5
damage (0)
damagetype "TreoBurn"
speed 20
States
{
Spawn:
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,0,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_SpawnItemEx("WillFire3FX")
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,180,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,9,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,189,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,18,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_SpawnItemEx("WillFire3FX")
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,198,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,27,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,207,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,36,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_SpawnItemEx("WillFire3FX")
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,216,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,45,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,225,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,54,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_SpawnItemEx("WillFire3FX")
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,234,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,63,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,243,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,72,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_SpawnItemEx("WillFire3FX")
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,252,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,81,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,261,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,90,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_SpawnItemEx("WillFire3FX")
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,270,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,99,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,279,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,108,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_SpawnItemEx("WillFire3FX")
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,288,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,117,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,297,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,126,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_SpawnItemEx("WillFire3FX")
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,306,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,135,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,315,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,144,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_SpawnItemEx("WillFire3FX")
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,324,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,153,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,333,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,162,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_SpawnItemEx("WillFire3FX")
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,342,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
TFIR A 1 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,171,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW EFGH 0 A_ChangeVelocity(cos(pitch)*(12+ACS_ExecuteWithResult(159)/30),0,-sin(pitch)*(12+ACS_ExecuteWithResult(159)/30),CVF_RELATIVE|CVF_REPLACE)
COOW EFGH 0 A_GiveInventory("WillOWispVelocity")
COOW B 0 A_JumpIfInTargetInventory("BlueFireFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("WillFire2FX",56,0,10,momx,momy,momz,351,SXF_ABSOLUTEANGLE|SXF_ABSOLUTEMOMENTUM)
COOW EFGH 0 A_SpawnItemEx("WillFire3FX")
loop
Death:
TNT1 A 0 A_SpawnItemEx("OilPitIgnite",0,0,8)
DRIL A 0 A_Explode(15, 96, 0)
TNT1 AAAA 1 A_SpawnItemEx("WillFireBit",0,0,0,random(-10,10),random(-10,10),random(10,15),random(0,360))
COOW B 0 A_TakeFromTarget("BlueFireFlag",99)
Stop
}
}
*/


actor WillFireBit
{
damage 0
+RIPPER
-NOGRAVITY
-SOLID
scale 2.5
//+NOINTERACTION
Height 2
Radius 2
States
{
Spawn:
TFIR FF 2
TFIR DD 2
TFIR BB 2
TFIR FF 2
TFIR DD 2
TFIR BB 2 A_SetTranslucent (0.8, 0)
TFIR FF 2 A_SetTranslucent (0.6, 0)
TFIR DD 2 A_SetTranslucent (0.4, 0)
TFIR BB 2 A_SetTranslucent (0.2, 0)
stop
}
}

actor WillFire3FX
{
PROJECTILE
Obituary "%o got burnt by %k's \chWill-O-Wisp."
+DONTBLAST
damagetype "Fire"
speed 0
Damage (1)
radius 8
height 8
scale 2.5
States
{
Spawn:
TFIR FF 1
TFIR DD 1
TFIR BB 1 A_SetTranslucent (0.8, 0)
TFIR FF 1 A_SetTranslucent (0.6, 0)
TFIR DD 1 A_SetTranslucent (0.4, 0)
TFIR BB 1 A_SetTranslucent (0.2, 0)
stop
}
}

actor WillFire2FX
{
PROJECTILE
Obituary "%o got burnt by %k's \chWill-O-Wisp."
+DONTBLAST
damagetype "Fire"
speed 0
Damage (1)
radius 8
height 8
scale 2.5
States
{
Spawn:
TFIR BB 1
stop
}
}

actor WillOWispVelocity : CustomInventory
{
states
{
pickup:
TNT1 A 0 ACS_ExecuteAlways(800,0)
stop
}
}

actor TreoItem : CustomInventory
{
inventory.amount 1
inventory.maxamount 1
inventory.icon "TREIC"
scale 2.0
+INVBAR
states
{
Spawn:
BUBA J 1
loop
Use:
TNT1 A 0 A_JumpIfInventory("BlueFireAmmo",28,1)
fail
TNT1 A 0 A_JumpIfInventory("TreoTreeFlag",4,"Failure")
TNT1 A 0 A_GiveInventory("TreoTreeFlag",1)
TNT1 A 0 A_PlaySoundEx("item/refill","Voice")
TNT1 A 0 A_GiveInventory("HaveFunPlanting",1)
fail
Failure:
TNT1 A 0
fail
}
}

actor TreoWepX : TreoWep
{
Weapon.AmmoGive 0
States
{
Deselect:
TNT1 A 0 A_SelectWeapon("TreoWep")
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
TNT1 A 1 A_Lower
Loop
Select:
TNT1 A 0 A_SelectWeapon("TreoWep")
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
TNT1 A 1 A_Raise
Loop
}
}


actor GigaDrainWep : BaseMM8BDMWep
{
Weapon.AmmoUse 2
Weapon.AmmoGive 28
Weapon.SlotNumber 2
Obituary "%o got his energy drained by %k's Giga Drain."
Inventory.Pickupmessage "Power up! Giga Drain!"
weapon.ammotype "BlueFireAmmo"
inventory.pickupsound "weapon/weaponup"
+WEAPON.AMMO_OPTIONAL 
inventory.icon "TREID"
Scale 2.0
States
{
Spawn:
TREI B 1
loop
Ready:
BUST B 0 ACS_ExecuteAlways(998,0,301)
GIGD A 1 A_WeaponReady
Goto Ready+1
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
GIGD A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
GIGD A 1 A_Raise
Loop

Fire:
GIGD A 1 A_JumpIfNoAmmo("NoAmmo")
Goto Hold

Hold:
BUST B 0 A_JumpIfInventory("WeaponCharge",40,"Charge2")
BUST B 0 A_JumpIfInventory("WeaponCharge",20,"Charge")
GIGD A 1 A_GiveInventory("WeaponCharge",1)
BUST B 0 A_Refire
Goto Absorb

Charge:
BUST B 0 A_JumpIfInventory("WeaponCharge",21,"Charge1")
BUST B 0 A_PlaySoundEx("weapon/coilstart","Weapon")
Goto Charge1

Charge1:
BUST B 0 ACS_ExecuteAlways(991,0,303)
GIGD A 2 A_GiveInventory("WeaponCharge",1)
BUST B 0 ACS_ExecuteAlways(991,0,301)
BUST B 0 A_GiveInventory("HaveShotFlag",1)
GIGD B 2 A_GiveInventory("WeaponCharge",1)
BUST H 0 A_Refire
Goto MegaDrainr

Charge2:
BUST B 0 A_JumpIfInventory("HaveShotFlag",1,"StartFlash")
BUST B 0 A_TakeInventory("HaveShotFlag",1)
GIGD A 2
BUST B 0 A_Refire
BUST B 0 A_GiveInventory("HaveShotFlag",1)
Goto GigaDrainr

StartFlash:
BUST B 0 A_GunFlash
Goto Charge2+1

Flash:
BUST B 0 ACS_ExecuteAlways(974,0)
BUST B 0 A_PlaySoundEx("weapon/coilcharge","Weapon")
BUST B 0 ACS_ExecuteAlways(991,0,302)
GIGD B 2
BUST B 0 A_JumpIfInventory("HaveShotFlag",1,"NoFlash")
BUST B 0 ACS_ExecuteAlways(991,0,303)
GIGD C 2
BUST B 0 A_JumpIfInventory("HaveShotFlag",1,"NoFlash")
BUST B 0 ACS_ExecuteAlways(991,0,301)
GIGD B 1
BUST B 0 A_GiveInventory("HaveShotFlag",1)
Goto NoFlash

Absorb:
COOW B 0 A_PlaySoundEx("weapon/mbuster","Weapon")
COOW B 0 A_FireCustomMissile("DamageCheckerm",0,0,0,0)
COOW B 0 A_FireCustomMissile("AbsorbSeedm",0,1,8,0)
COOW B 0 A_TakeInventory("WeaponCharge",999)
GIGD DE 6
GIGD A 8
COOW B 0 A_Refire
Goto Ready+1

MegaDrainr:
COOW B 0 A_JumpIfInventory("BlueFireAmmo",2,"MegaDrain")
COOW B 0 A_FireCustomMissile("DamageCheckerm",0,0,0,0)
COOW B 0 A_FireCustomMissile("AbsorbSeedm",0,1,8,0)
COOW B 0 A_TakeInventory("WeaponCharge",999)
GIGD DE 6
GIGD A 8
COOW B 0 A_Refire
Goto Ready+1

MegaDrain:
SCLA A 0 A_PlaySoundEx("weapon/slashclaw","Weapon")
COOW B 0 A_FireCustomMissile("DamageChecker2m",0,0,0,0)
COOW B 0 A_FireCustomMissile("MegaSeedm",0,1,8,0)
COOW B 0 A_TakeInventory("WeaponCharge",999)
COOW B 0 A_TakeInventory("BlueFireAmmo",1)
GIGD DE 3
GIGD A 12
COOW B 0 A_Refire
Goto Ready+1

GigaDrainr:
COOW B 0 A_JumpIfInventory("BlueFireAmmo",4,"GigaDrain")
COOW B 0 A_JumpIfInventory("BlueFireAmmo",2,"MegaDrain")
COOW B 0 A_FireCustomMissile("DamageCheckerm",0,0,0,0)
COOW B 0 A_FireCustomMissile("AbsorbSeedm",0,1,8,0)
COOW B 0 A_TakeInventory("WeaponCharge",999)
GIGD DE 6
GIGD A 8
COOW B 0 A_Refire
Goto Ready+1

GigaDrain:
COOW B 0 A_PlaySoundEx("weapon/leafshield","Weapon")
COOW B 0 A_FireCustomMissile("DamageChecker3m",0,0,0,0)
COOW B 0 A_FireCustomMissile("GigaSeedm",0,1,8,0)
COOW B 0 A_TakeInventory("WeaponCharge",999)
COOW B 0 A_TakeInventory("BlueFireAmmo",3)
GIGD DE 6
GIGD A 16
COOW B 0 A_Refire
Goto Ready+1

NoFlash:
TNT1 A 1
stop
NoAmmo:
BUST B 0 A_GiveInventory("HaveShotFlag",1)
GIGD A 1 ACS_ExecuteAlways(991,0,301)
Goto Ready+1
}
}

actor DamageCheckerm
{
PROJECTILE
//-NOGRAVITY
Radius 5
Height 5
scale 2.5
damage (1)
//damagetype "AbsorbDrain"
+FORCEXYBILLBOARD
+NOTARGETSWITCH
speed 40
States
{
Spawn:
COOW E 0 //ThrustThingZ(0, 12, 0, 1)
TNT1 AAAA 3
Continue:
TNT1 AAAA 3 
loop
/*XDeath:
TNT1 AAA 1 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
Stop
Drain:
COOW EF 0 A_SpawnItemEx("DrainBit",random(-50,50),random(-50,50),random(-50,50))
COOW EF 0 A_TakeInventory("DrainFlag",999)
Stop
*/}
}

actor DamageChecker2m : DamageCheckerm
{
Radius 10
Height 10
speed 50
}

actor DamageChecker3m : DamageCheckerm
{
Radius 20
Height 20
speed 60
}

actor AbsorbSeedm
{
PROJECTILE
Obituary "%o was sapped by %k's \cdAbsorb."
//-NOGRAVITY
Radius 5
Height 5
scale 2.5
damage (13)
damagetype "AbsorbDrain"
+FORCEXYBILLBOARD
+NOTARGETSWITCH
speed 40
States
{
Spawn:
COOW E 0 //ThrustThingZ(0, 12, 0, 1)
TAGL ABCDCB 3
Continue:
TAGL ABCDCB 3 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
loop
Crash:
XDeath:
TNT1 AA 0 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
TNT1 AAAAAAA 1 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
Stop
Drain:
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("DrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 2 A_SpawnItemEx("DrainBit",random(-50,50),random(-50,50),random(-50,50))
COOW EF 0 A_TakeFromTarget("DrainFlag",999)
Stop
Death:
ACOE DEF 2 A_PlaySoundEx("weapon/pshot","Weapon")
Stop
}
}

actor MegaSeedm : AbsorbSeedm
{
Radius 10
Height 10
damage (25)
speed 50
States
{
Spawn:
COOW E 0 ThrustThingZ(0, 12, 0, 1)
TABS BCDC 3
Continue:
TABS BCDC 3 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
loop
Crash:
XDeath:
TNT1 AA 0 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
TNT1 AAAAAAA 1 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
Stop
Crash:
XDeath:
TNT1 AA 0 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
TNT1 AAAAAAA 1 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
Stop
Drain:
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("MegaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 2 A_SpawnItemEx("MegaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("MegaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 2 A_SpawnItemEx("MegaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("MegaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
COOW EF 0 A_TakeFromTarget("DrainFlag",999)
Stop
Death:
ACOE DEF 2 A_PlaySoundEx("weapon/pshot","Weapon")
Stop
}
}

actor GigaSeedm : AbsorbSeedm
{
Radius 20
Height 20
damage (40)
speed 60
States
{
Spawn:
COOW E 0 ThrustThingZ(0, 12, 0, 1)
TABS EFGHGF 3
Continue:
TABS EFGHGF 3 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
loop
Crash:
XDeath:
TNT1 AA 0 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
TNT1 AAAAAAA 1 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
Stop
Crash:
XDeath:
TNT1 AA 0 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
TNT1 AAAAAAA 1 A_JumpIfInTargetInventory("DrainFlag",1,"Drain")
Stop
Drain:
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 2 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 2 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 2 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 2 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 1 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
TNT1 AA 2 A_SpawnItemEx("GigaDrainBit",random(-50,50),random(-50,50),random(-50,50))
RCUT A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
COOW EF 0 A_TakeFromTarget("DrainFlag",999)
Stop
Death:
ACOE ABC 2 A_PlaySoundEx("weapon/pshot","Weapon")
Stop
}
}