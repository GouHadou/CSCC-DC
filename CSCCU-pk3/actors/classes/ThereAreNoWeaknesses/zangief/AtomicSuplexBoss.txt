

actor AtomicZangiefBase : CustomWepBase
{
Obituary "$OB_ZANGIEF"
states
{
Spawn:
WEAP E 1
loop
Deselect:
//TNT1 A 0 A_GunFlash("NoFlash", GFF_NOEXTCHANGE)
//Deselect2:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
TNT1 A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
TNT1 A 1 A_Raise
Loop

Ready:
TNT1 A 0 ACS_ExecuteAlways(998,0,438)
Ready2:
POWS E 1 A_WeaponReady
POWS E 0 A_GiveInventory("AtomicSuplexAmmo",1)
loop

ReadyJump:
TNT1 A 0 A_JumpIfInventory("AtomicSuplexBoss", 1, "Ready2")
TNT1 A 1 A_Jump(256, "Ready2")
wait

Fire:
AltFire:
TOPH A 0 A_ChangeFlag("SHOOTABLE",0)
TNT1 A 0 A_GiveInventory("Lariat",1)
TNT1 A 0 A_PlaySoundEx("weapon/topspin","Weapon")

TOPH ABCDE 3 A_GiveInventory("LariatFunc",1)
TNT1 A 3 A_GiveInventory("LariatFunc",1)
TNT1 A 0 A_TakeInventory("Lariat",1)
TNT1 A 0 A_ChangeFlag("SHOOTABLE",1)
TNT1 AAAAAAAAAA 2 A_GiveInventory("AtomicSuplexAmmo",1)
TNT1 AAA 2 A_GiveInventory("AtomicSuplexAmmo",1)
goto ReadyJump

GoingUp:
SAKH C 0 ThrustThingZ(0,1,1,1)
JARM E 1 A_Jumpif(!CallACS("Grasp_TID",CallACS("Get_SuplexID_TID")),"AtomicKaboom")
TNT1 A 0 A_CheckFloor("AtomicKaboom")
TNT1 A 0 A_JumpIf(momz>0,"GoingUp")
GoingDown:
SAKH C 0 ThrustThingZ(0,1,1,1)
JARM E 1 A_Jumpif(!CallACS("Grasp_TID",CallACS("Get_SuplexID_TID")),"AtomicKaboom")
TNT1 A 0 A_CheckFloor("AtomicKaboom")
TNT1 A 0 A_JumpIf(momz<0,"GoingDown")
AtomicKaboomJump:
TNT1 A 0 A_JumpIfInventory("AtomicSuplexBoss", 1, "AtomicKaboom")
TNT1 A 1 A_Jump(256, "AtomicKaboom")
wait

GoingUpSpin:
SAKH C 0 ThrustThingZ(0,1,1,1)
TNT1 A 0 A_SetAngle(angle+20.0)
JARM E 1 A_Jumpif(!CallACS("Grasp_TID",CallACS("Get_SuplexID_TID")),"AtomicKaboom")
TNT1 A 0 A_CheckFloor("AtomicKaboom")
TNT1 A 0 A_JumpIf(momz>0,"GoingUpSpin")
GoingDownSpin:
SAKH C 0 ThrustThingZ(0,1,1,1)
TNT1 A 0 A_SetAngle(angle+20.0)
JARM E 1 A_Jumpif(!CallACS("Grasp_TID",CallACS("Get_SuplexID_TID")),"AtomicKaboom")
TNT1 A 0 A_CheckFloor("AtomicKaboom")
TNT1 A 0 A_JumpIf(momz<0,"GoingDownSpin")
goto AtomicKaboomJump

AtomicKaboomEnd:
//JARM F 0 A_TakeInventory("SuplexID",999)
JARM BBB 2  A_GiveInventory("AtomicSuplexAmmo",1)
//JARM F 0 A_TakeInventory("SuplexID",999)
//TOPH A 0 A_ChangeFlag("SHOOTABLE",1)
TOPH A 0 A_ChangeFlag("INVULNERABLE",0)
TNT1 A 0 SetPlayerProperty(0,0,4)
TOPH A 0 A_ChangeFlag("SOLID",1) //More elegant solution later
JARM BBB 2 A_GiveInventory("AtomicSuplexAmmo",1)
goto ReadyJump
}
}

actor AtomicSuplexBoss : AtomicZangiefBase
{
Tag "$TAG_ZANGIEF1"
Weapon.SlotNumber 1
Weapon.AmmoUse 120
weapon.ammotype "AtomicSuplexAmmo"
inventory.icon "CHARSI"
dropitem "ChargeKickWep"
//dropitem "PileDriverWep"
States
{
Fire:
BUST B 0 A_JumpIfNoAmmo("NoAmmo")
FSTO D 0 A_TakeInventory("AtomicSuplexAmmo",20)
POWS E 0 A_CheckFloor("GroundFire")
goto AirFire

GroundFire:
FSTO D 0 A_TakeInventory("AtomicSuplexAmmo",10)
JARM BCDE 2
SuplexWalk:
JARM F 0 A_GiveInventory("GroundGrab",1)
JARM F 1 A_GiveInventory("SuplexWalkThrust",1)
JARM F 0 A_TakeInventory("AtomicSuplexAmmo",1)
JARM F 0 A_JumpIfInventory("AtomicSuplexAmmo",1,"RefireCheckGround")
goto SuplexGrab
RefireCheckGround:
JARM F 0 A_Refire("SuplexWalk")
SuplexGrab:
JARM F 0 A_TakeInventory("GroundGrab",1)
FSTO D 0 A_TakeInventory("SuplexID",999)

JARM F 1 A_GiveInventory("AtomicSuplexGrabFunc",1)
JARM F 0 A_JumpIfInventory("SuplexID",1,"Suplex")
JARM F 1 A_GiveInventory("AtomicSuplexGrabFunc",1)
JARM F 0 A_JumpIfInventory("SuplexID",1,"Suplex")
JARM E 1 //A_GiveInventory("AtomicSuplexGrabFunc",1)
JARM E 0 A_JumpIfInventory("SuplexID",1,"Suplex")
JARM E 1 //A_GiveInventory("AtomicSuplexGrabFunc",1)
JARM E 0 A_JumpIfInventory("SuplexID",1,"Suplex")
JARM EE 1 A_JumpIfInventory("SuplexID",1,"Suplex")

JARM F 0 A_TakeInventory("AtomicSuplexAmmo",10)
JARM DCB 2
JARM BBBBBBBBBB 2 A_GiveInventory("AtomicSuplexAmmo",1)
goto Ready2

AirFire:
//FSTO D 0 A_TakeInventory("AtomicSuplexAmmo",1)
JARM F 0 A_GiveInventory("AirGrab",1)
TNT1 A 0 A_TakeInventory("ZangiefAngle",255)
TNT1 A 0 A_GiveInventory("ZangiefAngle",angle*256/360)
FSTO BBCC 1 A_GiveInventory("SuplexFly",1)
FSTO D 0 A_TakeInventory("SuplexID",999)
SuplexFly:
FSTO D 0 A_GiveInventory("SuplexFly",1)
STAA A 0 A_SpawnItemEx("AerialGrab",0,0,50, momx,momy,momz, 0, SXF_ABSOLUTEMOMENTUM|SXF_NOCHECKPOSITION, 0)
FSTO D 1
FSTO D 0 A_JumpIfInventory("SuplexID",1,"Suplex")
JARM F 0 A_TakeInventory("AtomicSuplexAmmo",2)
JARM F 0 A_JumpIfInventory("AtomicSuplexAmmo",1,"RefireCheckAir")
goto AirEnd
RefireCheckAir:
JARM F 0 A_Refire("SuplexFly")
AirEnd:
JARM F 0 A_TakeInventory("AirGrab",1)
FSTO DD 1 A_JumpIfInventory("SuplexID",1,"Suplex")

JARM F 0 A_TakeInventory("AtomicSuplexAmmo",10)
FSTO DCD 2
JARM BBBBB 2 A_GiveInventory("AtomicSuplexAmmo",1)
goto Ready2

Suplex:
JARM F 0 A_TakeInventory("AtomicSuplexAmmo",40)

TNT1 A 0 A_PlaySound("weapon/crashland")
TNT1 A 0 SetPlayerProperty(0,1,4)
TNT1 A 0 A_TakeInventory("ZangiefAngle",255)
TNT1 A 0 A_GiveInventory("ZangiefAngle",CallACS("GetAngleToTid",CallACS("Get_SuplexID_TID")))
TNT1 A 0 A_SetAngle(CallACS("GetAngleToTid",CallACS("Get_SuplexID_TID"))*360/256)
//TNT1 A 0 A_SetAngle(CallACS("Count_ZangiefAngle")*360/256)
TOPH A 0 A_ChangeFlag("SHOOTABLE",0)
TNT1 A 0 A_ChangeFlag("SOLID",0)

TNT1 A 0 A_SetPitch(0)
//TNT1 A 0 A_SetAngle(angle)
JARM E 1 ACS_NamedExecuteWithResult("Grasp_TID",CallACS("Get_SuplexID_TID"))

//360
TNT1 A 0 A_SetPitch(356)
TNT1 A 0 A_SetAngle(angle+12)
JARM E 1 A_Jumpif(!CallACS("SuplexGrasp_TID",348,CallACS("Count_ZangiefAngle"),CallACS("Get_SuplexID_TID")),"AtomicKaboom")
TNT1 A 0 A_SetPitch(352)
TNT1 A 0 A_SetAngle(angle+12)
JARM E 1 A_Jumpif(!CallACS("SuplexGrasp_TID",336,CallACS("Count_ZangiefAngle"),CallACS("Get_SuplexID_TID")),"AtomicKaboom")
TNT1 A 0 A_SetPitch(348)
TNT1 A 0 A_SetAngle(angle+12)
JARM E 1 A_Jumpif(!CallACS("SuplexGrasp_TID",325,CallACS("Count_ZangiefAngle"),CallACS("Get_SuplexID_TID")),"AtomicKaboom")
TNT1 A 0 A_SetPitch(344)
TNT1 A 0 A_SetAngle(angle+12)
JARM E 1 A_Jumpif(!CallACS("SuplexGrasp_TID",314,CallACS("Count_ZangiefAngle"),CallACS("Get_SuplexID_TID")),"AtomicKaboom")
TNT1 A 0 A_SetPitch(340)
TNT1 A 0 A_SetAngle(angle+12)
JARM E 1 A_Jumpif(!CallACS("SuplexGrasp_TID",303,CallACS("Count_ZangiefAngle"),CallACS("Get_SuplexID_TID")),"AtomicKaboom")
TNT1 A 0 A_SetPitch(336)
TNT1 A 0 A_SetAngle(angle+12)
JARM E 1 A_Jumpif(!CallACS("SuplexGrasp_TID",292,CallACS("Count_ZangiefAngle"),CallACS("Get_SuplexID_TID")),"AtomicKaboom")
TNT1 A 0 A_SetPitch(333)
TNT1 A 0 A_SetAngle(angle+12)
JARM E 1 A_Jumpif(!CallACS("SuplexGrasp_TID",281,CallACS("Count_ZangiefAngle"),CallACS("Get_SuplexID_TID")),"AtomicKaboom")
TNT1 A 0 A_SetPitch(330)
TNT1 A 0 A_SetAngle(angle+19)
JARM E 1 A_Jumpif(!CallACS("SuplexGrasp_TID",270,CallACS("Count_ZangiefAngle"),CallACS("Get_SuplexID_TID")),"AtomicKaboom")
TNT1 A 0 A_SetPitch(337)
TNT1 A 0 A_SetAngle(angle+26)
JARM E 1 A_Jumpif(!CallACS("SuplexGrasp_TID",293,CallACS("Count_ZangiefAngle")+128,CallACS("Get_SuplexID_TID")),"AtomicKaboom")
TNT1 A 0 A_SetPitch(344)
TNT1 A 0 A_SetAngle(angle+26)
JARM E 1 A_Jumpif(!CallACS("SuplexGrasp_TID",316,CallACS("Count_ZangiefAngle")+128,CallACS("Get_SuplexID_TID")),"AtomicKaboom")
TNT1 A 0 A_SetPitch(352)
TNT1 A 0 A_SetAngle(angle+25)
JARM E 1 A_Jumpif(!CallACS("SuplexGrasp_TID",338,CallACS("Count_ZangiefAngle")+128,CallACS("Get_SuplexID_TID")),"AtomicKaboom")

TNT1 A 0 A_SetPitch(0)

TNT1 A 0 A_JumpIf(momz<0,"GoingDown")
goto GoingUp

AtomicKaboom:
TOPH A 0 A_ChangeFlag("SHOOTABLE",1)
TOPH A 0 A_ChangeFlag("INVULNERABLE",1)
TNT1 A 0 ACS_NamedExecuteWithResult("Give_AntiInvincible_ToTID",CallACS("Get_SuplexID_TID"))
TNT1 A 0 A_SpawnItemEX("AtomicSuplex", 0,0,0, 0,0,0, 0, SXF_ABSOLUTEMOMENTUM|SXF_NOCHECKPOSITION, 0)
goto AtomicKaboomEnd

NoAmmo:
POWS E 0 A_GiveInventory("AtomicSuplexAmmo",1)
POWS E 1 //ACS_Execute(979,0)
goto Ready2
}
}

actor AtomicBusterBoss : AtomicZangiefBase
{
Tag "$TAG_ZANGIEF2"
Weapon.SlotNumber 2
Weapon.AmmoUse 0
weapon.ammotype "AtomicBusterCharge"
inventory.icon "ATOMI"
dropitem "AtomicFireWep"
states
{
Ready:
TNT1 A 0 ACS_ExecuteAlways(998,0,29)
Ready2:
HEAT G 1 A_WeaponReady
POWS E 0 A_GiveInventory("AtomicSuplexAmmo",1)
loop

Fire:
HEAT J 0 A_JumpIfInventory("AtomicBusterCharge",16,"AtomicBuster")
HEAT J 0 A_GiveInventory("AtomicBusterCharge",1)
HEAT J 1
HEAT J 0 A_Refire
HEAT J 1
HEAT J 0 A_Refire
HEAT J 1
HEAT J 0 A_Refire
HEAT J 0 A_TakeInventory("AtomicBusterCharge",16)
goto Ready2
AtomicBuster:
//JARM BCDEFGH 2
HEAT J 0 A_TakeInventory("AtomicBusterCharge",16)
//TOPH A 0 A_ChangeFlag("SHOOTABLE",0)
TOPH A 0 A_ChangeFlag("INVULNERABLE",1)
FSTO D 0 A_TakeInventory("SuplexID",999)

JARM F 1 A_GiveInventory("AtomicBusterGrabFunc",1)
JARM F 0 A_JumpIfInventory("SuplexID",1,"Suplex")
JARM F 1 A_GiveInventory("AtomicBusterGrabFunc",1)
JARM F 0 A_JumpIfInventory("SuplexID",1,"Suplex")
JARM E 1 A_GiveInventory("AtomicBusterGrabFunc",1)
JARM F 0 A_JumpIfInventory("SuplexID",1,"Suplex")
//JARM E 1 A_GiveInventory("AtomicBusterGrabFunc",1)
JARM E 1 A_Stop
JARM F 0 A_JumpIfInventory("SuplexID",1,"Suplex")
JARM D 1 A_Stop
JARM F 0 A_JumpIfInventory("SuplexID",1,"Suplex")
JARM D 1 A_Stop
JARM F 0 A_JumpIfInventory("SuplexID",1,"Suplex")
JARM CCBB 1 A_Stop

//TOPH A 0 A_ChangeFlag("SHOOTABLE",1)
TOPH A 0 A_ChangeFlag("INVULNERABLE",0)

JARM BBB 2 A_GiveInventory("AtomicSuplexAmmo",1)
goto Ready2

Suplex:
TNT1 A 0 A_PlaySound("weapon/crashland")
TNT1 A 0 SetPlayerProperty(0,1,4)
TNT1 A 0 A_SetAngle(CallACS("GetAngleToTid",CallACS("Get_SuplexID_TID"))*360/256)
TNT1 A 0 A_SetPitch(0)
TOPH A 0 A_ChangeFlag("SHOOTABLE",0)
TNT1 A 0 A_ChangeFlag("SOLID",0)

JARM EEEEEE 1 A_GiveInventory("AtomicBusterGrabbedStartFunc",1)

JARM E 0 A_Stop
TNT1 A 0 A_TakeInventory("JumpCancler",1)
TNT1 A 0 A_Recoil(-6)
TNT1 A 0 ThrustThingZ(0,100,0,0)
//TNT1 A 0 A_GunFlash("FlashSpin", GFF_NOEXTCHANGE)
//goto GoingUp
goto GoingUpSpin //desync issue

AtomicKaboom:
//TNT1 A 0 A_GunFlash("NoFlash", GFF_NOEXTCHANGE)
TOPH A 0 A_ChangeFlag("SHOOTABLE",1)
TNT1 A 0 ACS_NamedExecuteWithResult("Give_AntiInvincible_ToTID",CallACS("Get_SuplexID_TID"))
TNT1 A 0 A_SpawnItemEX("AtomicBuster", 0,0,0, 0,0,0, 0, SXF_ABSOLUTEMOMENTUM|SXF_NOCHECKPOSITION, 0)
TNT1 A 0 A_Recoil(10)
TNT1 A 0 ThrustThingZ(0,35,0,0)
goto AtomicKaboomEnd

FlashSpin:
TNT1 A 1 A_SetAngle(angle+20.0)
loop
}
}

actor AtomicSuplexAmmo : Ammo
{
+INVENTORY.IGNORESKILL
inventory.amount 1
inventory.maxamount 120
}
actor AtomicBusterCharge : Ammo
{
+INVENTORY.IGNORESKILL
inventory.amount 1
inventory.maxamount 16
}
actor SuplexID : Inventory
{
inventory.amount 1
inventory.maxamount 64
}
actor ZangiefAngle : Inventory
{
inventory.amount 1
inventory.maxamount 255
}

actor Lariat : Inventory
{
inventory.amount 1
inventory.maxamount 1
}
actor GroundGrab : Inventory
{
inventory.amount 1
inventory.maxamount 1
}
actor AirGrab : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor LariatFunc : CustomInventory
{
states
{
pickup:
TNT1 A 0 A_GiveInventory("AtomicSuplexAmmo",1)
TNT1 A 0 A_SpawnItemEx("DoubleLariat", 0, 0, 28, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM|SXF_NOCHECKPOSITION, 0)
stop
}
}

actor DoubleLariat
{
PROJECTILE
scale 5.0
Obituary "$OB_ZANGIEF"
damagetype "TopSpin"
//damagetype "ZangiefPush"
Speed 0
+DONTBLAST
height 0
radius 0
States
{
Spawn:
TNT1 A 0
TOPS A 1 A_Explode(10,140,0)
stop
}
}

actor AtomicBusterGrabFunc : CustomInventory
{
states
{
pickup:
TNT1 A 0 A_FireCustomMissile("AtomicBusterGrab",0,0,0,0)
TNT1 A 0 A_Stop
stop
}
}

actor AtomicBusterGrabbedStartFunc : CustomInventory
{
states
{
pickup:
TNT1 A 0 ACS_NamedExecuteWithResult("Grasp_TID",CallACS("Get_SuplexID_TID"))
TNT1 A 0 A_Stop
stop
}
}

actor ZangiefSuplexStart : CustomInventory
{
states
{
pickup:
TNT1 A 0 A_SpawnItemEx("ZangiefSuplexHit")
stop
}
}

actor ZangiefHitBase
{
Height 0
Radius 0
+NOINTERACTION
-SOLID
+NOGRAVITY
+MISSILE
}

actor ZangiefSuplexHit : ZangiefHitBase
{
states
{
Spawn:
TNT1 A 0
TNT1 A 0 A_TransferPointer(AAPTR_TARGET,AAPTR_DEFAULT,AAPTR_TARGET,AAPTR_TRACER) //target's target to self's tracer
TNT1 A 0 A_RearrangePointers(AAPTR_TRACER,AAPTR_DEFAULT,AAPTR_TARGET) //target <-> tracer
TNT1 A 0 A_JumpIfInTargetInventory("SuplexID",1,"SpawnNo")
TNT1 A 0 A_GiveToTarget("SuplexID",CallACS("core_gettracer",0)-1000+1)
TNT1 A 1
stop
SpawnNo:
TNT1 A 1
stop
}
}

actor ZangiefPushStart : CustomInventory
{
states
{
pickup:
TNT1 A 0 A_SpawnItemEx("ZangiefPusher")
stop
}
}

actor ZangiefPusher : ZangiefHitBase
{
states
{
Spawn:
TNT1 A 0
TNT1 A 0 A_TransferPointer(AAPTR_TARGET,AAPTR_DEFAULT,AAPTR_TARGET,AAPTR_TRACER) //target's target to self's tracer
TNT1 A 0 A_FaceTracer
TNT1 A 0 A_GiveToTarget("TempPitProtect",1)
TNT1 A 0 ThrustThing(angle*256/360,-20,0,ACS_ExecuteWithResult(257,0))
stop
}
}

actor AtomicBusterGrab
{
PROJECTILE
Radius 20
Height 20
scale 2.5
Obituary "$OB_ZANGIEFGRAB"
speed 60
damage (10)
reactiontime 1
damagetype "Suplex"
States
{
Spawn:
MMFX C 0
MMFX C 1 A_CountDown
goto Spawn+1
Death:
MMFX C 0 A_Explode(10,60,0)
goto XDeath
XDeath:
MMFX C 0 A_Stop
MMFX CBCD 2
stop
}
}

actor AtomicBuster
{
PROJECTILE
scale 5.0
Obituary "$OB_ZANGIEF"
damagetype "ZangiefPush"
Speed 0
+DONTBLAST
height 0
radius 0

+NOINTERACTION
+NOCLIP
+NOTARGETSWITCH
States
{
Spawn:
TNT1 A 0
TNT1 A 0 Thing_Move(0,CallACS("Get_Target_SuplexID_TID"),1)
TNT1 A 0 A_Explode(80, 400, 0)
Spawn2:
TNT1 A 0 A_PlaySoundEx("weapon/crackerexplode", "Weapon")
NAPA EFGHIJKLMNOPQRS 1
stop
}
}

actor SuplexWalkThrust : CustomInventory
{
states
{
pickup:
TNT1 A 0 A_GiveInventory("SuplexWalkSlow",1)
TNT1 A 0 A_CheckFloor("Ground")
JARM F 0 A_JumpIfInventory("AirThrustCooldown",1,3)
TNT1 A 0 A_GiveInventory("AirThrustCooldown",1)
TNT1 A 0 A_Recoil(-1)
TNT1 A 0
//TNT1 A 0 A_JumpIf(momz>0, "GoDown")
TNT1 A 0 ThrustThingZ(0,2,1,1)
stop
GoDown:
TNT1 A 0 ThrustThingZ(0,2,1,0)
stop
Ground:
TNT1 A 0 A_Recoil(-2)
stop
}
}

actor AirThrustCooldown : PowerUp
{
powerup.duration 2
}
actor SuplexWalkSlow : PowerSpeed
{
Speed 0.25
Powerup.Duration 25
}

actor AtomicSuplexPitchAdjust : CustomInventory
{
states
{
pickup:
TNT1 A 0 A_JumpIf(pitch<350 && pitch>=270, "UpLimit")
stop
UpLimit:
TNT1 A 0 A_SetPitch(350)
stop
}
}

actor AtomicSuplexGrabFunc : CustomInventory
{
states
{
pickup:
TNT1 A 0 A_JumpIf(pitch<350 && pitch>=270, "UpLimit")
goto Pickup2
UpLimit:
TNT1 A 0 A_SetPitch(350)
Pickup2:
TNT1 A 0 A_FireCustomMissile("AtomicSuplexGrab",0,0,0,0)
stop
}
}

actor AtomicSuplexGrab : AtomicBusterGrab
{
speed 45
States
{
Death:
MMFX C 0 A_Explode(10,40,0)
goto XDeath
}
}

actor AtomicSuplex : AtomicBuster
{
states
{
Spawn:
TNT1 A 0
TNT1 A 0 Thing_Move(0,CallACS("Get_Target_SuplexID_TID"),1)
TNT1 A 0 A_Explode(35, 300, 0)
goto Spawn2
}
}

actor SuplexFly : CustomInventory
{
states
{
pickup:
TNT1 A 0 A_GiveInventory("SuplexFlySlow",1)
TNT1 A 0 ThrustThing(CallACS("Count_ZangiefAngle"), 1, 0, 0)
TNT1 A 0 ThrustThingZ(0,10,0,0)
stop
}
}

actor SuplexFlySlow : PowerSpeed
{
Speed 0.1
Powerup.Duration 50
}

actor AerialGrab
{
PROJECTILE
damagetype "FlySuplex"
Speed 0
+DONTBLAST
height 0
radius 0
Obituary "$OB_ZANGIEFAIRGRAB"
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_RadiusGive("AirSuplexGroundCheck",1000,RGF_PLAYERS)
TNT1 A 0 A_Explode(10, 160, 0)
TNT1 A 1
stop
}
}

actor AirSuplexGroundCheck : CustomInventory
{
states
{
pickup:
TNT1 A 0 A_CheckFloor("Ground")
stop
Ground:
TNT1 A 0 A_GiveInventory("NoAirSuplex",1)
stop
}
}

actor NoAirSuplex : PowerProtection
{
powerup.duration 2
damagefactor "normal", 1.0
damagefactor "FlySuplex", 0.0
}