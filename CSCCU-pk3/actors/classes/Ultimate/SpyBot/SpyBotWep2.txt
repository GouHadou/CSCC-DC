actor WeedEater2 : BaseMM8BDMWep
{
//$Category MM8BDM-Weapons
//$Title WEED EATER
Weapon.AmmoUse 42
Weapon.AmmoGive 28
Weapon.SlotNumber 2
Obituary "%o got a severe 40-degree burn from %k's Knight CrackerBlast."
Inventory.Pickupmessage "Tomas' Charge, but with a pinch of \cqWEED EATER\c-."
Tag "Knight CrackerBlast"
weapon.ammotype "WeedEaterCharge"
+WEAPON.AMMO_OPTIONAL
inventory.icon "KNIGSI"
States
{
Ready:
WDTR D 0 ACS_ExecuteAlways(998,0,10025)
Ready1:
WDTR D 2 A_WeaponReady
WDTR D 0 A_GiveInventory("WeedEaterCharge",1)
Goto Ready1
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
WDTR D 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
WDTR D 1 A_Raise
Loop

Continue:
AWSM D 0 A_TakeInventory("KnightDouble",1)
Goto Ready1
Deselect:
WDTR D 0 A_TakeInventory("KnightFlag",999)
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
WDTR D 1 A_Lower
Loop

Fire:
WDTR D 0 A_JumpIfInventory("WeedEaterFlag",1,"Altfire.DashCheck")
WDTR D 0 A_JumpIfNoAmmo("NoAmmo")
WDTR D 0 A_PlaySoundEx("weapon/knightshot","Weapon")
WDTR D 0 A_FireCustomMissile("KnightCrackerBlast",0,1,8,0)
WDTR D 0 
WDTR DEF 4
Goto Check
Check:
WDTR F 1 A_GiveInventory("KnightFlag",1)
WDTR F 0 A_JumpIfInventory("KnightFlag",50,"Return")
Goto Check
Return:
WDTR F 3 A_TakeInventory("KnightFlag",999)
WDTR F 0 A_TakeInventory("KnightDouble",1)
WDTR E 2
WDTR D 0 A_Refire
Goto Ready1

AltFire:
WDTR D 1 A_JumpIf(Z - Floorz == 0, "AltFire.Fly")
Goto AltFire.AirDashCheck
AltFire.Fly:
WDTR D 1 A_JumpIfInventory("WeedEaterCharge", 28, "Altfire.RealFly")
Goto NoAmmo
Altfire.RealFly:
TNT1 A 0 A_GiveInventory("SpybotFlyStart_CI",1)
WDTR D 2 Offset(8,41)
WDTR D 3 Offset(16,50)
WDTR D 2 Offset(8,41)
WDTR D 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
WDTR D 1
WDTR DDDDDDD 5 ThrustThingZ(0, 0, 0, 0) //Hover for a few tics
FloorCheck:
WDTR D 1 A_WeaponReady(WRF_NOSECONDARY|WRF_NOSWITCH)
WDTR D 0 A_JumpIf(Z - Floorz == 0, "StopCheckingAndLand")
Loop
FloorCheck2:
WDTR D 1 A_JumpIf(Z - Floorz == 0, "StopCheckingAndLand")
Loop
StopCheckingAndLand:
TNT1 A 0 A_SpawnItemEx("SparkShock_Yes", 18, 0, 5, 15, 0, 0, -135)
TNT1 A 0 A_GiveInventory("SpybotFlyEnd_CI", 1)
WDTR D 2 Offset(0,52) //Moves the HUD down vertically
WDTR D 2 Offset(0,64)
WDTR D 2 Offset(0,82)
WDTR D 4
WDTR D 2 Offset(0,64)
WDTR D 1 Offset(16,50)
WDTR D 1 Offset(8,41)
WDTR D 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH) //Resets the HUD to the default position
WDTR D 16
Goto Ready1

Altfire.AirDash:
WDTR D 0 A_JumpIfInventory("WeedEaterFlag",1,"Altfire.DashCheck")
WDTR D 3
Goto Ready1
Altfire.DashCheck:
WDTR D 0 A_JumpIfInventory("WeedEaterCharge", 14, "Altfire.Dash")
Goto FloorCheck2
Altfire.AirDashCheck:
WDTR D 0 A_JumpIfInventory("WeedEaterCharge", 28, "Altfire.AirDash2")
Goto NoAmmo
Altfire.AirDash2:
WDTR D 0 A_TakeInventory("WeedEaterCharge",28,1)
Goto Altfire.AirDash_Real
Altfire.Dash:
WDTR D 0 A_GiveInventory("SpybotDash_CI",1)
WDTR D 2 A_ChangeVelocity(cos(pitch)*45, 0, -sin(pitch)*45, 3)
WDTR D 2 Offset(8,41)
WDTR D 2 Offset(16,50)
WDTR D 0 A_GunFlash("Flash.DashHitbox")
WDTR DDDDDDDD 2 ThrustThingZ(0,0,0,0)
WDTR D 1 Offset(8,41)
WDTR D 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
Goto FloorCheck
Flash.DashHitbox:
TNT1 AAAAA 2 A_SpawnItemEx("SpyAirDash", 0, 0, 0)
stop
Altfire.AirDash_Real:
WDTR D 0 A_GiveInventory("SpybotDash2_CI",1)
WDTR D 2 A_ChangeVelocity(cos(pitch)*45, 0, -sin(pitch)*45, 3)
WDTR D 2 Offset(8,41)
WDTR D 2 Offset(16,50)
WDTR D 0 A_GunFlash("Flash.DashHitbox")
WDTR DDDDDDDD 2 ThrustThingZ(0,0,0,0)
WDTR D 1 Offset(8,41)
WDTR D 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
Goto FloorCheckDash
NoAmmo:
WDTR D 1 ACS_Execute(979,0)
Goto Ready+1
FloorCheckDash:
WDTR D 1 A_JumpIf(Z - Floorz == 0, "AirDashEnd")
Loop

AirDashEnd:
WDTR D 0 A_TakeInventory("WeedEaterFlag", 9)
WDTR D 0 A_ChangeFlag("THRUACTORS",0)
WDTR D 0 A_SpawnItemEx("Resolidifier")
Goto Ready1
}
}

actor KnightCrackerBlast
{
PROJECTILE
Radius 8
Height 8
scale 2.5
damage (0)
damagetype "KnightCrush"
Obituary "%o got a severe 40-degree burn from %k's Knight CrackerBlast."
+RIPPER
+HEXENBOUNCE
+NOTARGETSWITCH
+SKYEXPLODE
+CANBOUNCEWATER
+FORCEXYBILLBOARD
//+NOCLIP
meleerange 12
reactiontime 48
speed 40
States
{
Spawn:
KNIG A 0
KNIG AAAA 1 A_SpawnItemEx("CrackerBlastDamager",0,0,0,2,0,0)
AWSM C 0 A_SpawnItemEx("KnightFlameBlast", 18, 0, 5, 15, 0, 0, 45)
AWSM C 0 A_SpawnItemEx("KnightFlameBlast", 18, 0, 5, 15, 0, 0, -45)
AWSM C 0 A_SpawnItemEx("KnightFlameBlast", 18, 0, 5, 15, 0, 0, 135)
AWSM C 0 A_SpawnItemEx("KnightFlameBlast", 18, 0, 5, 15, 0, 0, -135)
KNIG AAAA 1 A_SpawnItemEx("CrackerBlastDamager",0,0,0,2,0,0)
KNIG AAAA 1 A_SpawnItemEx("CrackerBlastDamager",0,0,0,2,0,0)
AWSM C 0 A_SpawnItemEx("KnightFlameBlast", 18, 0, 5, 15, 0, 0, 45)
AWSM C 0 A_SpawnItemEx("KnightFlameBlast", 18, 0, 5, 15, 0, 0, -45)
AWSM C 0 A_SpawnItemEx("KnightFlameBlast", 18, 0, 5, 15, 0, 0, 135)
AWSM C 0 A_SpawnItemEx("KnightFlameBlast", 18, 0, 5, 15, 0, 0, -135)
KNIG AAAA 1 A_SpawnItemEx("CrackerBlastDamager",0,0,0,2,0,0)
KNIG AAAA 1 A_SpawnItemEx("CrackerBlastDamager",0,0,0,2,0,0)
AWSM C 0 A_SpawnItemEx("KnightFlameBlast", 18, 0, 5, 15, 0, 0, 45)
AWSM C 0 A_SpawnItemEx("KnightFlameBlast", 18, 0, 5, 15, 0, 0, -45)
AWSM C 0 A_SpawnItemEx("KnightFlameBlast", 18, 0, 5, 15, 0, 0, 135)
AWSM C 0 A_SpawnItemEx("KnightFlameBlast", 18, 0, 5, 15, 0, 0, -135)
KNIG A 0 A_CustomMissile("CrackerBlastReturn",0,0,0,0)
stop
Death:
KNIG A 0 A_GiveToTarget("KnightFlag",999)
stop
}
}

actor CrackerBlastReturn : KnightCrackerBlast
{
radius 0
height 0
+NOINTERACTION
states
{
Spawn:
KNIG A 0 //Blank frame so next frame is processed
KNIG A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
KNIG A 0 A_JumpIfCloser(46,"Death")
KNIG A 0 A_SpawnItemEx("KnightReturnerSound")
KNIG A 0 A_JumpIfInTargetInventory("CutterFlag",999,"Death")
KNIG A 1 A_SpawnItemEx("CrackerBlastDamager",0,0,0,2,0,0)
KNIG A 0 A_JumpIfCloser(46,"Death")
KNIG A 1 A_SpawnItemEx("CrackerBlastDamager",0,0,0,2,0,0)
KNIG A 0 A_JumpIfCloser(46,"Death")
KNIG A 1 A_SpawnItemEx("CrackerBlastDamager",0,0,0,2,0,0)
KNIG A 0 A_JumpIfCloser(46,"Death")
KNIG A 1 A_SpawnItemEx("CrackerBlastDamager",0,0,0,2,0,0)
KNIG A 0 A_JumpIfCloser(46,"Death")
KNIG A 1 A_SpawnItemEx("CrackerBlastDamager",0,0,0,2,0,0)
KNIG A 0 A_JumpIfCloser(46,"Death")
KNIG A 1 A_SpawnItemEx("CrackerBlastDamager",0,0,0,2,0,0)
AWSM C 0 A_SpawnItemEx("KnightCracker", 3, 0, -5, 0, 0, -35, 0)
AWSM C 0 A_SpawnItemEx("KnightCracker", 3, 0, 5, 0, 0, 35, 0)
KNIG A 0 A_JumpIfCloser(46,"Death")
KNIG A 0 A_CustomMissile("CrackerBlastReturn",0,0,0,0)
stop
}
}

actor CrackerBlastDamager
{
PROJECTILE
+RIPPER
+DONTBLAST
damage (2)
damagetype "KnightCrush"
Obituary "%o got a severe 40-degree burn from %k's Knight CrackerBlast."
radius 10
height 10
States
{
Spawn:
TNT1 A 2
stop
}
}

actor KnightReturnerSound
{
+MISSILE
-SOLID
+NOCLIP
+NOINTERACTION
+NOGRAVITY
+DONTBLAST
+DONTREFLECT
+THRUACTORS
renderstyle none
radius 2
height 2
States
{
Spawn:
TNT1 A 0
TNT1 A 1 A_PlaySoundEx("weapon/KnightReturn","Weapon")
stop
}
}

actor KnightFlameBlast // : MaceFX1
{
PROJECTILE
Damage (10)
Height 5
Radius 6
damagetype "FlameBlast"
Obituary "$%o got roasted by %k's KnightFlameBlast."
-NOGRAVITY
Scale 2.5
speed 28
States
{
Spawn:
FLMB H 0
FLMB H 4 A_CheckFloor("Death")
Loop
XDeath:
Crash:
FLMB H 0 A_SpawnItemEx("OilPitIgnite",0,0,8)
stop
Death:
FLMB H 0 A_JumpIf(CeilingZ - FloorZ <=48 , "FireCheckOnly")
FLMB H 0 A_SpawnItemEx("OilPitIgnite",0,0,8)
FLMB H 0 A_CheckFloor("Floor")
FLMB H 0 A_JumpIf(CeilingZ-Z < 8, "Floor")
Goto Wall
Wall:
FLMB H 0 A_SpawnItemEx("KnightWallPillar",-24,0,0)
stop
Floor:
FLMB H 0 A_SpawnItemEx("KnightFlamePillar",0,0,0)
stop
FireCheckOnly:
TNT1 A 0 A_SpawnItemEx("OilPitIgnite",0,0,-16)
stop
}
}

actor KnightWallPillar
{
PROJECTILE
Scale 2.5
Height 5
damagetype "FlameBlast"
Obituary "%o got %k's KnightFlamePillar up their ass."
Speed 0
Radius 16
Damage (7)
reactiontime 15
States
{
Spawn:
FLMB I 0
FLMB H 0 A_SpawnItemEx("OilPitIgnite",0,0,0)
FLMB IJKLMNONONONONO 1 
FLMB A 0 A_CountDown
Loop
Death:
FLMB A 0 
stop
}
}

actor KnightFlamePillar
{
PROJECTILE
-MISSILE
Scale 2.5
-NOGRAVITY
+NOEXPLODEFLOOR
Height 48
damagetype "FlameBlast"
Obituary "%o got %k's KnightFlamePillar up their ass."
Speed 0
Radius 5
Damage (7)
reactiontime 15
States
{
Spawn:
FLMB H 0 
FLMB H 0 A_ChangeFlag("MISSILE",1)
FLMB H 1 A_CheckFloor("Flame")
Goto Spawn+2
Flame:
TNT1 A 0 A_SpawnItemEx("OilPitIgnite",0,0,8)
FLMB A 0 A_ChangeFlag("FLOORHUGGER",1)
FLMB A 0 A_CountDown
FLMB ABCDEFGFGFGFGFG 1 
Goto Flame+2
Death:
FLMB A 0 
stop
}
}

actor KnightCracker
{
PROJECTILE
Radius 10
Height 10
scale 2.5
damage (10)
speed 32
damagetype "FreezeCracker"
Obituary "%o froze to death by %k's ALS KnightCracker Challenge."
States
{
Spawn:
FCRA D 0
FCRA D 0 A_SpawnItemEx("FreezeFX")
FCRA E 4 
FCRA D 4 A_SpawnItemEx("FreezeCrackerFX", -8, Random(-22, 22), random(-20, 20))
Goto Spawn+2
Death:
TNT1 A 0 A_JumpIf(z-floorz<5,"Floor")
TNT1 A 0 A_JumpIf(z-ceilingz==0-10,"Ceiling")
MMFX B 0 A_SpawnItemEx("KnightBit",0,0,0,28,0,0,60)
MMFX B 0 A_SpawnItemEx("KnightBit",0,0,0,28,0,0,-60)
MMFX B 0 A_SpawnItemEx("KnightBit",0,0,0,28,0,0,120)
MMFX B 0 A_SpawnItemEx("KnightBit",0,0,0,28,0,0,-120)
MMFX B 0 A_SpawnItemEx("KnightBit",0,0,0,28,0,0,180)
MMFX B 0 A_SpawnItemEx("KnightBit",0,0,0,28,0,0,0)
TNT1 A 1 A_PlaySoundEx("weapon/freezecrackerhit","Weapon")
stop
Floor:
MRFA G 0 A_SpawnItemEx("KnightCrackerSpikeF",0,0,0,0,0,0,0,1)
stop
Ceiling:
MRFA J 0 A_SpawnItemEx("KnightCrackerSpikeC",0,0,0,0,0,0,0,1)
stop
}
}

actor KnightBit
{
PROJECTILE
+THRUACTORS
Radius 6
Height 6
scale 2.5
damage (2)
damagetype "FreezeCrackerBit"
Obituary "%o slipped on %k's KnightBit and broke their neck."
speed 28
states
{
Spawn:
FCRA I 3
FCRA I 0 A_ChangeFlag(THRUACTORS, false)
FCRA I 4
wait
}
}

actor KnightCrackerSpikeF
{
PROJECTILE
damagetype "FreezeCracker"
Obituary "%o stepped on %k's tasty icicle spike."
+DONTBLAST
+FLOORHUGGER
damage (7)
Radius 9
Height 9
speed 26
scale 2.5
states
{
Spawn:
MRFA G 0
MRFA G 4 //A_PlaySoundEx("weapon/blizzboss","Weapon")
MRFA H 4
MRFA I 78 
MRFA H 4 
MRFA G 4
stop
}
}

actor KnightCrackerSpikeC : KnightCrackerSpikeF
{
Obituary "%o got in a coma because of %k's icicle ceiling spike."
-DONTBLAST
-FLOORHUGGER
+NOGRAVITY
damage (7)
states
{
Spawn:
MRFA J 0
MRFA J 4 //A_PlaySoundEx("weapon/blizzboss","Weapon")
MRFA K 4 
MRFA L 12
MRFA L 0 A_ChangeFlag("NOGRAVITY",0)
MRFA L 1
wait
Death:
TNT1 A 0 A_PlaySoundEx("weapon/freezecrackerhit","Weapon")
TNT1 A 0 A_SpawnItemEx("KnightBit",0,0,0,28,0,0,60,1)
TNT1 A 0 A_SpawnItemEx("KnightBit",0,0,0,28,0,0,-60,1)
TNT1 A 0 A_SpawnItemEx("KnightBit",0,0,0,28,0,0,120,1)
TNT1 A 0 A_SpawnItemEx("KnightBit",0,0,0,28,0,0,-120,1)
TNT1 A 0 A_SpawnItemEx("KnightBit",0,0,0,28,0,0,180,1)
TNT1 A 0 A_SpawnItemEx("KnightBit",0,0,0,28,0,0,0,1)
TNT1 A 1
stop
}
}