
//[+]========================================================================[+]
//----------------------------|Normal Sentry|------------------------------------
//[+]========================================================================[+]
// A Sentry turret that fires normal bullets in a rapid pace, an all around sentry 
//that works well in most places, generally in wider spaces though.
//[+]========================================================================[+]
actor NormalSentryWep : Weapon
{
Weapon.AmmoUse1 100
Weapon.AmmoGive1 1000
Weapon.AmmoUse2 100
Weapon.AmmoGive2 100
Weapon.SlotNumber 2
Obituary "%o was blasted by %k."
Inventory.Pickupmessage ""
weapon.ammotype1 "Electrammo"
weapon.ammotype2 "Electrammo"
Inventory.icon "COPYVI"
+WEAPON.AMMO_OPTIONAL
+WEAPON.ALT_AMMO_OPTIONAL
+WEAPON.DONTBOB
+WEAPON.CHEATNOTWEAPON
+WEAPON.NOAUTOAIM
+WEAPON.NOAUTOFIRE
scale 2.0
States
{
Ready:
GDTB B 0 A_GunFlash
GDTB B 2 A_WeaponReady
GDTB B 0 A_Jumpifinventory("NormSentryActive",1,"Ready2")
GDTB B 3 A_WeaponReady
Goto Ready+2
Ready2:
GDTB A 2 A_WeaponReady
GDTB A 3 A_WeaponReady
Goto Ready2+1
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
MSNH A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
MSNH A 1 A_Raise
Loop
Fire:
GDTB A 0
Goto Ready+2
Altfire:  
GDTB A 0 A_Jumpifnoammo("Noammo")
GDTB A 0 A_Jumpifinventory("NormSentryActive",1,"Reclaim")
GDTB A 0 A_GiveInventory("2Soon2Switch") 
GDTB A 1 A_SpawnitemEx("SentryMarker", 120, 0, 0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
GDTB A 1 A_Refire
GDTB A 1 A_JumpIfInventory("SpawnDeny",1,"NoAmmo")
GDTB A 0 A_PlaySoundEx("weapon/waterballoon","Weapon")  
GDTB A 0 
GDTB A 0 A_SpawnItemEX("NormalSentry",120,0,0,0,0,0,0,SXF_SETMASTER)
GDTB A 0 A_GiveInventory("NormSentryActive",1)
GDTB A 10
Goto Ready+2
//------[]
Flash:
TNT1 A 0 A_JumpIfInventory("2Soon2Switch",1,2)
TNT1 A 0 A_GiveInventory("GadgetAmmo",6)
TNT1 AA 1
loop
Reclaim:
GDTB D 0
GDTB D 0 A_Jumpifinventory("NormSentryReclaim",1,2)
GDTB D 1 A_GiveInventory("NormSentryReclaim",1)
GDTB D 0
ReclaimHold:
GDTB D 1
GDTB D 0 A_Jumpifinventory("NormSentryReclaim",1,2)
GDTB D 1 A_GiveInventory("NormSentryReclaim",1)
GDTB D 0 A_Refire("ReclaimHold")
Goto Ready+2
NoAmmo:
TNT1 A 1
TNT1 A 1 //ACS_Execute(979,0)
Goto Ready+2
}
}

actor SpawnDeny : Powerup // anti-spam
{
inventory.amount 1
inventory.maxamount 1
Powerup.Duration 3
}

actor NormSentryActive : Inventory // anti-spam
{
inventory.amount 1
inventory.maxamount 1
}

actor NormSentryReclaim : Powerup // anti-spam
{
inventory.amount 1
inventory.maxamount 1
Powerup.Duration 3
}

actor SentryForget : Inventory // give up if the target isn't dying
{
inventory.amount 1
inventory.maxamount 100
}

actor NormSentryHPView : Inventory // anti-spam
{
inventory.amount 1
inventory.maxamount 800
}


actor PickupIndicator
{
+CLIENTSIDEONLY
+NOINTERACTION
-SOLID
+NOGRAVITY
Scale 5.5
States
{
Spawn:
HSNI KKK 2
stop
}
}

Actor InvasionProtection : Powerprotection
{
Damagefactor "NORMAL", 0
//Physical
damagefactor "ENormalType", 1.0
damagefactor "ENormalType2", 1.0
damagefactor "EFightingType", 1.0
damagefactor "EFightingType2", 1.0
damagefactor "EFlyingType", 1.0
damagefactor "EFlyingType2", 1.0
damagefactor "EGroundType", 1.0
damagefactor "EGroundType2", 1.0
damagefactor "ERockType", 1.0
damagefactor "ERockType2", 1.0
damagefactor "ESteelType", 1.0
damagefactor "ESteelType2", 1.0
damagefactor "EPoisonType", 1.0
damagefactor "EPoisonType2", 1.0
damagefactor "EBugType", 1.0
damagefactor "EBugType2", 1.0
damagefactor "EGhostType", 1.0
damagefactor "EGhostType2", 1.0
//Special
damagefactor "EFireType", 1.0
damagefactor "EFireType2", 1.0
damagefactor "EWaterType", 1.0
damagefactor "EWaterType2", 1.0
damagefactor "EGrassType", 1.0
damagefactor "EGrassType2", 1.0
damagefactor "EElectricType", 1.0
damagefactor "EElectricType2", 1.0
damagefactor "EIceType", 1.0
damagefactor "EIceType2", 1.0
damagefactor "EPsychicType", 1.0
damagefactor "EPsychicType2", 1.0
damagefactor "EDarkType", 1.0
damagefactor "EDarkType2", 1.0
damagefactor "EDragonType", 1.0
damagefactor "EDragonType2", 1.0
damagefactor "EFairyType", 1.0
damagefactor "EFairyType2", 1.0
//OCBM Exclusive/New
damagefactor "EBreakType", 1.0
damagefactor "ECursorType", 1.0
damagefactor "ESwordType", 1.0
damagefactor "EAirType", 1.0
damagefactor "EMagicType", 1.0
damagefactor "EHolyType", 1.0
damagefactor "EUndeadType", 1.0
damagefactor "ETopSpin", 1.0
damagefactor "EFireSpin", 1.0
damagefactor "ECurseType", 1.0
damagefactor "ECurseType2", 1.0
damagefactor "ECurseTypeC", 1.0

DamageFactor "Dynashock", 0.1
DamageFactor "Dispenser", 1
powerup.duration 0x7FFFFFFF
}



actor NormalSentry
{
+SOLID
+Shootable
+MISSILE
//+NOCLIP
+NODAMAGETHRUST
+DONTBLAST
//+STANDSTILL  //doesn't seem to do anything
+DONTBLAST
+SKYEXPLODE
+DONTSEEKINVISIBLE//
+SEEKERMISSILE
+NoTargetSwitch
+FLOORHUGGER
Damagefactor "FireType", 0
Damagefactor "ElectricType", 0
Damagefactor "SentryShot", 0
DamageFactor "Dynashock", 0.3
DamageFactor "SparkShock", 0
speed 1
scale 2.5
Radius 20
Height 70
Health 800
gravity 999
reactiontime 256
PainChance 256
states
{
Spawn:
TRET A 0
TRET A 0 A_GiveToTarget("SentryGoingup")
TRET A 1 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_DEFAULT)
TRET A 0 A_Givetotarget("NormSentryHPView",Health)
TRET A 0 ACS_ExecuteAlways(998,0,25)
TRET A 1 A_JumpIf(ACS_ExecuteWithResult(975, 1)==1,"TeamGame")
Goto Warmup
TeamGame:
TRET A 0 A_GiveInventory("InvasionProtection",1) 
Warmup:
TRET A 0 A_Changevelocity(0,0,0,CVF_REPLACE)
TRET A 1 A_jumpifinventory("WeaponCharge",90,"See")
TRET A 0 A_PlaySoundEx("weapon/heat1", "Weapon")
TRET A 0 A_GiveInventory("WeaponCharge",1) 
TRET A 1 A_jumpifinventory("WeaponCharge",90,"Ready")
loop
Ready:
TRET A 1 ACS_ExecuteAlways(998,0,0)
TRET A 1  A_PlaySoundEx("misc/gravitywarn","Weapon")
Goto See
See:
TRET A 0
TRET A 0 A_Jumpifintargetinventory("NormSentryReclaim",1,"Checkreturn")
TRET A 0 A_Takeinventory("CutterFlag",1)
TRET A 0 A_SeekerMissile(0,0,SMF_LOOK,256,10)
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
TRET A 1 A_JumpIfTargetInLOS ("Spotted",0,JLOSF_PROJECTILE,1000)
TRET A 0 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_NULL)
TRET A 0 A_CheckFlag("NOGRAVITY", "Terminate", AAPTR_MASTER)
//---Health Check---
TRET A 0 A_Takefromtarget("NormSentryHPView",9999)
TRET A 0 A_Givetotarget("NormSentryHPView",Health)
goto See
Spotted:
TRET AAA 3 A_PlaySoundEx("weapon/flashstopper","Weapon")
TRET A 1 
Missile:
TRET A 0 
//---Health Check---
TRET A 0 A_Takefromtarget("NormSentryHPView",9999)
TRET A 0 A_Givetotarget("NormSentryHPView",Health)
//---
TRET A 0 A_Jumpifintargetinventory("NormSentryReclaim",1,"Checkreturn")
TRET A 0 A_jumpifinventory("CutterFlag",30,"Stall")
TRET A 0 //A_RearrangePointers(AAPTR_DEFAULT, AAPTR_DEFAULT, AAPTR_NULL)
TRET A 0 A_SeekerMissile(90,90)
TRET A 0 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
TRET A 0 A_PlaySoundEx("weapon/mbuster","weapon")
TRET A 0 A_SpawnItemEx("NormalSentryBullet",30,0,40,cos(-pitch)*64,0,sin(-pitch)*64,0,SXF_TRANSFERPOINTERS)
TRET AAAAAAAAAA 1 A_Jumpifintargetinventory("NormSentryReclaim",1,"Checkreturn")
TRET A 0 A_GiveInventory("CutterFlag",1)  
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )//JLOSF_PROJECTILE
TRET A 0 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_NULL)
TRET A 0 A_CheckFlag("NOGRAVITY", "Terminate", AAPTR_MASTER)
Goto See 
Stall:
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
TRET A 0 A_GiveInventory("SentryStalling",1) 
TRET A 0 A_PlaySoundEx("weapon/gemini","Voice")
TRET A 0 A_Takeinventory("CutterFlag",10)
TRET AAAAAAAAAAAAAAAAAAAAAAAAA 1 A_Jumpifintargetinventory("NormSentryReclaim",1,"Checkreturn")
TRET A 0 A_jumpifinventory("CutterFlag",1,"Stall")
TRET A 0 A_Takeinventory("SentryStalling",9)
Goto See
Pain.Dispenser:
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
//---Health Check---
TRET A 0 A_Takefromtarget("RemoteSentryHPView",9999)
TRET A 0 A_Givetotarget("RemoteSentryHPView",Health)
TRET A 0 HealThing(10)
//---
TRET A 0 A_jumpifinventory("SentryStalling",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )
TRET A 1 A_jumpifinventory("WeaponCharge",130,"See")
Goto Warmup
Pain.DynaShock:
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
//---Health Check---
TRET A 0 A_Takefromtarget("NormSentryHPView",9999)
TRET A 0 A_Givetotarget("NormSentryHPView",Health)
TRET A 0 HealThing(50)
//---
TRET A 0 A_jumpifinventory("SentryStalling",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )
TRET A 1 A_jumpifinventory("WeaponCharge",130,"See")
Goto Warmup
Pain:
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
//---Health Check---
TRET A 0 A_Takefromtarget("NormSentryHPView",9999)
TRET A 0 A_Givetotarget("NormSentryHPView",Health)
//---
TNT1 A 0 A_PlaySoundEx("misc/mm4pain", "Voice")
TRET A 0 A_SeekerMissile(90,90)
TRET A 0 A_jumpifinventory("SentryStalling",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )
TRET A 1 A_jumpifinventory("WeaponCharge",130,"See")
Goto Warmup
Checkreturn:
TRET A 1 A_JumpIfTargetInLOS("Recall",30,JLOSF_TARGETLOS,200)
TRET A 0 A_SpawnItemEX("PickupIndicator",0,0,40,0,0,0,0)
TRET A 0 A_jumpifinventory("SentryStalling",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )
Goto See
Recall:
TNT1 A 0 A_Changeflag("SHOOTABLE",0)
TFOG A 1 A_Takefromtarget("NormSentryActive",9)
TNT1 A 0 A_Takefromtarget("NormSentryHPView",9999)
TNT1 A 0 A_GiveToTarget("Movingthis")
TFOG BC 2
Stop
Death:
TNT1 A 0 A_Takefromtarget("NormSentryHPView",9999)
TNT1 A 0 A_PlaySoundEx("weapon/napalm", "Weapon")
TNT1 A 1 A_SpawnItemEx("TopExplosion")
TNT1 A 0 A_Takefromtarget("NormSentryActive",9)
TNT1 A 0 A_GiveToTarget("SentryDown")
stop
Terminate:
TNT1 A 0
stop
}
}


actor NormalSentryBullet
{
Obituary "$OB_TREBLESENTRY"
PROJECTILE
+DONTBLAST
+NODAMAGETHRUST
+BLOODSPLATTER
+NOTargetSwitch
+SEEKERMISSILE
Speed 60
Damage (35)
scale 2.5
Height 10
Radius 10
Damagetype "SentryShot"
States
{
Spawn:
CRBM A 1
CRBM A 1 A_SeekerMissile(90,90)
CRBM A 1 A_SeekerMissile(90,90)
CRBM A 1 A_SeekerMissile(90,90)
Spawn2:
CRBM A 1
loop
Death:
TNT1 A 0 A_Explode(10,50,0)
Stop
}
}

//[+]========================================================================[+]
//----------------------------|Fire Sentry|------------------------------------
//[+]========================================================================[+]
// shorter ranged and possessing a longer cooldown, but this sentry can roast 
//enemies in an instant! great for smaller spaces 
//[+]========================================================================[+]
actor FireSentryWep : Weapon
{
Weapon.AmmoUse1 100
Weapon.AmmoGive1 1000
Weapon.AmmoUse2 100
Weapon.AmmoGive2 100
Weapon.SlotNumber 2
Obituary "%o was blasted by %k."
Inventory.Pickupmessage ""
weapon.ammotype1 "Electrammo"
weapon.ammotype2 "Electrammo"
Inventory.icon "BURNRI"
+WEAPON.AMMO_OPTIONAL
+WEAPON.ALT_AMMO_OPTIONAL
+WEAPON.DONTBOB
+WEAPON.CHEATNOTWEAPON
+WEAPON.NOAUTOAIM
+WEAPON.NOAUTOFIRE
scale 2.0
States
{
Ready:
GDTB B 0 A_GunFlash
GDTB B 2 A_WeaponReady
GDTB B 0 A_Jumpifinventory("FireSentryActive",1,"Ready2")
GDTB B 3 A_WeaponReady
Goto Ready+2
Ready2:
GDTB A 2 A_WeaponReady
GDTB A 3 A_WeaponReady
Goto Ready2+1
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
MSNH A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
MSNH A 1 A_Raise
Loop
Fire:
GDTB A 0
Goto Ready+2
Altfire:  
GDTB A 0 A_Jumpifnoammo("Noammo")
GDTB A 0 A_Jumpifinventory("FireSentryActive",1,"Reclaim")
GDTB A 0 A_GiveInventory("2Soon2Switch") 
GDTB A 1 A_SpawnitemEx("SentryMarker", 120, 0, 0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
GDTB A 1 A_Refire
GDTB A 1 A_JumpIfInventory("SpawnDeny",1,"NoAmmo")
GDTB A 0 A_PlaySoundEx("weapon/waterballoon","Weapon")  
GDTB A 0 
GDTB A 0 A_SpawnItemEX("FireSentry",120,0,0,0,0,0,0,SXF_SETMASTER)
GDTB A 0 A_GiveInventory("FireSentryActive",1)
GDTB A 10
Goto Ready+2
//------[]
Flash:
TNT1 A 0 A_JumpIfInventory("2Soon2Switch",1,2)
TNT1 A 0 A_GiveInventory("GadgetAmmo",6)
TNT1 AA 1
loop
Reclaim:
GDTB D 0
GDTB D 0 A_Jumpifinventory("FireSentryReclaim",1,2)
GDTB D 1 A_GiveInventory("FireSentryReclaim",1)
GDTB D 0
ReclaimHold:
GDTB D 1
GDTB D 0 A_Jumpifinventory("FireSentryReclaim",1,2)
GDTB D 1 A_GiveInventory("FireSentryReclaim",1)
GDTB D 0 A_Refire("ReclaimHold")
Goto Ready+2
NoAmmo:
TNT1 A 1
TNT1 A 1 //ACS_Execute(979,0)
Goto Ready+2
}
}

actor FireSentryActive : Inventory // anti-spam
{
inventory.amount 1
inventory.maxamount 1
}

actor FireSentryReclaim : Powerup // anti-spam
{
inventory.amount 1
inventory.maxamount 1
Powerup.Duration 3
}

actor FireSentryHPView : Inventory // anti-spam
{
inventory.amount 1
inventory.maxamount 800
}


//--======--
actor FireSentry
{
+SOLID
+Shootable
+MISSILE
//+NOCLIP
+NODAMAGETHRUST
+DONTBLAST
//+STANDSTILL  //doesn't seem to do anything
+DONTBLAST
+SKYEXPLODE
+DONTSEEKINVISIBLE//
+SEEKERMISSILE
+NOTargetSwitch
+FLOORHUGGER
Damagefactor "FireType", 0
Damagefactor "ElectricType", 0
Damagefactor "SentryShot", 0
DamageFactor "Dynashock", 0.3
DamageFactor "SparkShock", 0
//--
damagefactor "HardKnuckle", 2
damagefactor "BreakType", 2
damagefactor "BreakType2", 2
damagefactor "BreakType3", 2
damagefactor "BreakType4", 2
damagefactor "BreakTypeX", 2
damagefactor "EBreakType", 2
damagefactor "EBreakType2", 2
//==
speed 1
scale 2.5
Radius 20
Height 70
Health 800
gravity 999
reactiontime 256
PainChance 256
states
{
Spawn:
TRET A 0
TRET A 0 A_GiveToTarget("SentryGoingup")
TRET A 1 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_DEFAULT)
TNT1 A 0 A_Givetotarget("FireSentryHPView",Health)
TRET A 0 ACS_ExecuteAlways(998,0,25)
TRET A 1 A_JumpIf(ACS_ExecuteWithResult(975, 1)==1,"TeamGame")
Goto Warmup
TeamGame:
TRET A 0 A_GiveInventory("InvasionProtection",1) 
Warmup:
TRET A 1 A_jumpifinventory("WeaponCharge",35,"See")
TRET A 0 A_PlaySoundEx("weapon/heat1", "Weapon")
TRET A 0 A_GiveInventory("WeaponCharge",1) 
TRET A 1 A_jumpifinventory("WeaponCharge",35,"Ready")
loop
Ready:
TRET A 1 ACS_ExecuteAlways(998,0,21)
TRET A 1  A_PlaySoundEx("misc/gravitywarn","Weapon")
Goto See
See:
TRET A 0
TRET A 0 A_Jumpifintargetinventory("FireSentryReclaim",1,"Checkreturn")
TRET A 0 A_Takeinventory("CutterFlag",1)
TRET A 0 A_SeekerMissile(0,0,SMF_LOOK,256,10)
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
TRET A 1 A_JumpIfTargetInLOS ("Spotted",0,JLOSF_PROJECTILE,200)
TRET A 0 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_NULL)
TRET A 0 A_CheckFlag("NOGRAVITY", "Terminate", AAPTR_MASTER)
//---Health Check---
TRET A 0 A_Takefromtarget("FireSentryHPView",9999)
TRET A 0 A_Givetotarget("FireSentryHPView",Health)
goto See
Spotted:
TRET AAA 3 A_PlaySoundEx("weapon/flashstopper","Weapon")
TRET A 1 
Missile:
TRET A 0 
//---Health Check---
TRET A 0 A_Takefromtarget("FireSentryHPView",9999)
TRET A 0 A_Givetotarget("FireSentryHPView",Health)
//---
TRET A 0 A_Jumpifintargetinventory("FireSentryReclaim",1,"Checkreturn")
TRET A 0 A_jumpifinventory("CutterFlag",30,"Stall")
TRET A 0 //A_RearrangePointers(AAPTR_DEFAULT, AAPTR_DEFAULT, AAPTR_NULL)
TRET A 0 A_SeekerMissile(90,90)
TRET A 0 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
TRET A 0 A_PlaySoundEx("weapon/waveburner","weapon")
TRET A 0 A_SpawnItemEx("SentryFire",30,0,40,cos(-pitch)*64,0,sin(-pitch)*64,0,SXF_TRANSFERPOINTERS)
TRET AAAAAAAA 1 A_Jumpifintargetinventory("FireSentryReclaim",1,"Checkreturn")
TRET A 0 A_GiveInventory("CutterFlag",1)  
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,200  )//JLOSF_PROJECTILE
TRET A 0 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_NULL)
TRET A 0 A_CheckFlag("NOGRAVITY", "Terminate", AAPTR_MASTER)
Goto See 
Stall:
TRET A 0 A_PlaySoundEx("weapon/gemini","Voice")
TRET A 0 A_Takeinventory("CutterFlag",10)
TRET AAAAAAAAAAAAAAAAAAAAAAAAA 1 A_Jumpifintargetinventory("FireSentryReclaim",1,"Checkreturn")
TRET A 0 A_jumpifinventory("CutterFlag",1,"Stall")
Goto See
Pain.DynaShock:
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
//---Health Check---
TRET A 0 A_Takefromtarget("FireSentryHPView",9999)
TRET A 0 A_Givetotarget("FireSentryHPView",Health)
TRET A 0 HealThing(50)
//---
TRET A 0 A_jumpifinventory("CutterFlag",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )
TRET A 1 A_jumpifinventory("WeaponCharge",130,"See")
Goto Warmup
Pain:
//---Health Check---
TRET A 0 A_Takefromtarget("FireSentryHPView",9999)
TRET A 0 A_Givetotarget("FireSentryHPView",Health)
//---
TNT1 A 0 A_PlaySoundEx("misc/mm4pain", "Voice")
TRET A 0 A_SeekerMissile(90,90)
TRET A 0 A_jumpifinventory("CutterFlag",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,200  )
TRET A 1 A_jumpifinventory("WeaponCharge",130,"See")
Goto Warmup
Checkreturn:
TRET A 1 A_JumpIfTargetInLOS("Recall",30,JLOSF_TARGETLOS,200)
TRET A 0 //A_jumpifinventory("CutterFlag",1,"Stall")
TRET A 0 //A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )
Goto See
Recall:
TFOG A 1 A_Takefromtarget("FireSentryActive",9)
TNT1 A 0 A_Takefromtarget("FireSentryHPView",9999)
TNT1 A 0 A_GiveToTarget("Movingthis")
TFOG BC 2
Stop
Death:
TNT1 A 0 A_Takefromtarget("FireSentryHPView",9999)
TNT1 A 0 A_PlaySoundEx("weapon/napalm", "Weapon")
TNT1 A 1 A_SpawnItemEx("TopExplosion")
TNT1 A 0 A_Takefromtarget("FireSentryActive",9)
TNT1 A 0 A_GiveToTarget("SentryDown")
stop
Terminate:
TNT1 A 0
stop
}
}


actor SentryFire : FastProjectile
{
PROJECTILE
//+NOINTERACTION
+RIPPER
//+NOCLIP
+BLOODSPLATTER
-THRUGHOST
+NOBLOCKMAP
+DONTBLAST
+DONTREFLECT
Radius 8
Height 24
damage (5)
damagetype "Firetype"
RenderStyle "Add"
speed 64
scale 2.0
States
{
Spawn:
TNT1 A 0
TNT1 A 1 A_SeekerMissile(90,90)
TNT1 AAAAA 0 A_SpawnItemEx("HeatSprayFx",random(-15,15),random(-15,15),random(-15,15),momx/8,momy/8,momz/8,0,SXF_ABSOLUTEMOMENTUM|SXF_NOCHECKPOSITION) 
TNT1 A 0 A_SpawnItemEx("Sentryfire2",0,0,0,momx,momy,momz,0,SXF_ABSOLUTEMOMENTUM|SXF_NOCHECKPOSITION)
TNT1 A 0 A_Stop
TNT1 A 1 A_Changeflag("NOINTERACTION",1)//A_Explode(25,30,0,0,0) 
//HEAT AAAA 1 A_FadeOut(0.1)
stop
XDeath:
Crash:
HEAT A 1 //A_TakeFromTarget("MasamunePower",10)
stop
Death:
stop
}
}

actor SentryFire2 : FastProjectile
{
PROJECTILE
//+NOINTERACTION
+RIPPER
+NOBLOCKMAP
+BLOODSPLATTER
-THRUGHOST
+DONTBLAST
+DONTREFLECT
Radius 12
Height 24
damage (10)
damagetype "Firetype"
RenderStyle "Add"
speed 96
scale 2.0
States
{
Spawn:
TNT1 C 0
TNT1 A 0 A_SpawnItemEx("SentryFire3",0,0,0,momx,momy,momz,0,SXF_ABSOLUTEMOMENTUM|SXF_NOCHECKPOSITION) 
TNT1 C 0 A_Stop
TNT1 C 1 A_Changeflag("NOINTERACTION",1)//A_Explode(10,64,0,0,0)
//HEAT CCCC 1 A_FadeOut(0.1)
stop
XDeath:
Crash:
TNT1 A 1 //A_TakeFromTarget("MasamunePower",10)
stop
Death:
stop
}
}

actor SentryFire3 : FastProjectile
{
PROJECTILE
//+NOINTERACTION
+RIPPER
+NOBLOCKMAP
+BLOODSPLATTER
-THRUGHOST
+DONTBLAST
+DONTREFLECT
Radius 24
Height 24
damage (20)
damagetype "Firetype"
RenderStyle "Add"
speed 135
scale 2.0
States
{
Spawn:
TNT1 F 0 
TNT1 F 0 A_Stop
TNT1 F 1 A_Changeflag("NOINTERACTION",1)//A_Explode(10,110,0,0,0) 
//HEAT FFFF 1 A_FadeOut(0.1)
stop
XDeath:
Crash:
TNT1 A 1 //A_TakeFromTarget("MasamunePower",10)
stop
Death:
stop
}
}

actor HeatSprayFx  //flames 
{
PROJECTILE
+NOINTERACTION
+NOGRAVITY
height 2
Radius 2
damage (0)
reactiontime 1
scale 2
RenderStyle "ADD"
Alpha 0.2
States
{
Spawn:
BRNF A 0 Thrustthingz(0,30,0,0)
BRNF ABCDEFGH 1 A_Fadein(0.1)
BRNF C 0 
stop
}
}
//[+]========================================================================[+]
//----------------------------|Beam Sentry|------------------------------------
//[+]========================================================================[+]
// this sniper of a sentry is great for anti-air, it can see from real far away 
//and can zap foes with a nasty, electric type hitscan beam. it has a very long stall time however.
//[+]========================================================================[+]
actor BeamSentryWep : Weapon
{
Weapon.AmmoUse1 100
Weapon.AmmoGive1 1000
Weapon.AmmoUse2 100
Weapon.AmmoGive2 100
Weapon.SlotNumber 2
Obituary "%o was blasted by %k."
Inventory.Pickupmessage ""
weapon.ammotype1 "Electrammo"
weapon.ammotype2 "Electrammo"
Inventory.icon "LASERSI"
+WEAPON.AMMO_OPTIONAL
+WEAPON.ALT_AMMO_OPTIONAL
+WEAPON.DONTBOB
+WEAPON.CHEATNOTWEAPON
+WEAPON.NOAUTOAIM
+WEAPON.NOAUTOFire
scale 2.0
States
{
Ready:
GDTB B 0 A_GunFlash
GDTB B 2 A_WeaponReady
GDTB B 0 A_Jumpifinventory("BeamSentryActive",1,"Ready2")
GDTB B 3 A_WeaponReady
Goto Ready+2
Ready2:
GDTB A 2 A_WeaponReady
GDTB A 3 A_WeaponReady
Goto Ready2+1
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
MSNH A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
MSNH A 1 A_Raise
Loop
Fire:
GDTB A 0
Goto Ready+2
AltFire:  
GDTB A 0 A_Jumpifnoammo("Noammo")
GDTB A 0 A_Jumpifinventory("BeamSentryActive",1,"Reclaim")
GDTB A 0 A_GiveInventory("2Soon2Switch") 
GDTB A 1 A_SpawnitemEx("SentryMarker", 120, 0, 0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
GDTB A 1 A_ReFire
GDTB A 1 A_JumpIfInventory("SpawnDeny",1,"NoAmmo")
GDTB A 0 A_PlaySoundEx("weapon/waterballoon","Weapon")  
GDTB A 0 
GDTB A 0 A_SpawnItemEX("BeamSentry",120,0,0,0,0,0,0,SXF_SETMASTER)
GDTB A 0 A_GiveInventory("BeamSentryActive",1)
GDTB A 10
Goto Ready+2
//------[]
Flash:
TNT1 A 0 A_JumpIfInventory("2Soon2Switch",1,2)
TNT1 A 0 A_GiveInventory("GadgetAmmo",6)
TNT1 AA 1
loop
Reclaim:
GDTB D 0
GDTB D 0 A_Jumpifinventory("BeamSentryReclaim",1,2)
GDTB D 1 A_GiveInventory("BeamSentryReclaim",1)
GDTB D 0
ReclaimHold:
GDTB D 1
GDTB D 0 A_Jumpifinventory("BeamSentryReclaim",1,2)
GDTB D 1 A_GiveInventory("BeamSentryReclaim",1)
GDTB D 0 A_ReFire("ReclaimHold")
Goto Ready+2
NoAmmo:
GDTB A 1
GDTB A 1 //ACS_Execute(979,0)
Goto Ready+2
}
}

actor BeamSentryActive : Inventory // anti-spam
{
inventory.amount 1
inventory.maxamount 1
}

actor BeamSentryReclaim : Powerup // anti-spam
{
inventory.amount 1
inventory.maxamount 1
Powerup.Duration 3
}


actor BeamSentryHPView : Inventory // anti-spam
{
inventory.amount 1
inventory.maxamount 800
}


actor BeamSentry
{
+SOLID
+Shootable
+MISSILE
//+NOCLIP
+NODAMAGETHRUST
+DONTBLAST
//+STANDSTILL  //doesn't seem to do anything
+DONTBLAST
+SKYEXPLODE
+DONTSEEKINVISIBLE//
+SEEKERMISSILE
+NOTargetSwitch
+FLOORHUGGER
Damagefactor "FireType", 0
Damagefactor "ElectricType", 0
Damagefactor "SentryShot", 0
DamageFactor "Dynashock", 0.3
DamageFactor "SparkShock", 0
speed 1
scale 2.5
Radius 20
Height 70
Health 800
gravity 999
reactiontime 256
PainChance 256
states
{
Spawn:
TRET A 0
TRET A 0 A_GiveToTarget("SentryGoingup")
TRET A 1 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_DEFAULT)
TNT1 A 0 A_Givetotarget("BeamSentryHPView",Health)
TRET A 0 ACS_ExecuteAlways(998,0,25)
TRET A 1 A_JumpIf(ACS_ExecuteWithResult(975, 1)==1,"TeamGame")
Goto Warmup
TeamGame:
TRET A 0 A_GiveInventory("InvasionProtection",1) 
Warmup:
TRET A 1 A_jumpifinventory("WeaponCharge",130,"See")
TRET A 0 A_PlaySoundEx("weapon/heat1", "Weapon")
TRET A 0 A_GiveInventory("WeaponCharge",1) 
TRET A 1 A_jumpifinventory("WeaponCharge",130,"Ready")
loop
Ready:
TRET A 1 ACS_ExecuteAlways(998,0,16)
TRET A 1  A_PlaySoundEx("misc/gravitywarn","Weapon")
Goto See
See:
TRET A 0
TRET A 0 A_Jumpifintargetinventory("BeamSentryReclaim",1,"Checkreturn")
TRET A 0 A_Takeinventory("CutterFlag",1)
TRET A 0 A_SeekerMissile(0,0,SMF_LOOK,256,10)
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
TRET A 1 A_JumpIfTargetInLOS ("Spotted",0,JLOSF_PROJECTILE,1000)
TRET A 0 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_NULL)
TRET A 0 A_CheckFlag("NOGRAVITY", "Terminate", AAPTR_MASTER)
//---Health Check---
TRET A 0 A_Takefromtarget("BeamSentryHPView",9999)
TRET A 0 A_Givetotarget("BeamSentryHPView",Health)
goto See
Spotted:
TRET AAA 3 A_PlaySoundEx("weapon/flashstopper","Weapon")
TRET A 1 
Missile:
TRET A 0 
//---Health Check---
TRET A 0 A_Takefromtarget("BeamSentryHPView",9999)
TRET A 0 A_Givetotarget("BeamSentryHPView",Health)
//---
TRET A 0 A_Jumpifintargetinventory("BeamSentryReclaim",1,"Checkreturn")
TRET A 0 A_jumpifinventory("CutterFlag",30,"Stall")
TRET A 0 //A_RearrangePointers(AAPTR_DEFAULT, AAPTR_DEFAULT, AAPTR_NULL)
TRET A 0 A_SeekerMissile(90,90)
TRET A 0 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
TRET A 0 A_PlaySoundEx("weapon/lshot","weapon")
TRET A 0 A_SpawnItemEx("SentryBeam",30,0,40,cos(-pitch)*64,0,sin(-pitch)*64,0,SXF_TRANSFERPOINTERS)
TRET AA 1 A_Jumpifintargetinventory("BeamSentryReclaim",1,"Checkreturn")
TRET A 0 A_GiveInventory("CutterFlag",1)  
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )//JLOSF_PROJECTILE
TRET A 0 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_NULL)
TRET A 0 A_CheckFlag("NOGRAVITY", "Terminate", AAPTR_MASTER)
Goto See 
Stall:
TRET A 0 A_PlaySoundEx("weapon/gemini","Voice")
TRET A 0 A_Takeinventory("CutterFlag",10)
TRET AAAAAAAAAAAAAAAAAAAAAAAAA 1 A_Jumpifintargetinventory("BeamSentryReclaim",1,"Checkreturn")
TRET A 0 A_jumpifinventory("CutterFlag",1,"Stall")
Goto See
Pain.DynaShock:
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
//---Health Check---
TRET A 0 A_Takefromtarget("BeamSentryHPView",9999)
TRET A 0 A_Givetotarget("BeamSentryHPView",Health)
TRET A 0 HealThing(50)
//---
TRET A 0 A_jumpifinventory("CutterFlag",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )
TRET A 1 A_jumpifinventory("WeaponCharge",130,"See")
Goto Warmup
Pain:
//---Health Check---
TRET A 0 A_Takefromtarget("BeamSentryHPView",9999)
TRET A 0 A_Givetotarget("BeamSentryHPView",Health)
//---
TNT1 A 0 A_PlaySoundEx("misc/mm4pain", "Voice")
TRET A 0 A_SeekerMissile(90,90)
TRET A 0 A_jumpifinventory("CutterFlag",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )
TRET A 1 A_jumpifinventory("WeaponCharge",130,"See")
Goto Warmup
Checkreturn:
TRET A 1 A_JumpIfTargetInLOS("Recall",30,JLOSF_TARGETLOS,1000)
TRET A 0 //A_jumpifinventory("CutterFlag",1,"Stall")
TRET A 0 //A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )
Goto See
Recall:
TFOG A 1 A_Takefromtarget("BeamSentryActive",9)
TNT1 A 0 A_Takefromtarget("BeamSentryHPView",9999)
TNT1 A 0 A_GiveToTarget("Movingthis")
TFOG BC 2
Stop
Death:
TNT1 A 0 A_Takefromtarget("BeamSentryHPView",9999)
TNT1 A 0 A_PlaySoundEx("weapon/napalm", "Weapon")
TNT1 A 1 A_SpawnItemEx("TopExplosion")
TNT1 A 0 A_Takefromtarget("BeamSentryActive",9)
TNT1 A 0 A_GiveToTarget("SentryDown")
stop
Terminate:
TNT1 A 0
stop
}
}

actor SentryBeam : FastProjectile
{
PROJECTILE
+BLOODSPLATTER
+DONTBLAST
+NOBLOOD
//+SEEKERMISSILE
//+Ripper
radius 8
height 8
Speed 5
Damage (10)
damagetype "ElectricType"
scale 1.5
Obituary "%o failed to evade %k's beamspin!"
Reactiontime 14
States
{
Spawn:
GEMI A 0  
GEMI A 1 A_SeekerMissile(90,90)
GEMI A 0  A_SpawnItemEx("SentryBeam2",0,0,0,momx,momy,momz,0,SXF_ABSOLUTEMOMENTUM|SXF_NOCHECKPOSITION) //A_custommissile("FreezeRayShot2",0,0,0, 2,-pitch)
GEMI A 1 A_Changeflag("NOINTERACTION",1)
GEMI AAAA 2  A_Fadeout(0.3)
Stop
}
}

actor SentryBeam2 : FastProjectile
{
PROJECTILE
+BLOODSPLATTER
+DONTBLAST
+NOBLOOD
//+Ripper
radius 8
height 8
Speed 5
Damage (10)
damagetype "ElectricType"
scale 1.5
Obituary "%o failed to evade %k's beamspin!"
Reactiontime 14
States
{
Spawn:
GEMI A 1  
GEMI A 0  A_SpawnItemEx("SentryBeam2",0,0,0,momx,momy,momz,0,SXF_ABSOLUTEMOMENTUM|SXF_NOCHECKPOSITION) //A_custommissile("FreezeRayShot2",0,0,0, 2,-pitch)
GEMI A 1 A_Changeflag("NOINTERACTION",1)
GEMI AAAA 2  A_Fadeout(0.3)
Stop
}
}

actor SpinLazer : FastProjectile
{
PROJECTILE
+BLOODSPLATTER
+DONTBLAST
+NOBLOOD
//+Ripper
radius 8
height 8
Speed 15
Damage (30)
damagetype "ElectricType"
scale 1.5
Obituary "%o failed to evade %k's beamspin!"
Reactiontime 14
States
{
Spawn:
GEMI A 1  
GEMI A 0  A_SpawnItemEx("SpinLazer",0,0,0,momx,momy,momz,0,SXF_ABSOLUTEMOMENTUM|SXF_NOCHECKPOSITION) //A_custommissile("FreezeRayShot2",0,0,0, 2,-pitch)
GEMI A 1 A_Changeflag("NOINTERACTION",1)
GEMI AAAA 2  A_Fadeout(0.3)
Stop
}
}


//[+]========================================================================[+]
//----------------------------|Remote Sentry|------------------------------------
//[+]========================================================================[+]
// unlike other Sentries, this one won't fire on it's own unless you are a good 
//distance from it, when you are near, it becomes remote controlled by you so long as the weapon is equipped.
//[+]========================================================================[+]
actor RemoteSentryWep : Weapon
{
Weapon.AmmoUse1 100
Weapon.AmmoGive1 1000
Weapon.AmmoUse2 100
Weapon.AmmoGive2 100
Weapon.SlotNumber 5
Obituary "%o was blasted by %k."
Inventory.Pickupmessage ""
weapon.ammotype1 "Electrammo"
weapon.ammotype2 "Electrammo"
Inventory.icon "REMOI"
+WEAPON.AMMO_OPTIONAL
+WEAPON.ALT_AMMO_OPTIONAL
+WEAPON.DONTBOB
+WEAPON.CHEATNOTWEAPON
+WEAPON.NOAUTOAIM
+WEAPON.NOAUTOFIRE
scale 2.0
States
{
Ready:
GDTB B 0 A_GunFlash
GDTB B 2 A_WeaponReady
GDTB B 0 A_Jumpifinventory("RemoteSentryActive",1,"Ready2")
GDTB B 3 A_WeaponReady
Goto Ready+2
Ready2:
GDTB E 2 A_WeaponReady
GDTB E 3 A_WeaponReady
Goto Ready2+1
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
MSNH A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
MSNH A 1 A_Raise
Loop
Fire:
GDTB E 0 A_GiveInventory("RCSShoot")
GDTB E 1
GDTB E 0 A_Refire
GDTB E 0 A_TakeInventory("RCSShoot")
GDTB E 0
Goto Ready+2
Altfire:  
GDTB A 0 A_Jumpifinventory("RemoteSentryActive",1,"Reclaim")
GDTB A 0 A_GiveInventory("2Soon2Switch") 
GDTB A 1 A_SpawnitemEx("SentryMarker", 120, 0, 0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
GDTB A 1 A_Refire
GDTB A 0 A_PlaySoundEx("weapon/waterballoon","Weapon")  
GDTB A 0 
GDTB A 0 A_SpawnItemEX("RemoteSentry",120,0,0,0,0,0,0,SXF_SETMASTER)
GDTB A 0 A_GiveInventory("RemoteSentryActive",1)
GDTB A 10
Goto Ready+2
//------[]
Flash:
TNT1 A 0 A_JumpIfInventory("2Soon2Switch",1,2)
TNT1 A 0 A_GiveInventory("RCSInControl")
TNT1 AA 1
loop
Reclaim:
GDTB D 0
GDTB D 0 A_Jumpifinventory("RemoteSentryReclaim",1,2)
GDTB D 1 A_GiveInventory("RemoteSentryReclaim",1)
GDTB D 0
ReclaimHold:
GDTB D 1
GDTB D 0 A_Jumpifinventory("RemoteSentryReclaim",1,2)
GDTB D 1 A_GiveInventory("RemoteSentryReclaim",1)
GDTB D 0 A_Refire("ReclaimHold")
Goto Ready+2
NoAmmo:
GDTB A 1
GDTB A 1 //ACS_Execute(979,0)
Goto Ready+2
}
}

//===






actor BuddySentry
{
+SOLID
+Shootable
+MISSILE
//+NOCLIP
+NODAMAGETHRUST
+DONTBLAST
//+STANDSTILL  //doesn't seem to do anything
+DONTBLAST
+SKYEXPLODE
+DONTSEEKINVISIBLE//
+SEEKERMISSILE
+NoTargetSwitch
+FLOORHUGGER
Damagefactor "FireType", 0
Damagefactor "ElectricType", 0
Damagefactor "SentryShot", 0
DamageFactor "Dynashock", 0.3
DamageFactor "SparkShock", 0
speed 1
scale 1
Radius 20
Height 20
Health 400
gravity 999
reactiontime 256
PainChance 256
states
{
Spawn:
TRET A 0
TRET A 0 A_GiveToTarget("SentryGoingup")
TRET A 1 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_DEFAULT)
TRET A 0 A_Givetotarget("BuddySentryHPView",Health)
TRET A 0 ACS_ExecuteAlways(998,0,25)
TRET A 1 A_JumpIf(ACS_ExecuteWithResult(975, 1)==1,"TeamGame")
Goto Warmup
TeamGame:
TRET A 0 A_GiveInventory("InvasionProtection",1) 
Warmup:
TRET A 0 A_Changevelocity(0,0,0,CVF_REPLACE)
TRET A 1 A_jumpifinventory("WeaponCharge",35,"Ready")
TRET A 0 A_PlaySoundEx("weapon/heat1", "Weapon")
TRET A 0 A_GiveInventory("WeaponCharge",1) 
TRET A 1 A_jumpifinventory("WeaponCharge",35,"Ready")
loop
Ready:
TRET A 1 ACS_ExecuteAlways(998,0,0)
TRET A 1 A_jumpifinventory("WeaponCharge",35,"See")
TRET A 1  A_PlaySoundEx("misc/gravitywarn","Weapon")
TRET A 0 A_GiveInventory("WeaponCharge",1) 
Goto See
See:
TRET A 0
TRET A 0 A_Jumpifintargetinventory("BuddySentryReclaim",1,"Checkreturn")
TRET A 0 A_Takeinventory("CutterFlag",1)
TRET A 0 A_SeekerMissile(0,0,SMF_LOOK,256,5)
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
TRET A 1 A_JumpIfTargetInLOS ("Spotted",0,JLOSF_PROJECTILE,500)
TRET A 0 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_NULL)
TRET A 0 A_CheckFlag("NOGRAVITY", "Terminate", AAPTR_MASTER)
//---Health Check---
TRET A 0 A_Takefromtarget("BuddySentryHPView",9999)
TRET A 0 A_Givetotarget("BuddySentryHPView",Health)
goto See
Spotted:
TRET AAA 3 A_PlaySoundEx("weapon/flashstopper","Weapon")
TRET A 1 
Missile:
TRET A 0 
//---Health Check---
TRET A 0 A_Takefromtarget("BuddySentryHPView",9999)
TRET A 0 A_Givetotarget("BuddySentryHPView",Health)
//---
TRET A 0 A_Jumpifintargetinventory("BuddySentryReclaim",1,"Checkreturn")
TRET A 0 A_jumpifinventory("CutterFlag",30,"Stall")
TRET A 0 //A_RearrangePointers(AAPTR_DEFAULT, AAPTR_DEFAULT, AAPTR_NULL)
TRET A 0 A_SeekerMissile(90,90)
TRET A 0 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
TRET A 0 A_PlaySoundEx("weapon/mbuster","weapon")
TRET A 0 A_SpawnItemEx("BuddySentryBullet",30,0,40,cos(-pitch)*64,0,sin(-pitch)*64,0,SXF_TRANSFERPOINTERS)
TRET AAAAAA 1 A_Jumpifintargetinventory("BuddySentryReclaim",1,"Checkreturn")
TRET A 0 A_GiveInventory("CutterFlag",1)  
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,500  )//JLOSF_PROJECTILE
TRET A 0 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_NULL)
TRET A 0 A_CheckFlag("NOGRAVITY", "Terminate", AAPTR_MASTER)
Goto See 
Stall:
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
TRET A 0 A_GiveInventory("SentryStalling",1) 
TRET A 0 A_PlaySoundEx("weapon/gemini","Voice")
TRET A 0 A_Takeinventory("CutterFlag",15)
TRET AAAAAAAAAAAAAAAAAAAAAAAAA 1 A_Jumpifintargetinventory("BuddySentryReclaim",1,"Checkreturn")
TRET A 0 A_jumpifinventory("CutterFlag",1,"Stall")
TRET A 0 A_Takeinventory("SentryStalling",9)
Goto See
Pain.Dispenser:
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
//---Health Check---
TRET A 0 A_Takefromtarget("BuddySentryHPView",9999)
TRET A 0 A_Givetotarget("BuddySentryHPView",Health)
TRET A 0 HealThing(10)
//---
TRET A 0 A_jumpifinventory("SentryStalling",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,500  )
TRET A 1 A_jumpifinventory("WeaponCharge",130,"See")
Goto Warmup
Pain.DynaShock:
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
//---Health Check---
TRET A 0 A_Takefromtarget("BuddySentryHPView",9999)
TRET A 0 A_Givetotarget("BuddySentryHPView",Health)
TRET A 0 HealThing(50)
//---
TRET A 0 A_jumpifinventory("SentryStalling",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,500  )
TRET A 1 A_jumpifinventory("WeaponCharge",130,"See")
Goto Warmup
Pain:
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
//---Health Check---
TRET A 0 A_Takefromtarget("BuddySentryHPView",9999)
TRET A 0 A_Givetotarget("BuddySentryHPView",Health)
//---
TNT1 A 0 A_PlaySoundEx("misc/mm4pain", "Voice")
TRET A 0 A_SeekerMissile(90,90)
TRET A 0 A_jumpifinventory("SentryStalling",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,500  )
TRET A 1 A_jumpifinventory("WeaponCharge",130,"See")
Goto Warmup
Checkreturn:
TRET A 1 A_JumpIfTargetInLOS("Recall",30,JLOSF_TARGETLOS,200)
TRET A 0 A_SpawnItemEX("PickupIndicator",0,0,40,0,0,0,0)
TRET A 0 A_jumpifinventory("SentryStalling",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,500  )
Goto See
Recall:
TNT1 A 0 A_Changeflag("SHOOTABLE",0)
TFOG A 1 A_Takefromtarget("BuddySentryActive",9)
TNT1 A 0 A_Takefromtarget("BuddySentryHPView",9999)
TNT1 A 0 A_GiveToTarget("Movingthis")
TNT1 A 0 A_GiveToTarget("Electrammo",75)
TFOG BC 2
Stop
Death:
TNT1 A 0 A_Takefromtarget("BuddySentryHPView",9999)
TNT1 A 0 A_PlaySoundEx("weapon/napalm", "Weapon")
TNT1 A 1 A_SpawnItemEx("TopExplosion")
TNT1 A 0 A_Takefromtarget("BuddySentryActive",9)
TNT1 A 0 A_GiveToTarget("SentryDown")
stop
Terminate:
TNT1 A 0
stop
}
}

actor BuddySentryActive : Inventory // anti-spam
{
inventory.amount 1
inventory.maxamount 1
}

actor BuddySentryReclaim : Powerup // anti-spam
{
inventory.amount 1
inventory.maxamount 1
Powerup.Duration 3
}

actor BuddySentryHPView : Inventory // anti-spam
{
inventory.amount 1
inventory.maxamount 400
}

actor BuddySentryMarker  // 
{
PROJECTILE
//+NOINTERACTION
+NOGRAVITY
//+FLOORHUGGER
+NOTARGETSWITCH
height 30
Radius 60
damage (0)
reactiontime 1
scale 1
RenderStyle "ADD"
Alpha 1
States
{
Spawn:
TREG A 3
TRBI A 0 A_PlaySoundEx("weapon/waterballoon","Weapon")  
TRBI A 0 A_Takefromtarget("Electrammo",150)
TRBI A 0 
TRBI A 0 A_SpawnItemEX("BuddySentry",0,0,0,0,0,0,0,SXF_SETMASTER)
TRBI A 0 A_Givetotarget("BuddySentryActive",1)
stop
Crash:
XDeath:
TREG B 0 A_Changeflag("NOINTERACTION",1)
TREG B 1 A_GiveToTarget("SpawnDeny")
TNT1 A 1 A_SpawnitemEx("BuddySentryMarker2", 0, 0, 0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
Stop
Death:
TREG B 0 A_Changeflag("NOINTERACTION",1)
TREG B 1 A_GiveToTarget("SpawnDeny")
TNT1 A 1 A_SpawnitemEx("BuddySentryMarker2", 0, 0, 0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
stop
}
}

actor BuddySentryMarker2  // 
{
PROJECTILE
+NOINTERACTION
+NOGRAVITY
//+FLOORHUGGER
+NOTARGETSWITCH
height 30
Radius 80
damage (0)
reactiontime 1
scale 1
RenderStyle "ADD"
Alpha 1
States
{
Spawn:
TREG B 10
stop
}
}

actor BuddySentrySpawner : CustomInventory 
{
//$Category MM8BDM-Assists
//Inventory.RespawnTics 350
inventory.amount 1
inventory.maxamount 100
inventory.pickupmessage "$PU_TREBLESENTRY"
inventory.icon "TRBLSI"
Inventory.PickupSound "item/1up"
scale 2.0
+COUNTITEM
+INVBAR
states
{
Spawn:
TRBI A 1
Loop
Use:
TRBI A 0 A_Jumpifinventory("BuddySentryActive",1,"Reclaim")
TRBI A 0 
TRBI A 1 A_SpawnitemEx("BuddySentryMarker", 120, 0, 0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
//TRBI A 1 A_JumpIfInventory("SpawnDeny",1,"Null")
//TRBI A 0 A_PlaySoundEx("weapon/waterballoon","Weapon")  
//TRBI A 0 A_TakeInventory("Electrammo",150)
//TRBI A 0 
//TRBI A 0 A_SpawnItemEX("BuddySentry",120,0,0,0,0,0,0,SXF_SETMASTER)
//TRBI A 0 A_GiveInventory("BuddySentryActive",1)
fail
Reclaim:
GDTB D 0
GDTB D 0 A_Jumpifinventory("BuddySentryReclaim",1,2)
GDTB D 1 A_GiveInventory("BuddySentryReclaim",1)
GDTB D 0
Null:
TNT1 A 0 
fail
}
}

actor BuddySentryBullet
{
Obituary "$OB_TREBLESENTRY"
PROJECTILE
+DONTBLAST
+NODAMAGETHRUST
+BLOODSPLATTER
+NOTargetSwitch
+SEEKERMISSILE
Speed 90
Damage (35)
scale 2.5
Height 10
Radius 10
Damagetype "SentryShot"
States
{
Spawn:
BUST A 1
BUST A 1 A_SeekerMissile(90,90)
BUST A 1 A_SeekerMissile(90,90)
BUST A 1 A_SeekerMissile(90,90)
Spawn2:
BUST A 1
loop
Death:
TNT1 A 0 A_Explode(10,50,0)
Stop
}
}


///=======
actor ComboSentry
{
+SOLID
+Shootable
+MISSILE
//+NOCLIP
+NODAMAGETHRUST
+DONTBLAST
//+STANDSTILL  //doesn't seem to do anything
+DONTBLAST
+SKYEXPLODE
+DONTSEEKINVISIBLE//
+SEEKERMISSILE
+NoTargetSwitch
+FLOORHUGGER
Damagefactor "FireType", 0
Damagefactor "ElectricType", 0
Damagefactor "SentryShot", 0
DamageFactor "Dynashock", 0.3
DamageFactor "SparkShock", 0
//--
damagefactor "HardKnuckle", 2
damagefactor "BreakType", 2
damagefactor "BreakType2", 2
damagefactor "BreakType3", 2
damagefactor "BreakType4", 2
damagefactor "BreakTypeX", 2
damagefactor "EBreakType", 2
damagefactor "EBreakType2", 2
//==
speed 1
scale 2.5
Radius 20
Height 70
Health 800
gravity 999
reactiontime 256
PainChance 256
states
{
Spawn:
TRET A 0
TRET A 0 A_GiveToTarget("SentryGoingup")
TRET A 1 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_DEFAULT)
TRET A 1 ACS_ExecuteAlways(998,0,25)
TRET A 1 A_JumpIf(ACS_ExecuteWithResult(975, 1)==1,"TeamGame")
Goto Warmup
TeamGame:
TRET A 0 A_GiveInventory("InvasionProtection",1) 
Warmup:
TRET A 1 A_jumpifinventory("WeaponCharge",105,"Ready")
TRET A 0 A_PlaySoundEx("weapon/heat1", "Weapon")
TRET A 0 A_GiveInventory("WeaponCharge",1) 
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
TRET A 0 A_jumpifinventory("WeaponCharge",105,"Ready")
loop
Ready:
TRET A 1 ACS_ExecuteAlways(998,0,0)
TRET A 1  A_PlaySoundEx("misc/gravitywarn","Weapon")
TRET A 1 A_Jumpifintargetinventory("RCSInControl",1,"Remote")
Goto See
See:
TRET A 0
TRET A 0 A_Jumpifintargetinventory("RCSInControl",1,"Remote")
TRET A 0 A_Jumpifintargetinventory("RemoteSentryReclaim",1,"Checkreturn")
TRET A 0 A_Takeinventory("CutterFlag",1)
TRET A 0 A_SeekerMissile(0,0,SMF_LOOK,256,45)
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
TRET A 1 A_JumpIfTargetInLOS ("Spotted",0,JLOSF_PROJECTILE,1000)
TRET A 0 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_NULL)
TRET A 0 A_CheckFlag("NOGRAVITY", "Terminate", AAPTR_MASTER)
//---Health Check---
TRET A 0 A_Takefromtarget("RemoteSentryHPView",9999)
TRET A 0 A_Givetotarget("RemoteSentryHPView",Health)
//---
goto See
Remote:
TRET A 0 A_TakeInventory("SentryStalling",9)
TRET A 0 A_Changeflag("SEEKERMISSILE",0)
//---Health Check---
TRET A 0 A_Takefromtarget("RemoteSentryHPView",9999)
TRET A 0 A_Givetotarget("RemoteSentryHPView",Health)
//---
TRET A 0 A_Changevelocity(0,0,0,CVF_REPLACE)
TRET A 1 ACS_ExecuteAlways(998,0,174)
TRET A 0 A_JumpIfInTargetInventory("RCSShoot", 1, "Shoot")
TRET A 0 A_GiveToTarget("GadgetTargetMarker2", 1)
TRET A 0 ACS_ExecuteAlways(989, 0, ACS_ExecuteWithResult(257)+100, 32)
TRET A 0 A_SpawnItemEx("RemoteSight",cos(-pitch)*30,0,40+(sin(pitch)*30),cos(-pitch)*35,0,sin(pitch)*-35,0,SXF_TRANSFERPITCH)
TRET A 0 A_Jumpifcloser(200,"Recallcheck")
TRET A 1 A_JumpIfInTargetInventory("RCSInControl", 1, "Remote")
TRET A 0 A_Changeflag("SEEKERMISSILE",1)
TRET A 0 ACS_ExecuteAlways(998,0,0)
goto See
Shoot:
//---Health Check---
TRET A 0 A_Takefromtarget("RemoteSentryHPView",9999)
TRET A 0 A_Givetotarget("RemoteSentryHPView",Health)
//---
//TRET A 1 A_LogINT(-Pitch)
TRET A 0 A_PlaySoundEx("weapon/mbuster","weapon")
TRET A 1 A_GiveToTarget("GadgetTargetMarker2", 1)
TRET A 1 ACS_ExecuteAlways(989, 0, ACS_ExecuteWithResult(257)+100, 32)
//TRET A 1 A_CustomMissile("RemoteShot",32,0,Random(-3, 3),2,-pitch)//Thing_ProjectileAimed(0, 201, 192, ACS_ExecuteWithResult(257)+100, 0)
TRET A 0 A_SpawnItemEx("RemoteShot",cos(-pitch)*30,0,40+(sin(pitch)*30),cos(-pitch)*64,0,sin(pitch)*-64,0,SXF_TRANSFERPITCH)
TRET A 0 A_Jumpifcloser(200,"Recallcheck")
TRET A 0 A_JumpIfInTargetInventory("RCSInControl", 1, "Remote")
Goto See
Recallcheck:
TRET A 0 A_Jumpifintargetinventory("RemoteSentryReclaim",1,"Checkreturn")
TRET A 0 A_JumpIfInTargetInventory("RCSInControl", 1, "Remote")
Goto See
Spotted:
TRET AAA 3 A_PlaySoundEx("weapon/flashstopper","Weapon")
TRET A 1 
Missile:
TRET A 0 
//---Health Check---
TRET A 0 A_Takefromtarget("RemoteSentryHPView",9999)
TRET A 0 A_Givetotarget("RemoteSentryHPView",Health)
//---
TRET A 0 A_Jumpifintargetinventory("RCSInControl",1,"Remote")
TRET A 0 A_Jumpifintargetinventory("RemoteSentryReclaim",1,"Checkreturn")
TRET A 0 A_jumpifinventory("CutterFlag",30,"Stall")
TRET A 0 //A_RearrangePointers(AAPTR_DEFAULT, AAPTR_DEFAULT, AAPTR_NULL)
TRET A 0 A_SeekerMissile(90,90)
TRET A 0 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
TRET A 0 A_SpawnItemEx("RemoteAutoShot",cos(-pitch)*30,0,40+(sin(pitch)*30),cos(-pitch)*64,0,sin(pitch)*-64,0,SXF_TRANSFERPOINTERS)//A_SpawnItemEx("RemoteAutoShot",30,25,40,cos(-pitch)*64,0,(sin(-pitch)*64),0,SXF_TRANSFERPOINTERS)
TRET AAAA 1 A_Jumpifintargetinventory("RemoteSentryReclaim",1,"Checkreturn")
TRET A 0 A_GiveInventory("CutterFlag",1)  
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )//JLOSF_PROJECTILE
TRET A 0 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_NULL)
TRET A 0 A_CheckFlag("NOGRAVITY", "Terminate", AAPTR_MASTER)
Goto See 
Stall:
TRET A 0 A_Jumpifintargetinventory("RCSInControl",1,"Remote")
TRET A 0 A_GiveInventory("SentryStalling",1) 
TRET A 0 A_PlaySoundEx("weapon/gemini","Voice")
TRET A 0 A_Takeinventory("CutterFlag",10)
TRET AAAAA 1 A_Jumpifintargetinventory("RemoteSentryReclaim",1,"Checkreturn")
TRET A 0 A_jumpifinventory("CutterFlag",1,"Stall")
TRET A 0 A_TakeInventory("SentryStalling",9) 
Goto See
Pain.Dispenser:
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
//---Health Check---
TRET A 0 A_Takefromtarget("RemoteSentryHPView",9999)
TRET A 0 A_Givetotarget("RemoteSentryHPView",Health)
TRET A 0 HealThing(10)
//---
TRET A 0 A_jumpifinventory("SentryStalling",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )
TRET A 1 A_jumpifinventory("WeaponCharge",130,"See")
Goto Warmup
Pain.DynaShock:
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
//---Health Check---
TRET A 0 A_Takefromtarget("RemoteSentryHPView",9999)
TRET A 0 A_Givetotarget("RemoteSentryHPView",Health)
TRET A 0 HealThing(50)
//---
TRET A 0 A_jumpifinventory("SentryStalling",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )
TRET A 1 A_jumpifinventory("WeaponCharge",130,"See")
Goto Warmup
Pain:
TNT1 A 0 A_PlaySoundEx("misc/mm4pain", "Voice")
TRET A 0 A_SeekerMissile(90,90)
TRET A 0 A_Jumpifintargetinventory("RCSInControl",1,"Remote")
TRET A 0 A_jumpifinventory("SentryStalling",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )
TRET A 1 A_jumpifinventory("WeaponCharge",130,"See")
Goto Warmup
Checkreturn:
TRET A 1 A_JumpIfTargetInLOS("Recall",30,JLOSF_TARGETLOS,200)
TRET A 0 A_SpawnItemEX("PickupIndicator",0,0,40,0,0,0,0)
TRET A 0 A_JumpIfInTargetInventory("RCSInControl", 1, "Remote")
TRET A 0 A_jumpifinventory("SentryStalling",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )
Goto See
Recall:
TFOG A 0 A_Takefromtarget("RemoteSentryHPView",9999)
TNT1 A 1 A_Takefromtarget("RemoteSentryActive",9)
TNT1 A 1 A_Takefromtarget("RemoteSentryController",9)
TNT1 A 0 A_GiveToTarget("Electrammo",150)
TNT1 A 0 A_GiveToTarget("Movingthis")
TFOG BC 2
Stop
Death:
TNT1 A 0 A_PlaySoundEx("weapon/napalm", "Weapon")
TNT1 A 1 A_SpawnItemEx("TopExplosion")
TNT1 A 0 A_Takefromtarget("RemoteSentryActive",9)
TNT1 A 1 A_Takefromtarget("RemoteSentryController",9)
TNT1 A 0 A_GiveToTarget("SentryDown")
stop
Terminate:
TNT1 A 0
stop
}
}

/*
actor GadgetSentry
{
+SOLID
+Shootable
+MISSILE
//+NOCLIP
+NODAMAGETHRUST
+DONTBLAST
//+STANDSTILL  //doesn't seem to do anything
+DONTBLAST
+SKYEXPLODE
+DONTSEEKINVISIBLE//
+SEEKERMISSILE
+NoTargetSwitch
+FLOORHUGGER
Damagefactor "FireType", 0
Damagefactor "ElectricType", 0
Damagefactor "SentryShot", 0
DamageFactor "Dynashock", 0.3
DamageFactor "SparkShock", 0
//--
damagefactor "HardKnuckle", 2
damagefactor "BreakType", 2
damagefactor "BreakType2", 2
damagefactor "BreakType3", 2
damagefactor "BreakType4", 2
damagefactor "BreakTypeX", 2
damagefactor "EBreakType", 2
damagefactor "EBreakType2", 2
//==
speed 1
scale 2.5
Radius 20
Height 70
Health 800
gravity 999
reactiontime 256
PainChance 256
states
{
Spawn:
TRET A 0
TRET A 0 A_GiveToTarget("SentryGoingup")
TRET A 1 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_DEFAULT)
TRET A 1 ACS_ExecuteAlways(998,0,25)
TRET A 1 A_JumpIf(ACS_ExecuteWithResult(975, 1)==1,"TeamGame")
Goto Warmup
TeamGame:
TRET A 0 A_GiveInventory("InvasionProtection",1) 
Warmup:
TRET A 1 A_jumpifinventory("WeaponCharge",15,"See")
TRET A 0 A_PlaySoundEx("weapon/heat1", "Weapon")
TRET A 0 A_GiveInventory("WeaponCharge",1) 
TRET A 1 A_jumpifinventory("WeaponCharge",15,"Ready")
loop
Ready:
TRET A 1 ACS_ExecuteAlways(998,0,175)
TRET A 1  A_PlaySoundEx("misc/gravitywarn","Weapon")
TRET A 1 A_Jumpifintargetinventory("RCSInControl",1,"Remote")
Goto See
See:
TRET A 0
TRET A 0 A_Jumpifintargetinventory("RCSInControl",1,"Remote")
TRET A 0 A_Jumpifintargetinventory("GadgetSentryReclaim",1,"Checkreturn")
TRET A 0 A_Takeinventory("CutterFlag",1)
TRET A 0 A_SeekerMissile(0,0,SMF_LOOK,256,10)
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
TRET A 1 A_JumpIfTargetInLOS ("Spotted",0,JLOSF_PROJECTILE,1000)
TRET A 0 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_NULL)
TRET A 0 A_CheckFlag("NOGRAVITY", "Terminate", AAPTR_MASTER)
//---Health Check---
TRET A 0 A_Takefromtarget("GadgetSentryHPView",9999)
TRET A 0 A_Givetotarget("GadgetSentryHPView",Health)
//---
goto See
Remote:
TRET A 0 A_TakeInventory("SentryStalling",9)
//---Health Check---
TRET A 0 A_Takefromtarget("GadgetSentryHPView",9999)
TRET A 0 A_Givetotarget("GadgetSentryHPView",Health)
//---
TRET A 0 A_Changevelocity(0,0,0,CVF_REPLACE)
TRET A 1 ACS_ExecuteAlways(998,0,174)
TRET A 0 A_JumpIfInTargetInventory("RCSShoot", 1, "Shoot")
TRET A 0 A_GiveToTarget("GadgetTargetMarker2", 1)
TRET A 0 ACS_ExecuteAlways(989, 0, ACS_ExecuteWithResult(257)+100, 32)
TRET A 0 A_SpawnItemEx("RemoteSight",cos(-pitch)*30,0,40+(sin(pitch)*30),cos(-pitch)*35,0,sin(pitch)*-35,0,SXF_TRANSFERPITCH)
TRET A 0 A_Jumpifcloser(200,"Recallcheck")
TRET A 0 A_JumpIfInTargetInventory("RCSInControl", 1, "Remote")
TRET A 0 ACS_ExecuteAlways(998,0,175)
goto See
Shoot:
//---Health Check---
TRET A 0 A_Takefromtarget("GadgetSentryHPView",9999)
TRET A 0 A_Givetotarget("GadgetSentryHPView",Health)
//---
//TRET A 1 A_LogINT(-Pitch)
TRET A 0 A_PlaySoundEx("weapon/mbuster","weapon")
TRET A 1 A_GiveToTarget("GadgetTargetMarker2", 1)
TRET A 1 ACS_ExecuteAlways(989, 0, ACS_ExecuteWithResult(257)+100, 32)
//TRET A 1 A_CustomMissile("RemoteShot",32,0,Random(-3, 3),2,-pitch)//Thing_ProjectileAimed(0, 201, 192, ACS_ExecuteWithResult(257)+100, 0)
TRET A 0 A_SpawnItemEx("RemoteShot",cos(-pitch)*30,0,40+(sin(pitch)*30),cos(-pitch)*64,0,sin(pitch)*-64,0,SXF_TRANSFERPITCH)
TRET A 0 A_Jumpifcloser(200,"Recallcheck")
TRET A 0 A_JumpIfInTargetInventory("RCSInControl", 1, "Remote")
Goto See
Recallcheck:
TRET A 0 A_Jumpifintargetinventory("GadgetSentryReclaim",1,"Checkreturn")
TRET A 0 A_JumpIfInTargetInventory("RCSInControl", 1, "Remote")
Goto See
Spotted:
TRET AAA 3 A_PlaySoundEx("weapon/flashstopper","Weapon")
TRET A 1 
Missile:
TRET A 0 
//---Health Check---
TRET A 0 A_Takefromtarget("GadgetSentryHPView",9999)
TRET A 0 A_Givetotarget("GadgetSentryHPView",Health)
//---
TRET A 0 A_Jumpifintargetinventory("RCSInControl",1,"Remote")
TRET A 0 A_Jumpifintargetinventory("GadgetSentryReclaim",1,"Checkreturn")
TRET A 0 A_jumpifinventory("CutterFlag",30,"Stall")
TRET A 0 //A_RearrangePointers(AAPTR_DEFAULT, AAPTR_DEFAULT, AAPTR_NULL)
TRET A 0 A_SeekerMissile(90,90)
TRET A 0 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
TRET A 0 A_SpawnItemEx("RemoteAutoShot",30,25,40,cos(-pitch)*64,0,(sin(-pitch)*64),0,SXF_TRANSFERPOINTERS)
TRET AAAAAAAAAAAAA 1 A_Jumpifintargetinventory("GadgetSentryReclaim",1,"Checkreturn")
TRET A 0 A_GiveInventory("CutterFlag",1)  
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )//JLOSF_PROJECTILE
TRET A 0 A_RearrangePointers(AAPTR_DEFAULT, AAPTR_TARGET, AAPTR_NULL)
TRET A 0 A_CheckFlag("NOGRAVITY", "Terminate", AAPTR_MASTER)
Goto See 
Stall:
TRET A 0 A_Jumpifintargetinventory("RCSInControl",1,"Remote")
TRET A 0 A_GiveInventory("SentryStalling",1) 
TRET A 0 A_PlaySoundEx("weapon/gemini","Voice")
TRET A 0 A_Takeinventory("CutterFlag",10)
TRET AAAAAAAAAAAAAAAAAAAAAAAAA 1 A_Jumpifintargetinventory("GadgetSentryReclaim",1,"Checkreturn")
TRET A 0 A_jumpifinventory("CutterFlag",1,"Stall")
TRET A 0 A_TakeInventory("SentryStalling",9) 
Goto See
Pain.Dispenser:
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
//---Health Check---
TRET A 0 A_Takefromtarget("GadgetSentryHPView",9999)
TRET A 0 A_Givetotarget("GadgetSentryHPView",Health)
TRET A 0 HealThing(10)
//---
TRET A 0 A_jumpifinventory("SentryStalling",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )
TRET A 1 A_jumpifinventory("WeaponCharge",130,"See")
Goto Warmup
Pain.DynaShock:
TRET A 1 A_Changevelocity(0,0,0,CVF_REPLACE) //Prevents movement
//---Health Check---
TRET A 0 A_Takefromtarget("GadgetSentryHPView",9999)
TRET A 0 A_Givetotarget("GadgetSentryHPView",Health)
TRET A 0 HealThing(50)
//---
TRET A 0 A_jumpifinventory("SentryStalling",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )
TRET A 1 A_jumpifinventory("WeaponCharge",130,"See")
Goto Warmup
Pain:
TNT1 A 0 A_PlaySoundEx("misc/mm4pain", "Voice")
TRET A 0 A_SeekerMissile(90,90)
TRET A 0 A_Jumpifintargetinventory("RCSInControl",1,"Remote")
TRET A 0 A_jumpifinventory("SentryStalling",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )
TRET A 1 A_jumpifinventory("WeaponCharge",130,"See")
Goto Warmup
Checkreturn:
TRET A 1 A_JumpIfTargetInLOS("Recall",30,JLOSF_TARGETLOS,200)
TRET A 0 A_SpawnItemEX("PickupIndicator",0,0,40,0,0,0,0)
TRET A 0 A_JumpIfInTargetInventory("RCSInControl", 1, "Remote")
TRET A 0 A_jumpifinventory("SentryStalling",1,"Stall")
TRET A 0 A_JumpIfTargetInLOS ("Missile", 0, JLOSF_PROJECTILE,1000  )
Goto See
Recall:
TFOG A 0 A_Takefromtarget("GadgetSentryHPView",9999)
TNT1 A 1 A_Takefromtarget("GadgetSentryActive",9)
TNT1 A 1 A_Takefromtarget("GadgetSentryController",9)
TNT1 A 0 A_GiveToTarget("Movingthis")
TFOG BC 2
Stop
Death:
TNT1 A 0 A_PlaySoundEx("weapon/napalm", "Weapon")
TNT1 A 1 A_SpawnItemEx("TopExplosion")
TNT1 A 0 A_Takefromtarget("GadgetSentryActive",9)
TNT1 A 1 A_Takefromtarget("GadgetSentryController",9)
TNT1 A 0 A_GiveToTarget("SentryDown")
stop
Terminate:
TNT1 A 0
stop
}
}
*/