actor BugTypeWepIMKN : Weapon
{
Weapon.AmmoUse1 1
Weapon.AmmoGive1 256
Weapon.AmmoUse2 8
Weapon.AmmoGive2 256
Weapon.SlotNumber 1
Obituary "%o was sapped by %k"
weapon.ammotype1 "BugAttackPP"
weapon.ammotype2 "GhostAttackPP"
inventory.icon "NULLICON"

+WEAPON.DONTBOB
+WEAPON.NOAUTOAIM
+WEAPON.AMMO_OPTIONAL
+WEAPON.ALT_AMMO_OPTIONAL
scale 2.0
States
{
Spawn:
WEAP X 1
stop
Ready:
IMKN A 0 //A_GunFlash
IMKN A 0 A_JumpIfInventory("Once",1,"Ready2")
IMKN A 0 A_PlaySoundEx("imurkono/taunt2","Weapon")
IMKN A 1 A_GiveInventory("Once",1)
Goto Ready2
Ready2:
IMKN A 0 A_GunFlash
IMKN A 0 A_JumpIfInventory("Ready2Counter",35,"Ready3")
IMKN A 0 A_JumpIfInventory("Ready3Item",1,"Ready3")
IMKN AAAAA 1 A_WeaponReady
IMKN A 0 A_GiveInventory("BugAttackPP",1)
IMKN A 0 A_GiveInventory("GhostAttackPP",1)
IMKN A 0 A_GiveInventory("Ready2Counter",5)
IMKN A 0 A_TakeInventory("Burninator",999)
goto Ready2+1
Ready3:
IMKN A 0 A_TakeInventory("Ready2Counter",999)
IMKN A 0 A_GiveInventory("Ready3Item",1)
IMKN A 0
IMKN A 1 A_WeaponReady
IMKN A 0 A_GiveInventory("BugAttackPP",1)
IMKN A 0 A_GiveInventory("GhostAttackPP",1)
IMKN A 0 A_TakeInventory("Burninator",999)
IMKN A 1 A_WeaponReady
IMKN A 0 A_GiveInventory("BugAttackPP",1)
IMKN A 0 A_GiveInventory("GhostAttackPP",1)
IMKN A 1 A_WeaponReady
IMKN A 0 A_GiveInventory("BugAttackPP",1)
IMKN A 0 A_GiveInventory("GhostAttackPP",1)
IMKN A 1 A_WeaponReady
IMKN A 0 A_GiveInventory("BugAttackPP",1)
IMKN A 0 A_GiveInventory("GhostAttackPP",1)
IMKN A 1 A_WeaponReady
IMKN A 0 A_GiveInventory("BugAttackPP",1)
IMKN A 0 A_GiveInventory("GhostAttackPP",1)
IMKN A 0 A_GiveInventory("LifeAmmo",1)
goto Ready3+3
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
IMKN A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
IMKN A 1 A_Raise
Loop
Fire:
IMKN B 0 A_TakeInventory("Ready2Counter",999)
IMKN B 0 A_TakeInventory("Ready3Item",999)
IMKN BC 3
IMKN DE 2 
IMKN F 0 A_FireCustomMissile("LeechLifeF",0,0,12,-8)
IMKN F 0 A_FireCustomMissile("LeechLifeF",0,0,-12,-8)
IMKN F 0 A_FireCustomMissile("LeechLifeFangFX",0,0,12,-8)
IMKN F 0 A_FireCustomMissile("LeechLifeFangFX",0,0,-12,-8)
IMKN F 2 A_PlaySoundEx("weapon/mbuster","Weapon")
IMKN F 0 A_FireCustomMissile("LeechLifeF",0,0,12,0)
IMKN F 0 A_FireCustomMissile("LeechLifeF",0,0,-12,0)
IMKN F 0 A_FireCustomMissile("LeechLifeFangFX",0,0,12,-8)
IMKN F 0 A_FireCustomMissile("LeechLifeFangFX",0,0,-12,-8)
IMKN F 2 A_PlaySoundEx("weapon/mbuster","Weapon")
IMKN F 0 A_FireCustomMissile("LeechLifeF",0,0,12,0)
IMKN F 0 A_FireCustomMissile("LeechLifeF",0,0,-12,0)
IMKN F 0 A_FireCustomMissile("LeechLifeFangFX",0,0,12,-8)
IMKN F 0 A_FireCustomMissile("LeechLifeFangFX",0,0,-12,-8)
IMKN F 2 A_PlaySoundEx("weapon/mbuster","Weapon")
IMKN F 0 A_FireCustomMissile("LeechLifeF",0,0,12,0)
IMKN F 0 A_FireCustomMissile("LeechLifeF",0,0,-12,0)
IMKN F 0 A_FireCustomMissile("LeechLifeFangFX",0,0,12,-8)
IMKN F 0 A_FireCustomMissile("LeechLifeFangFX",0,0,-12,-8)
IMKN F 2 A_PlaySoundEx("weapon/mbuster","Weapon")
IMKN F 0 A_FireCustomMissile("LeechLifeF",0,0,12,0)
IMKN F 0 A_FireCustomMissile("LeechLifeF",0,0,-12,0)
IMKN F 0 A_FireCustomMissile("LeechLifeFangFX",0,0,12,-8)
IMKN F 0 A_FireCustomMissile("LeechLifeFangFX",0,0,-12,-8)
IMKN F 2 A_PlaySoundEx("weapon/mbuster","Weapon")
IMKN F 0 A_FireCustomMissile("LeechLifeF",0,0,12,0)
IMKN F 0 A_FireCustomMissile("LeechLifeF",0,0,-12,0)
IMKN F 0 A_FireCustomMissile("LeechLifeFangFX",0,0,12,-8)
IMKN F 0 A_FireCustomMissile("LeechLifeFangFX",0,0,-12,-8)
IMKN F 2 A_PlaySoundEx("weapon/mbuster","Weapon")
IMKN DCBAA 3
IMKN F 0 A_Refire
goto Ready2+1
AltFire:
IMKN B 0 A_TakeInventory("Ready2Counter",999)
IMKN B 0 A_TakeInventory("Ready3Item",999)
IMKN B 0 A_JumpIfNoAmmo("NoAmmo1")
IMKN B 0 A_JumpIfInventory("Burninator",1,"FireHold")
IMKN A 0 A_PlaySoundEx("imrkn/taunt3","Voice")
IMKN BC 3
IMKN DE 2 
IMKN F 5 A_GiveInventory("Burninator",1)
FireHold:
IMKN F 0
IMKN F 1 A_PlaySoundEx("weapon/pharaoh2","Weapon")
IMKN F 2 A_FireCustomMissile("WillOWispFlame",random(-25,25),1,0,0,0,random(-25,25)) 
Goto Ready2+1
NoAmmo1:
IMKN Z 0
IMKN Z 1 
Goto Ready2+1
Flash:
TNT1 A 0 
TNT1 A 0// A_JumpIfInventory("OnBoard",1,5)
TNT1 A 0 A_JumpIfInventory("FlightDisableFlag",1,"NoFlight")
TNT1 A 0 A_JumpIfInventory("YesFlightFlag",1,"Flight")
TNT1 A 0 A_ChangeFlag("NOGRAVITY",0)
TNT1 A 0 SetPlayerProperty(0,0,3)
TNT1 A 1
loop
Flight:
TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(107,0)==1,"NoFlight")
TNT1 A 1
goto YesFlight
YesFlight:
TNT1 A 0 A_ChangeFlag("NOGRAVITY",1)
TNT1 A 1 SetPlayerProperty(0,1,3)
goto Flash
NoFlight:
TNT1 A 0 A_ChangeFlag("NOGRAVITY",0)
TNT1 A 1 SetPlayerProperty(0,0,3)
goto Flash
NoFlash:
TNT1 A 0
TNT1 A 0 A_ChangeFlag("NOGRAVITY",0)
TNT1 A 1 SetPlayerProperty(0,0,3) 
goto Flash
}
}

Actor BugAttackPP : Ammo
{
inventory.amount 1
inventory.maxamount 256
+INVENTORY.IGNORESKILL
}

Actor GhostAttackPP : Ammo
{
inventory.amount 1
inventory.maxamount 256
+INVENTORY.IGNORESKILL
}

Actor LifeAmmo : Ammo
{
inventory.amount 1
inventory.maxamount 128
+INVENTORY.IGNORESKILL
}

actor LeechLifeF
{
PROJECTILE
+DONTBLAST
+NOTARGETSWITCH
damage (10)
damagetype "BugType2"
height 48
radius 16
Speed 32
scale 2.0
states
{
Spawn:
LLFN A 0
LLFN A 1 A_Stop
LLFN A 1 
stop
Crash:
XDeath:
LLFN A 0
LLFN A 0 A_GiveToTarget("LifeAmmo",4)
LLFN A 0 A_GiveToTarget("Health",1)
stop
}
}

actor LeechLifeFangFX
{
PROJECTILE
+DONTBLAST
+NOINTERACTION
+CLIENTSIDEONLY
height 8
radius 4
Speed 32
scale 2.0
states
{
Spawn:
LLFN A 0
LLFN A 1 A_Stop
LLFN A 1 
stop
}
}

actor WillOWispFlame : MageStaffFX2
{
PROJECTILE
+DONTBLAST
+NOCLIP
+SEEKERMISSILE
Damage (3)
Damagetype "WillOWisp"
Height 32
Radius 8
Speed 10
Reactiontime 13
Scale 2.5
States
{
Spawn:
WLOW A 0
WLOW A 0 A_ScaleVelocity(0.5)
WLOW ABC 1 A_Explode(2,32,0)
WLOW A 0 A_ScaleVelocity(0.5)
WLOW ABC 1 A_Explode(2,32,0)
WLOW A 0 A_ScaleVelocity(0.5)
WLOW ABCD 2 A_Explode(4,32,0)
WLOW E 2 A_ScaleVelocity(5.0)
WLOW E 0 A_Explode(4,32,0)
WLOW F 2 A_ScaleVelocity(5.0)
WLOW F 0 A_Explode(4,32,0)
WLOW G 2 A_MStaffTrack
WLOW G 0 A_Explode(4,32,0)
WLOW H 2 A_MStaffTrack
WLOW H 0 A_Explode(4,32,0)
WLOW I 0 A_CountDown
WLOW I 2 A_MStaffTrack
WLOW I 0 A_Explode(4,32,0)
WLOW J 2 A_MStaffTrack
WLOW J 0 A_Explode(4,32,0)
WLOW J 0 A_CountDown
WLOW K 2 A_MStaffTrack
WLOW K 0 A_Explode(4,32,0)
WLOW L 2 A_MStaffTrack
WLOW L 0 A_Explode(4,32,0)
WLOW I 0 A_CountDown
goto Spawn+23
Death:
WLOW MNO 3 A_FadeOut(0.25)
stop
XDeath:
WLOW M 0
WLOW M 0 A_Explode(5,80,0)
WLOW M 0 A_SpawnItemEx("WillOWispExplosionFX")
WLOW MNO 1
stop
}
}

actor WillOWispExplosionFX
{
+NOINTERACTION
Radius 4
Height 8
Scale 1.5
States
{
Spawn:
MSEX A 0 
MSEX A 0 A_PlaySoundEx("weapon/napalm", "Weapon")
MSEX ABCDE 2
Stop
}
}

actor ConfuseRayItem : CustomInventory 
{
inventory.amount 1
inventory.maxamount 1
inventory.pickupmessage "New Move! Confuse Ray!"
inventory.icon "CNFSRAY"
Inventory.PickupSound "item/1up"
+INVBAR
scale 2.0
states
{
Spawn:
WADP A 1
loop
Use:
WADP A 0
WADP A 0 A_JumpIfInventory("ConfuseFlag", 1, "TooSoon")
WADP A 0 A_JumpIfInventory("LifeAmmo", 128, "Ready2Use")
WADP A 0
fail
Ready2Use:
WADP A 0 A_GiveInventory("ConfuseFlag")
WADP A 0 A_TakeInventory("LifeAmmo",128)
WADP A 0 A_FireCustomMissile("ConfuseRay",0,0,0,0)
WADP A 0
fail
TooSoon:
WADP A 0
fail
}
}

ACTOR ConfuseFlag : Powerup
{
Powerup.Duration 175
}

actor ConfuseRay : MageStaffFX2
{
PROJECTILE
+NOINTERACTION
+RIPPER
+SEEKERMISSILE
-EXTREMEDEATH
Radius 8
Height 16
damagetype "GhostType2"
damage (0)
speed 10
Reactiontime 64
scale 4.5
States
{
Spawn:
IGLO A 0
IGLO A 0 A_PlaySoundEx("misc/gravitywarn","Voice")
IGLO AB 3 A_MStaffTrack
IGLO A 0 A_Explode(5,128,0)
IGLO A 0 A_CountDown
IGLO CD 3 A_MStaffTrack
IGLO A 0 A_Explode(5,128,0)
IGLO A 0 A_CountDown
IGLO EA 3 A_MStaffTrack
IGLO A 0 //A_PlaySoundEx("misc/gravitywarn","Voice")
IGLO A 0 A_Explode(5,128,0)
IGLO A 0 A_CountDown
IGLO BC 3 A_MStaffTrack
IGLO A 0 A_Explode(5,128,0)
IGLO A 0 A_CountDown
IGLO DE 3 A_MStaffTrack
IGLO A 0 A_Explode(5,128,0)
IGLO A 0 A_CountDown
loop
}
}
