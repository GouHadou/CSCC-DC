actor OMCannonWep : BaseMM8BDMWep 
{
Weapon.AmmoUse 0
Weapon.AmmoGive 0
Weapon.AmmoUse2 0
Weapon.AmmoGive2 0
Weapon.SlotNumber 2
Obituary "%o was blown away by %k's Cannon Attacks"
weapon.ammotype "OMCannonAmmo"
weapon.ammotype2 "OMCannonAmmo"
inventory.icon "NULLICON"

inventory.pickupsound "weapon/weaponup"
+WEAPON.AMMO_OPTIONAL
+WEAPON.ALT_AMMO_OPTIONAL
+WEAPON.NOAUTOAIM
+WEAPON.CHEATNOTWEAPON
Scale 2.0
States
{
Spawn:
WEA3 R 1
loop
Ready:
QWSM B 0 A_GunFlash
QWSM B 0 A_GiveInventory("Burninator",1)
QWSM B 0 A_TakeInventory("Burninator3",999)
QWSM B 0
QWSM B 35 A_WeaponReady
QWSM B 0 A_GiveInventory("OMBulletAmmo",1)
QWSM B 0 A_GiveInventory("OMCannonAmmo",1)
QWSM B 0 A_GiveInventory("OMBeamAmmo",1)
Goto Ready+4
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
QWSM B 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
QWSM B 1 A_Raise
Loop
Fire:
QWSM B 0 A_JumpIfInventory("AmmoTypeFlag4",1,"Fire4")//HydroCannon
QWSM B 0 A_JumpIfInventory("AmmoTypeFlag3",1,"Fire3")//ZapCannon
QWSM B 0 A_JumpIfInventory("AmmoTypeFlag2",1,"Fire2")//FlashCannon
QWSM B 0 A_JumpIfInventory("AmmoTypeFlag1",1,"Fire1")//SpikeCannon
QWSM B 3
goto Fire1 //Failsafe
Fire1://SpikeCannon
QWSM C 35 A_PlaySoundEx("weapon/pcharge","Weapon")
QWSM D 0 A_FireCustomMissile("SpikeCannon",0,0,10,0)
QWSM D 0 A_FireCustomMissile("SpikeCannon",0,0,0,0)
QWSM D 0 A_FireCustomMissile("SpikeCannon",0,0,-10,0)
QWSM D 5 A_PlaySoundEx("weapon/mbuster","Weapon")
QWSM D 0 A_FireCustomMissile("SpikeCannon",0,0,10,0)
QWSM D 0 A_FireCustomMissile("SpikeCannon",0,0,0,0)
QWSM D 0 A_FireCustomMissile("SpikeCannon",0,0,-10,0)
QWSM D 5 A_PlaySoundEx("weapon/mbuster","Weapon")
QWSM D 0 A_FireCustomMissile("SpikeCannon",0,0,10,0)
QWSM D 0 A_FireCustomMissile("SpikeCannon",0,0,0,0)
QWSM D 0 A_FireCustomMissile("SpikeCannon",0,0,-10,0)
QWSM D 5 A_PlaySoundEx("weapon/mbuster","Weapon")
QWSM D 0 A_FireCustomMissile("SpikeCannon",0,0,10,0)
QWSM D 0 A_FireCustomMissile("SpikeCannon",0,0,0,0)
QWSM D 0 A_FireCustomMissile("SpikeCannon",0,0,-10,0)
QWSM D 5 A_PlaySoundEx("weapon/mbuster","Weapon")
QWSM D 0 A_FireCustomMissile("SpikeCannon",0,0,10,0)
QWSM D 0 A_FireCustomMissile("SpikeCannon",0,0,0,0)
QWSM D 0 A_FireCustomMissile("SpikeCannon",0,0,-10,0)
QWSM D 5 A_PlaySoundEx("weapon/mbuster","Weapon")
QWSM CB 2
Goto Ready+2
Fire2://FlashCannon
QWSM C 0 A_JumpIfInventory("OMCannonAmmo",10,"Fire2Real")
QWSM C 1
Goto Fire1
Fire2Real:
TNT1 A 0 //A_JumpIfInventory("OnBoard",1,"Fire2SB")
QWSM B 0 SetPlayerProperty(0,1,0)
QWSM B 0 A_PlaySoundEx("weapon/coilstart","Weapon")
QWSM CCCCC 3 A_SpawnItemEx("FlashCannonFXSpawner",7,-16,24)
QWSM CCCCC 2 A_SpawnItemEx("FlashCannonFXSpawner",7,-16,24)
QWSM CCCCC 1 A_SpawnItemEx("FlashCannonFXSpawner",7,-16,24)
QWSM C 5
QWSM D 0 SetPlayerProperty(0,1,4)
QWSM D 0 A_TakeInventory("OMCannonAmmo",10)
QWSM D 0 A_PlaySoundEx("weapon/coilexplode","Weapon")
QWSM D 10 A_FireCustomMissile("OMFlashCannon",0,0,-16,0)
QWSM D 0 SetPlayerProperty(0,0,4)
QWSM B 15
QWSM B 0 SetPlayerProperty(0,0,0)
QWSM B 20
Goto Ready+2
Fire2SB:
QWSM B 0 A_PlaySoundEx("weapon/coilstart","Weapon")
QWSM CCCCC 3 
QWSM CCCCC 2 
QWSM CCCCC 1 
QWSM C 5
QWSM D 0 A_TakeInventory("OMCannonAmmo",10)
QWSM D 0 A_PlaySoundEx("weapon/coilexplode","Weapon")
QWSM D 10 A_FireCustomMissile("OMFlashCannon",0,0,-16,0)
QWSM B 15
QWSM B 20
Goto Ready+2
Fire3://ZapCannon
QWSM B 0 A_JumpIfInventory("OMCannonAmmo",20,"Fire3Real")
QWSM C 1
Goto Fire1
Fire3Real:
TNT1 A 0 //A_JumpIfInventory("OnBoard",1,2)
QWSM B 0 SetPlayerProperty(0,1,0)
QWSM B 0 A_PlaySoundEx("weapon/coilstart","Weapon")
QWSM CCCCC 3 A_SpawnItemEx("ZapCannonFXSpawner",7,-16,24)
QWSM CCCCC 2 A_SpawnItemEx("ZapCannonFXSpawner",7,-16,24)
QWSM CCCCC 1 A_SpawnItemEx("ZapCannonFXSpawner",7,-16,24)
QWSM C 5
QWSM D 0 SetPlayerProperty(0,0,0)
QWSM D 0 A_TakeInventory("OMCannonAmmo",20)
QWSM D 0 //A_PlaySoundEx("weapon/coilexplode","Weapon")
QWSN D 0 A_Recoil(5)
QWSM D 5 A_FireCustomMissile("OMZapCannon",0,0,-16,0)
QWSM B 15
Goto Ready+2
Fire4://HydroCannon
TNT1 A 0// A_JumpIfInventory("OnBoard",1,"NoAmmo")
QWSM C 0 A_JumpIfInventory("OMCannonAmmo",25,"Fire4Real")
QWSM C 1
Goto Fire1
Fire4Real:
QWSM B 0 SetPlayerProperty(0,1,0)
QWSM B 0 A_PlaySoundEx("weapon/coilstart","Weapon")
QWSM CCCCC 3 A_SpawnItemEx("HydroCannonFXSpawner",7,-16,24)
QWSM CCCCC 2 A_SpawnItemEx("HydroCannonFXSpawner",7,-16,24)
QWSM CCCCC 1 A_SpawnItemEx("HydroCannonFXSpawner",7,-16,24)
QWSM C 4
QWSM C 1 SetPlayerProperty(0,1,4)
QWSM C 0 A_Recoil(12)
QWSM D 0 A_TakeInventory("OMCannonAmmo",25)
QWSM D 0 A_PlaySoundEx("weapon/waterwave","Weapon")
QWSM D 3 A_FireCustomMissile("OMHydroCannon",0,0,-16,0)
QWSM D 0 A_PlaySoundEx("weapon/waterwave","Weapon")
QWSM D 3 A_FireCustomMissile("OMHydroCannon",0,0,-16,0)
QWSM D 0 A_PlaySoundEx("weapon/waterwave","Weapon")
QWSM D 3 A_FireCustomMissile("OMHydroCannon",0,0,-16,0)
QWSM D 0 A_PlaySoundEx("weapon/waterwave","Weapon")
QWSM D 3 A_FireCustomMissile("OMHydroCannon",0,0,-16,0)
QWSM D 0 A_PlaySoundEx("weapon/waterwave","Weapon")
QWSM D 3 A_FireCustomMissile("OMHydroCannon",0,0,-16,0)
QWSM D 0 A_PlaySoundEx("weapon/waterwave","Weapon")
QWSM D 3 A_FireCustomMissile("OMHydroCannon",0,0,-16,0)
QWSM D 0 A_PlaySoundEx("weapon/waterwave","Weapon")
QWSM D 3 A_FireCustomMissile("OMHydroCannon",0,0,-16,0)
QWSM D 0 A_PlaySoundEx("weapon/waterwave","Weapon")
QWSM D 3 A_FireCustomMissile("OMHydroCannon",0,0,-16,0)
QWSM D 0 A_PlaySoundEx("weapon/waterwave","Weapon")
QWSM D 3 A_FireCustomMissile("OMHydroCannon",0,0,-16,0)
QWSM D 0 A_PlaySoundEx("weapon/waterwave","Weapon")
QWSM D 3 A_FireCustomMissile("OMHydroCannon",0,0,-16,0)
QWSM D 35
QWSM D 0 SetPlayerProperty(0,0,4)
QWSM B 20
QWSM B 0 SetPlayerProperty(0,0,0)
QWSM B 15
Goto Ready+2
NoAmmo:
QWSM B 1
QWSM B 1 ACS_Execute(979,0)
Goto Ready+2
Flash:
TNT1 A 0 
TNT1 A 0// A_JumpIfInventory("OnBoard",1,5)
TNT1 A 0 A_JumpIfInventory("FlightDisableFlag",1,"NoFlight")
TNT1 A 0 A_JumpIfInventory("YesFlightFlag",1,"Flight")
TNT1 A 0 A_ChangeFlag("NOGRAVITY",0)
TNT1 A 0 SetPlayerProperty(0,0,3)
TNT1 A 1
loop
Flight:
TNT1 A 0 A_JumpIf(z-floorz>=192,"NoFlight")
TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(107,0)==1,"NoFlight")
TNT1 A 1
goto YesFlight
YesFlight:
TNT1 A 0 A_ChangeFlag("NOGRAVITY",1)
TNT1 A 1 SetPlayerProperty(0,1,3)
goto Flash
NoFlight:
TNT1 A 0 A_ChangeFlag("NOGRAVITY",0)
TNT1 A 1 SetPlayerProperty(0,0,3)
goto Flash
NoFlash:
TNT1 A 0
TNT1 A 0 A_ChangeFlag("NOGRAVITY",0)
TNT1 A 1 SetPlayerProperty(0,0,3) 
goto Flash
}
}


Actor OMCannonAmmo : Ammo
{
+INVENTORY.IGNORESKILL 
Inventory.Amount 1
Inventory.MaxAmount 100
}

actor SpikeCannon
{
PROJECTILE
+BLOODSPLATTER
Radius 10
Height 8
Speed 64
Damage (7)//50(+33%)  :: 67
Damagetype "NormalType"
scale 2.5
States
{
Spawn:
SPKC A 1
loop
}
}

Actor OMFlashCannon 
{
PROJECTILE
+BLOODSPLATTER
+RIPPER
+DONTBLAST
Speed 64
Radius 5
Height 10
Damage (2) // 10
DamageType "SteelType2"
Scale 2.5
States
{
Spawn:
FCNN B 0
FCNN B 0 A_PlaySoundEx("weapon/lshot","Weapon")
FCNN B 0 A_SpawnItemEx("OMFlashTrail")
FCNN B 1 A_Explode(3,56,0,0,28)// 30
FCNN B 0 
Loop
Death:
FCNN B 0
Stop
}
}

Actor OMFlashTrail
{
PROJECTILE
+BLOODSPLATTER
+RIPPER
+DONTBLAST
+THRUGHOST
Radius 5
Height 10
Damage (1)
DamageType "SteelType2"
Scale 2.5
States
{
Spawn:
FCNN ACACACACACACACACACACACACACACACACACA 1 A_Explode(2,48,0,0,24) //15
Death:
FCNN CACACACACA 1 A_FadeOut(0.1)
stop
}
}

actor OMZapCannon
{
PROJECTILE
+BLOODSPLATTER
Radius 20
Height 40
Speed 80
Damage (27)//180(+50%)  :: 270
Damagetype "ElectricTypeS"
scale 2.5
States
{
Spawn:
CLOS ABCDE 1 A_PlaySoundEx("weapon/sparkshock","Voice")
CLOS F 1 A_SpawnItemEx("OMZCBurstFX")
CLOS ABCDE 1 A_PlaySoundEx("weapon/thunderbeam","Voice")
CLOS F 1 A_SpawnItemEx("OMZCBurstFX")
loop
Death:
CLOS F 0 
CLOS F 0 A_SpawnItemEx("OMZCBurstFX")
stop
}
}

actor OMZCBurstFX
{
PROJECTILE
+BLOODSPLATTER
Radius 1
Height 1
Damage (0)
Damagetype "ElectricTypeC"
scale 4.0
States
{
Spawn:
ASEX A 0
ASEX A 1 A_Explode(2,512,0,0,256) //20
ASEX BBCCCDDDDEEEEEFFFFFF 1
stop
}
}

Actor OMHydroCannon 
{
PROJECTILE
+BLOODSPLATTER
+DONTBLAST
+THRUGHOST
Radius 24
Height 48
Speed 96
Damage (15) // 150
DamageType "WaterType"
Scale 2.5
States
{
Spawn:
HCNN B 0
HCNN B 1
HCNN B 0 A_SpawnItemEx("OMHydroTrail")
HCNN B 0 A_PlaySoundEx("weapon/waterwave","Voice")
HCNN B 1 
HCNN B 0 A_SpawnItemEx("OMHydroTrail")
HCNN B 0
Loop
}
}

actor OMHydroTrail
{
+CLIENTSIDEONLY
+NOINTERACTION
scale 6.5
states
{
Spawn:
TNT1 A 0
AIWA A 1 A_SpawnItem("HydroTrailBurstFX",random(-32,32),random(-32,32),random(-32,32))
AIWA A 0 
AIWA B 1 A_SpawnItem("HydroTrailBurstFX",random(-32,32),random(-32,32),random(-32,32))
AIWA B 0 
AIWA C 1 A_SpawnItem("HydroTrailBurstFX",random(-32,32),random(-32,32),random(-32,32))
AIWA C 0 
AIWA D 1 A_SpawnItem("HydroTrailBurstFX",random(-32,32),random(-32,32),random(-32,32))
AIWA D 0 
AIWA ABCD 1 A_FadeOut(0.2)
stop
}
}

actor HydroTrailBurstFX
{
+CLIENTSIDEONLY
+NOINTERACTION
scale 1.0
states
{
Spawn:
TNT1 A 0
WPLS E 0
WPLS E 1 A_PlaySoundEx("misc/waterslide","Voice2")
WPLS FGHIJKL 1
stop
}
}

Actor FlashCannonFXSpawner : EvilRoboFistCharger
{
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_SpawnItemEx("FlashCannonFXS",random(-256,256),random(-256,256),random(-256,256))
Stop
}
}

Actor FlashCannonFXS : EvilRoboFistCharger
{
States
{
Spawn:
TNT1 A 0
TNT1 A 1 A_FaceTarget
TNT1 A 0 A_CustomMissile("FlashCannonFX",0,0,0,0)
Stop
}
}

Actor FlashCannonFX : EvilRoboFistChargeFX
{
Translation "0:255=4:4"
RenderStyle ADD
states
{
Spawn:
GAMA PQPQ 2
Stop
}
}

Actor ZapCannonFXSpawner : EvilRoboFistCharger
{
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_SpawnItemEx("ZapCannonFXS",random(-256,256),random(-256,256),random(-256,256))
Stop
}
}

Actor ZapCannonFXS : EvilRoboFistCharger
{
States
{
Spawn:
TNT1 A 0
TNT1 A 1 A_FaceTarget
TNT1 A 0 A_CustomMissile("ZapCannonFX",0,0,0,0)
Stop
}
}

Actor ZapCannonFX : EvilRoboFistChargeFX
{
Translation "0:255=228:228"
RenderStyle ADD
states
{
Spawn:
GAMA PQPQ 2
Stop
}
}

Actor HydroCannonFXSpawner : EvilRoboFistCharger
{
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_SpawnItemEx("HydroCannonFXS",random(-256,256),random(-256,256),random(-256,256))
Stop
}
}

Actor HydroCannonFXS : EvilRoboFistCharger
{
States
{
Spawn:
TNT1 A 0
TNT1 A 1 A_FaceTarget
TNT1 A 0 A_CustomMissile("HydroCannonFX",0,0,0,0)
Stop
}
}

Actor HydroCannonFX
{
PROJECTILE
+THRUGHOST
speed 32
scale 2.5
states
{
Spawn:
GAMA PQPQ 2
Stop
}
}