actor TsukiTroll : ClassBaseCSCC
{
player.displayname "TrollyomaruZero"
player.soundclass "trollol"
player.forwardmove 0.7, 0.7
player.sidemove 0.6, 0.6
player.startitem "TsukiTrollWep"
//player.startitem "GlassHealthBar"
Player.startitem "TsukiTrollClassAmmo", 28
player.maxhealth 70
health 70
States
{
Spawn:
HOPM A 0
HOPM B 1 
HOPM A 1 
Goto Spawn+2
See:
HOPM BCDE 5 
Goto Spawn
Missile:
HOPM F 5 
HOPM G 4 
goto Spawn
Pain.CopyAlt:
Pain.CopyMain:
HOPM H 0 A_SpawnItemEx("TsukiTrollCopyHitMain",1)
goto pain+1
Death:
HOPM H 0 A_GiveInventory("ClassDeathPickup",1)
HOPM H 0 A_KillChildren
goto DeathFrames
Death.Backstab:
HOPM H 0 SetPlayerProperty(0, 0, 4)
HOPM H 0 A_TakeInventory("PharaohCharge",999)   
HOPM H 0 A_NoBlocking
HOPM H 0 A_GiveInventory("CutterFlag",999)
HOPM H 0 A_GiveInventory("IsDead",1)
HOPM H 0 A_Stop
HOPM H 0 A_GiveToTarget("KilledMeStock",1)
HOPM H 1 A_GiveToTarget("KilledMe",1)
HOPM H 1// A_GiveToTarget("ClearDisguise",1)
HOPM H 0 //A_GiveToTarget("DisguiseOn",1)
HOPM H 0 //A_GiveToTarget("TrollDisguise",1)
HOPM H 0 ACS_ExecuteAlways(775,0,354)
goto BackstabFrames

DeathFrames:
HOPM H 1 A_GiveToTarget("KilledMe",1)
HOPM H 19 ACS_ExecuteAlways(999,0,0)
goto DeathBoom
DeathBoom:
PLAY H 0 A_SpawnItemEx("RageSpectate")
PLAY Z -1
wait
Death.Beam:
Death.instagib:
HOPM H 0 A_KillChildren
PLAY Z 1 SetPlayerProperty(0, 0, 4)
PLAY Z 0 A_GiveInventory("CutterFlag",999)
HOPM H 0 A_GiveToTarget("KilledMe",1)
goto DeathBoom
Death.Falling:
HOPM H 0 A_KillChildren
HOPM H 0 SetPlayerProperty(0, 0, 4)
HOPM H 0 A_TakeInventory("PharaohCharge",999)   
HOPM H 0 A_NoBlocking
HOPM H 0 A_GiveInventory("CutterFlag",999)
PLAY H 0 A_SpawnItemEx("RageSpectate")
PLAY Z 1 
PLAY Z 1 A_Stop
PLAY Z 1 ACS_ExecuteAlways(999,0,0)
PLAY Z -1
wait
Death.WindStorm:
Death.GravityHold:
HOPM H 0 SetPlayerProperty(0, 0, 4)
HOPM H 0 A_ChangeFlag("NOINTERACTION", 1)
HOPM H 0 A_TakeInventory("WeaponCharge",999)
HOPM H 0 A_NoBlocking
HOPM H 0 A_TakeInventory("CutterFlag",999)
HOPM H 0 A_GiveInventory("IsDead",1)
HOPM H 0 A_Stop
HOPM H 0 A_GiveToTarget("KilledMeStock",1)
HOPM H 1 A_GiveToTarget("KilledMe",1)
HOPM H 0 ACS_ExecuteAlways(999,0,0)
HOPM H 0 SetPlayerProperty(0, 0, 4)
RiseMyMegaman:
HOPM H 1 ThrustThingZ(0,10,0,1)
HOPM H 0 A_JumpIf(ceilingz-z<64, "DeathBoom")
HOPM H 0 A_GiveInventory("Cutterflag", 1)
HOPM H 0 A_JumpIfInventory("CutterFlag", 35, "DeathBoom")
Goto RiseMyMegaman
Death.Backstab:
HOPM H 0 SetPlayerProperty(0, 0, 4)
HOPM H 0 A_TakeInventory("PharaohCharge",999)   
HOPM H 0 A_NoBlocking
HOPM H 0 A_GiveInventory("CutterFlag",999)
HOPM H 0 A_GiveInventory("IsDead",1)
HOPM H 0 A_Stop
HOPM H 0 A_GiveToTarget("KilledMeStock",1)
HOPM H 1 A_GiveToTarget("KilledMe",1)
HOPM H 1 A_GiveToTarget("ClearDisguise",1)
HOPM H 0 A_GiveToTarget("DisguiseOn",1)
HOPM H 0 A_GiveToTarget("TrollDisguise",1)
HOPM H 0 ACS_ExecuteAlways(775,0,354)
goto BackstabFrames
}
}



actor TsukiTrollCopyPickupMain : CustomInventory
{
inventory.amount 1
inventory.maxamount 1
States
{
Spawn:
TNT1 A 0
stop
Pickup:
TNT1 A 0 A_GiveToTarget("TsukiTrollMorphItem",1)
stop
}
}

actor TsukiTrollCopyHitMain
{
Height 0
Radius 0
+NOINTERACTION
-SOLID
+NOGRAVITY
+MISSILE
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_GiveToTarget("TsukiTrollCopyPickupMain",1)
stop
}
}


actor TsukiTrollMorphItem : CustomInventory
{
States
{
Spawn:
TNT1 A 0
stop
Pickup:
TNT1 A 0 ACS_ExecuteAlways(CSACS_COPYMORPH, 0, 18)
stop
}
}

actor TsukiTrollMorph : TsukiTroll
{
+NOSKIN
player.morphweapon "TsukiTrollWep"
player.soundclass "BestClassEver"
States
{
Pain:
YOKM H 0 A_ScaleVelocity(0.75)
YOKM H 0 
Goto "ClassBaseCSCC::Pain+2"
}
}
