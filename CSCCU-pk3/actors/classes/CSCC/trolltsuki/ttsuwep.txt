actor TsukiTrollWep : MegaBuster
{
//Weapon.AmmoUse 21
Weapon.AmmoUse 14
Weapon.AmmoGive 28
Weapon.SlotNumber 5
weapon.ammotype "TsukiTrollClassAmmo"
Obituary "%o was zerowned by %k's Fake Tsuki."
Inventory.Pickupmessage "You got Tsukiyomaru Zero's cloning device! ...Useless!"
inventory.pickupsound "weapon/weaponup"
+WEAPON.AMMO_OPTIONAL
+WEAPON.ALT_AMMO_OPTIONAL
+WEAPON.CHEATNOTWEAPON
+INVENTORY.UNDROPPABLE
inventory.icon "TNT1A0"
Scale 2.0
States
{
Spawn:
TSUK Z 0
//TSUK Z 1 A_SpawnItemEx("CopyVisionWep")
stop
Ready: //Normal
TSUK A 0 ACS_ExecuteAlways(998,0,354) 
TSUK A 0 A_SetTranslucent(1.0,0)
TSUK A 6 A_WeaponReady(WRF_NOSWITCH)//10
TSUK A 0 A_GiveInventory("TsukiTrollClassAmmo", 1)
Goto Ready+1
Ready2: //RageSpec Active
TSUK A 0 A_SetTranslucent(0.0,0)
TSUK A 6 A_WeaponReady(WRF_NOSWITCH)
TSUK A 0 A_TakeInventory("TsukiTrollClassAmmo", 1)
TSUK A 0 A_JumpIfInventory("TsukiTrollClassAmmo",1,"Ready2")
Goto RageSpecDisengage
Deselect:
TNT1 A 0 A_SelectWeapon("TsukiTrollWep")
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
TSUK B 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
TSUK B 1 A_Raise
Loop
Fire:
TSUK A 0 A_JumpIfInventory("SpecFlag",1,"RageSpecDisengage")
TSUK A 0 A_JumpIfNoAmmo("NoAmmo")
TSUK A 0 A_TakeInventory("TsukiTrollClassAmmo", 14)
//TSUK A 0 A_JumpIf(ACS_ExecuteWithResult(143,0)==0,"BlueClone")
//TSUK A 0 A_JumpIf(ACS_ExecuteWithResult(143,0)==1,"RedClone")
//TSUK A 0 A_JumpIf(ACS_ExecuteWithResult(143,0)==2,"OrangeClone")
//TSUK A 0 A_JumpIf(ACS_ExecuteWithResult(143,0)==3,"PurpleClone")
TSUK BC 2 A_PlaySoundEx("item/refill","Voice")
TSUK D 35 A_FireCustomMissile("TsukiCloneSpawner",0,0,8,0,0,0)
//TSUK D 35 A_SpawnItemEx("TsukiCloneTsuki",0,0,10,5,0,5)
TSUK B 0 A_Refire
TSUK D 10 A_WeaponReady(WRF_NOPRIMARY|WRF_NOSWITCH)
TSUK CB 2 A_WeaponReady(WRF_NOPRIMARY|WRF_NOSWITCH)
TSUK B 0 A_Refire
Goto Ready+1
Hold:
TSUK A 0 A_JumpIfInventory("TsukiTrollClassAmmo",14,"Fire2")
Goto NoAmmo
Fire2:
TSUK A 0 A_TakeInventory("TsukiTrollClassAmmo", 14)
//TSUK A 0 A_JumpIf(ACS_ExecuteWithResult(143,0)==0,"BlueClone")
//TSUK A 0 A_JumpIf(ACS_ExecuteWithResult(143,0)==1,"RedClone")
//TSUK A 0 A_JumpIf(ACS_ExecuteWithResult(143,0)==2,"OrangeClone")
//TSUK A 0 A_JumpIf(ACS_ExecuteWithResult(143,0)==3,"PurpleClone")
TSUK BC 2 A_PlaySoundEx("item/refill","Voice")
TSUK D 35 A_FireCustomMissile("TsukiCloneSpawner",0,0,8,0,0,0)

//TSUK D 35 A_SpawnItemEx("TsukiCloneTsuki",0,0,10,5,0,5)
TSUK B 0 A_Refire
TSUK D 10 A_WeaponReady(WRF_NOPRIMARY|WRF_NOSWITCH)
TSUK CB 2 A_WeaponReady(WRF_NOPRIMARY|WRF_NOSWITCH)
TSUK B 0 A_Refire
Goto Ready+1
BlueClone:
TSUK BC 2 A_PlaySoundEx("item/refill","Voice")
TSUK D 35 A_SpawnItemEx("TsukiCloneBlue",0,0,10,5,0,5)
TSUK B 0 A_Refire
TSUK D 10 A_WeaponReady(WRF_NOPRIMARY|WRF_NOSWITCH)
TSUK CB 2 A_WeaponReady(WRF_NOPRIMARY|WRF_NOSWITCH)
TSUK B 0 A_Refire
Goto Ready+1
RedClone:
TSUK BC 2 A_PlaySoundEx("item/refill","Voice")
TSUK D 35 A_SpawnItemEx("TsukiCloneRed",0,0,10,5,0,5)
TSUK B 0 A_Refire
TSUK D 10 A_WeaponReady(WRF_NOPRIMARY|WRF_NOSWITCH)
TSUK CB 2 A_WeaponReady(WRF_NOPRIMARY|WRF_NOSWITCH)
TSUK B 0 A_Refire
Goto Ready+1
OrangeClone:
TSUK BC 2 A_PlaySoundEx("item/refill","Voice")
TSUK D 35 A_SpawnItemEx("TsukiCloneOrange",0,0,10,5,0,5)
TSUK B 0 A_Refire
TSUK D 10 A_WeaponReady(WRF_NOPRIMARY|WRF_NOSWITCH)
TSUK CB 2 A_WeaponReady(WRF_NOPRIMARY|WRF_NOSWITCH)
TSUK B 0 A_Refire
Goto Ready+1
PurpleClone:
TSUK BC 2 A_PlaySoundEx("item/refill","Voice")
TSUK D 35 A_SpawnItemEx("TsukiClonePurple",0,0,10,5,0,5)
TSUK B 0 A_Refire
TSUK D 10 A_WeaponReady(WRF_NOPRIMARY|WRF_NOSWITCH)
TSUK CB 2 A_WeaponReady(WRF_NOPRIMARY|WRF_NOSWITCH)
TSUK B 0 A_Refire
Goto Ready+1
Altfire:
TSUK B 0 A_JumpIfInventory("SpecFlag",1,"RageSpecDisengage")
TSUK B 0 A_JumpIfNoAmmo("NoAmmo")
TSUK B 1 A_JumpIfInventory("TsukiTrollClassAmmo", 21, "RageSpecEngage")//14
Goto Ready+1
RageSpecEngage:
TSUK A 0 A_ChangeFlag("SOLID",0)
//TSUK A 0 A_ChangeFlag("SHOOTABLE",0)
TSUK A 0 A_ChangeFlag("PICKUP",0)
TNT1 A 0 A_GiveInventory("InvisibleFlag",1)
TSUK A 0 A_SetTranslucent(0.0,0)
TSUK A 0 A_GiveInventory("SpecFlag", 1)
TSUK A 15 A_SpawnItemEx("RageSpectate")
Goto Ready2
RageSpecDisengage:
TSUK A 1 A_SpawnItemEx("RespawnChecker",0,0,30,0,0,0,0,SXF_NoCheckPosition)
TSUK A 1
TSUK A 1 A_JumpIfInventory("RespawnBlock",1,"Denied")
TSUK A 0 A_TakeInventory("RespawnBlock",1)
TSUK A 0 A_ChangeFlag("SOLID",1)
//TSUK A 0 A_ChangeFlag("SHOOTABLE",1)
TSUK A 0 A_ChangeFlag("PICKUP",1)
TNT1 A 0 A_TakeInventory("InvisibleFlag",1)
TSUK A 0 A_SetTranslucent(1.0,0)
TSUK A 0 A_TakeInventory("TsukiTrollClassAmmo", 14)
TSUK A 0 A_TakeInventory("SpecFlag", 1)
TSUK A 1 A_SpawnItemEx("TeleportFog")
TSUK A 20 A_Stop
Goto Ready+1
Denied:
TSUK A 1 A_TakeInventory("TsukiTrollClassAmmo", 5)
Goto RageSpecDisengage
NoAmmo:
TSUK A 1 ACS_Execute(979,0)
Goto Ready+1
}
}

actor TsukiTrollClassAmmo : Ammo
{
+INVENTORY.IGNORESKILL
inventory.amount 1
inventory.maxamount 28
}

actor SpecFlag : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor RespawnBlock : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor TsukiCloneSpawner
{
PROJECTILE
+NOINTERACTION
+DONTBLAST
+NOCLIP
Damage(0)
Height 1
Radius 1
Speed 0
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_SpawnItemEx("TsukiClone",48,0,-32,0,0,0,0,0,0)
stop
}
}

actor TsukiClone
{
PROJECTILE
//RenderStyle "Translucent"
//Alpha 0.90
scale 2.5
+THRUGHOST
+RIPPER
+NOCLIP
+DONTBLAST
Radius 32
Height 32
Damage (0)
reactiontime 12
States
{
Spawn:
TNT1 A 0
TNT1 A 0 
TNT1 A 0 ACS_ExecuteAlways(259, 0, 0)
HOPM A 2
Goto Shooting
Shooting:
HOPM A 0 A_GiveToTarget("TargetMarker", 1)
HOPM A 0 ACS_ExecuteAlways(989, 0, ACS_ExecuteWithResult(257)+100, 32)
HOPM A 1
HOPM A 0 A_PlaySoundEx("misc/devilfire","Voice")
HOPM F 8 A_CustomMissile("TsukiShot",32,0,0,2,-pitch)
HOPM A 0 A_GiveToTarget("TargetMarker", 1)
HOPM A 0 ACS_ExecuteAlways(989, 0, ACS_ExecuteWithResult(257)+100, 32)
HOPM A 4
HOPM A 0 A_JumpIfInTargetInventory("IsDead", 1, "Death")
HOPM A 4
HOPM A 0 A_JumpIfInTargetInventory("InvisibleFlag", 1, "Extend")
HOPM A 0 A_Countdown
Loop
Extend:
HOPM A 0 A_GiveToTarget("TargetMarker", 1)
HOPM A 0 ACS_ExecuteAlways(989, 0, ACS_ExecuteWithResult(257)+100, 32)
HOPM A 1
HOPM A 0 A_PlaySoundEx("misc/devilfire","Voice")
HOPM F 8 A_CustomMissile("TsukiShot",32,0,0,2,-pitch)
HOPM A 0 A_GiveToTarget("TargetMarker", 1)
HOPM A 0 ACS_ExecuteAlways(989, 0, ACS_ExecuteWithResult(257)+100, 32)
HOPM A 4
HOPM A 0 A_JumpIfInTargetInventory("IsDead", 1, "Death")
HOPM A 4 //A_Countdown
Goto Shooting
Redirect:
COPY CC 1 A_GiveToTarget("TargetMarker", 1)
COPY C 0 ACS_ExecuteAlways(989, 0, ACS_ExecuteWithResult(257)+100, 32)
COPY C 0 A_TakeFromTarget("CopyVisionRedirect", 9)
goto Shooting
Death:
HOPM H 19
HOPM H 1 A_SpawnItemEx("RageSpectate")
stop
}
}

/*
actor TsukiClone
{
Health 35
MONSTER
//+MISSILE
+DONTBLAST
+SKYEXPLODE
-SOLID
-COUNTKILL
+FRIENDLY
+SHOOTABLE
+NOBLOOD
+NEVERRESPAWN
speed 0
scale 2.5
+MISSILEMORE
+MISSILEEVENMORE
Radius 12
Height 56
reactiontime 256
meleerange 20
states
{
Spawn:
HOPM A 1 
Look:
HOPM A 0 A_ClearTarget
HOPM AA 6
HOPM A 0 A_GiveInventory("CutterFlag",2)
HOPM A 0 A_JumpIfInventory("CutterFlag",48,"Death")
Goto See
See:
HOPM A 0  A_TakeInventory("NotShootingAnything",4)//A_ClearTarget
HOPM A 12 A_Chase
HOPM A 0 A_JumpIfTargetInLOS ("Missile", 0, 0)
HOPM A 0 A_GiveInventory("CutterFlag",2)
HOPM A 0 A_JumpIfInventory("CutterFlag",48,"Death")
loop
Missile:
METT F 0 A_JumpIfInTargetInventory("InvisibleFlag",1,"ClearTarget")
HOPM A 1 A_FaceTarget
HOPM A 0 A_JumpIfInventory("CutterFlag",35,"Death")
HOPM A 0 A_PlaySoundEx("misc/devilfire","Voice")
HOPM F 8 A_CustomMissile("TsukiShot",16,0,0,0)
HOPM A 4 A_GiveInventory("CutterFlag",2)
HOPM A 0 A_GiveInventory("NotShootingAnything",1)
HOPM A 0 A_JumpIfInventory ("NotShootingAnything", 4, "ClearTarget")
HOPM A 0 A_JumpIfTargetInLOS ("Missile", 0, 0)
HOPM A 4 A_ClearTarget
Goto See 
ClearTarget:
HOPM A 4 A_ClearTarget
Goto See
Pain:
HOPM H 0 A_Stop
HOPM H 0 A_Pain
PLAY H 0 SetPlayerProperty(0,0,4)
HOPM H 0 //A_GiveInventory("TempInvince",1)
HOPM H 0 //SetPlayerProperty(0, 1, 4)
HOPM H 1 A_SpawnItem("PainFX",0,3)
HOPM H 1 A_Recoil(1)
HOPM H 1 A_SpawnItem("PainFX",0,3)
HOPM H 1 //A_Recoil(1)
HOPM H 1 A_SpawnItem("PainFX",0,3)
HOPM H 1 //A_Recoil(1)
HOPM H 1 A_SpawnItem("PainFX",0,3)
HOPM H 1 //A_Recoil(1)
HOPM H 1 A_SpawnItem("PainFX",0,3)
HOPM H 1 //A_Recoil(1)
HOPM H 1 A_SpawnItem("PainFX",0,3)
HOPM H 1 //A_Recoil(1)
HOPM H 1 A_SpawnItem("PainFX",0,3)
HOPM H 1 //A_Recoil(1)
HOPM H 1 A_SpawnItem("PainFX",0,3)
HOPM H 1 //A_Recoil(1)
HOPM H 1 A_SpawnItem("PainFX",0,3)
HOPM H 1 //A_Recoil(1)
HOPM H 1 A_SpawnItem("PainFX",0,3)
HOPM H 1 //A_Recoil(1)
HOPM H 0 //SetPlayerProperty(0, 0, 4)
HOPM H 0 SetPlayerProperty(0,0,1)
PLAY H 0 SetPlayerProperty(0,0,4)
Goto Spawn
Death.Beam:
Death.instagib:
PLAY H 0 A_TakeInventory("TsukiTrollWep")
PLAY Z 1 SetPlayerProperty(0, 0, 4)
PLAY H 0 A_SpawnItemEx("RageSpectate")
PLAY H 0 A_Die
PLAY Z -1
stop
Death:
HOPM H 0 SetPlayerProperty(0, 0, 4)
HOPM H 0 A_TakeInventory("PharaohCharge",999)   
HOPM H 0 A_NoBlocking
HOPM H 0 A_GiveInventory("CutterFlag",999)
HOPM H 0 A_Stop
PLAY H 0 A_TakeInventory("TsukiTrollWep")
HOPM H 19
HOPM H 0 SetPlayerProperty(0, 0, 4)
PLAY H 0 A_SpawnItemEx("RageSpectate")
PLAY H 0 A_Die
PLAY Z -1
stop
Death.Falling:
HOPM H 0 SetPlayerProperty(0, 0, 4)
HOPM H 0 A_TakeInventory("PharaohCharge",999)   
HOPM H 0 A_NoBlocking
HOPM H 0 A_GiveInventory("CutterFlag",999)
PLAY H 0 A_TakeInventory("TsukiTrollWep")
PLAY H 0 A_SpawnItemEx("RageSpectate")
PLAY Z 1 //A_PlayerScream
PLAY Z 1 A_Stop
PLAY Z 1
PLAY H 0 A_Die
PLAY Z -1
stop
}
}*/




actor TsukiCloneTsuki : TsukiClone
{
translation "192:192=228:228", "198:198=95:95"
}

actor TsukiCloneBlue : TsukiClone
{
translation "192:192=192:192", "198:198=198:198" //Redundant translation for consistency
DesignatedTeam 0
}

actor TsukiCloneRed : TsukiClone
{
translation "192:192=54:54", "198:198=42:42"
DesignatedTeam 1
}

actor TsukiCloneOrange : TsukiClone
{
translation "192:192=229:229", "198:198=220:220"
DesignatedTeam 2
}

actor TsukiClonePurple : TsukiClone
{
translation "192:192=64:64", "198:198=62:62"
DesignatedTeam 3
}

actor NotShootingAnything : Inventory
{
inventory.amount 1
inventory.maxamount 4
}

actor TsukiShot : TrebleShot
{
obituary "%o was zerowned by %k's Fake Tsuki."
Damagetype "TsukiClone"
Damage(15)
states
{
Crash:
XDeath:
TNT1 A 0 A_TakeFromTarget("NotShootingAnything", 4)
Stop
Death:
TNT1 A 0
Stop
}
}

actor RageSpectate : RedParticleFountain
{
+CLIENTSIDEONLY
States
{
Spawn:
TNT1 A 4 A_SpawnItemEx("RageSpectateParticle")
TNT1 A 0 A_SpawnItemEx("RageSpectateParticle")
TNT1 A 4 A_SpawnItemEx("RageSpectateParticle")
TNT1 A 0 A_SpawnItemEx("RageSpectateParticle")
TNT1 A 4 A_SpawnItemEx("RageSpectateParticle")
TNT1 A 0 A_SpawnItemEx("RageSpectateParticle")
TNT1 A 4 A_SpawnItemEx("RageSpectateParticle")
TNT1 A 0 A_SpawnItemEx("RageSpectateParticle")
TNT1 A 4 A_SpawnItemEx("RageSpectateParticle")
TNT1 A 0 A_SpawnItemEx("RageSpectateParticle")
stop
}
}

actor RageSpectateParticle : RageSpectate
{
+CLIENTSIDEONLY
States
{
Spawn:
TNT1 A 6
stop
}
}

actor RespawnChecker
{
PROJECTILE
+LOOKALLAROUND
+SKYEXPLODE
+DONTBLAST
+FORCEXYBILLBOARD
+PAINLESS
Speed 0
Damage (0)
radius 30
height 30
scale 2.5
States
{
Spawn:
TNT1 A 1
goto death
XDeath:
TNT1 A 0 A_GiveToTarget("RespawnBlock",1)
stop
Death:
TNT1 A 0 A_TakeFromTarget("RespawnBlock",1)
stop
}
}

actor TsukiTrollBot : TsukiTrollWep
{
States
{
Deselect:
TNT1 A 0 A_SelectWeapon("TrollSentry")
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
TNT1 A 1 A_Lower
Loop
Fire:
TSUK A 0 A_JumpIfNoAmmo("NoAmmo")
TSUK A 0 A_TakeInventory("TsukiTrollClassAmmo", 14)
TSUK A 0 A_JumpIf(ACS_ExecuteWithResult(143,0)==0,"BlueClone")
TSUK A 0 A_JumpIf(ACS_ExecuteWithResult(143,0)==1,"RedClone")
TSUK A 0 A_JumpIf(ACS_ExecuteWithResult(143,0)==2,"OrangeClone")
TSUK A 0 A_JumpIf(ACS_ExecuteWithResult(143,0)==3,"PurpleClone")
TSUK BC 2 A_PlaySoundEx("item/refill","Voice")
TSUK D 35 A_SpawnItemEx("TsukiCloneTsuki",0,0,10,5,0,5)
TSUK B 0 A_Refire
Goto Ready+1
NoAmmo:
TSUK A 10 A_GiveInventory("TsukiTrollClassAmmo", 1)
goto Ready+1
}
}