actor AirTileShotgunWep : BaseMM8BDMWep
{
Weapon.AmmoUse 1
Weapon.AmmoGive 50
Weapon.SlotNumber 1
scale 2.0
Obituary "%o's eyes were burned by %k's Air Tile Shotgun."
Inventory.Pickupmessage "!"
weapon.ammotype "AirTileAmmo"
+WEAPON.AMMO_OPTIONAL
+WEAPON.DONTBOB
DropItem "AirTileShotgunWepCS"
States
{
Spawn:
TNT1 A 0
stop
Ready:
AMTI C 0 ACS_ExecuteAlways(998,0,351)
AMTI C 0 A_TakeInventory("AirTileCharge",999)
AMTI C 3 A_WeaponReady
AMTI C 0 A_GiveInventory("AirTileAmmo",2)
AMTI C 4
Goto Ready+2
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_LOWER
AMTI C 1 A_LOWER
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
AMTI C 1 A_Raise
Loop
Fire:
AMTI C 0 A_JumpIfInventory("IsBot", 1, "BotCheck")
AMTI C 0 A_JumpIfNoAmmo("Hold")
AMTI C 0 A_PlaySoundEx("weapon/airshooter","Weapon")
AMTI C 0 A_FireCustomMissile("AirTileSG1",0,0,8,0)
AMTI C 0 A_FireCustomMissile("AirTileSG1",-15,0,8,0)
AMTI C 0 A_FireCustomMissile("AirTileSG1",15,0,8,0)
AMTI EDC 2 A_TakeInventory("AirTileCharge",999)
AMTI C 7
AMTI C 1 A_Refire
goto Ready+2
BotCheck:
AMTI C 0 A_Jump(12, "AltFire")
AMTI C 0 A_JumpIfNoAmmo("Hold")
AMTI C 0 A_PlaySoundEx("weapon/airshooter","Weapon")
AMTI C 0 A_FireCustomMissile("AirTileSG1",0,0,8,0)
AMTI C 0 A_FireCustomMissile("AirTileSG1",-15,0,8,0)
AMTI C 0 A_FireCustomMissile("AirTileSG1",15,0,8,0)
AMTI EDC 2 A_TakeInventory("AirTileCharge",999)
AMTI C 7
AMTI C 1 A_Refire
goto Ready+2
Fire2:
AMTI C 0 A_PlaySoundEx("weapon/airshooter","Weapon")
AMTI C 0 A_FireCustomMissile("AirTileSG1",0,0,8,0)
AMTI C 0 A_FireCustomMissile("AirTileSG1",-15,0,8,0)
AMTI C 0 A_FireCustomMissile("AirTileSG1",15,0,8,0)
AMTI EDC 2 A_TakeInventory("AirTileCharge",999)
AMTI C 7
AMTI C 1 A_Refire
Goto Ready+1
Fire3:
AMTI C 0
AMTI C 0 A_TakeInventory("AirTileCharge",999)
AMTI C 0 A_PlaySoundEx("weapon/airshooter","Weapon")
AMTI C 0 A_FireCustomMissile("AirTileSG2",0,0,8,0)
AMTI C 0 A_FireCustomMissile("AirTileSG2",-15,0,8,0)
AMTI C 0 A_FireCustomMissile("AirTileSG2",15,0,8,0)
AMTI C 0 A_FireCustomMissile("AirTileSG2",-30,0,8,0)
AMTI C 0 A_FireCustomMissile("AirTileSG2",30,0,8,0)
AMTI C 0 A_FireCustomMissile("AirTileSG2",45,0,8,0)
AMTI FE 3
AMTI C 14
AMTI C 0 A_Refire
goto Ready+1
Hold:

AMTI C 0 A_JumpIfInventory("AirTileCharge",18,"Charge")
AMTI D 1 A_GiveInventory("AirTileCharge",1)
AMTI C 0 A_Refire
Goto Ready+1
BotCheck:
AMTI C 0 ACS_ExecuteAlways(974,0)
Goto Charge3
Charge:
AMTI C 0 A_JumpIfInventory("AirTileCharge",19,"Charge1")
AMTI D 1 
AMTI C 0 A_PlaySoundEx("weapon/coilstart","Weapon")
Goto Charge1
Charge1:
AMTI J 0 A_JumpIfInventory("AirTileCharge",32,"Charge2")
AMTI D 1 A_GiveInventory("AirTileCharge",1)
AMTI H 2
AMTI H 0 A_Refire
Goto Fire2
Charge2:
AMTI D 1 A_GiveInventory("AirTileCharge",1)
AMTI D 0 A_JumpIfInventory("AirTileCharge",33,"BotCheck")
AMTI C 0 A_PlaySoundEx("weapon/coilcharge","Weapon")
AMTI C 0
AMTI F 0
AMTI F 1
AMTI G 1
AMTI H 2
AMTI C 0 A_Refire
Goto Fire3
Charge3:
AMTI C 0 A_PlaySoundEx("weapon/coilcharge","Weapon")
AMTI C 0
AMTI F 0
AMTI F 1
AMTI G 1
AMTI H 2
AMTI C 0 A_Refire
Goto Fire3
AltFire:
AMTI C 1 A_JumpIfInventory("AirTileAmmo",50,"WaveWave")
goto Ready+1
WaveWave:
AMTI C 0
AMTI C 1 A_SpawnItemEx("AirTileWaveBegin",30,70,0)
AMTI C 1 A_SpawnItemEx("AirTileWaveBegin",30,-70,0)
AMTI C 1 A_TakeInventory("AirTileAmmo",50)
AMTI C 10
goto Ready+1
NoAmmo:
AMTI A 1 ACS_Execute(979,0)
Goto Ready+1
}
}

actor AirTileCharge : Inventory
{
inventory.amount 1
inventory.maxamount 52
}

actor AirTileAmmo : Ammo
{
inventory.amount 1
inventory.maxamount 100
}

actor AirTileSG1
{
Obituary "%o's eyes were burned by %k's Air Tile Shotgun."
PROJECTILE
Radius 12
Height 20
Speed 22
scale 2.5
damagetype "AirmanTile"
damage (16)
States
{
Spawn:
AMTI A 1 
loop
Death:
stop 
}
}

actor AirTileSG2 : AirTileSG1
{
damage (14)
}

actor AirTileWaveProj
{
PROJECTILE
+RIPPER
Obituary "%o was ran over \cgAND \c-had his eyes burned by %k's Air Tile Wave."
Radius 12
Height 20
scale 2.5
damagetype "AirmanTile"
damage (4)  
-NoGravity
States
{
Spawn: 
AMTI A 1
AMTI A 1 A_PlaySoundEx("weapon/airshooter","Voice")
AMTI A 1 ThrustThingZ(0,30,0,0)
AMTI A 1
AMTI A 1
goto Spawn+4
Death:
stop 
}
}

Actor AirTileWaveBegin
{
PROJECTILE
+RIPPER
-NOGRAVITY
+FLOORHUGGER
Damage (0)
Radius 1
Height 20
scale 2.5
States
{
Spawn:
TNT1 A 0
TNT1 A 1 A_SpawnItemEx("AirTileWaveProj",150,0,20)
TNT1 A 5
TNT1 A 1 A_SpawnItemEx("AirTileWaveProj",300,0,20)
TNT1 A 5
TNT1 A 1 A_SpawnItemEx("AirTileWaveProj",450,0,20)
TNT1 A 5
TNT1 A 1 A_SpawnItemEx("AirTileWaveProj",600,0,20)
TNT1 A 5
TNT1 A 1 A_SpawnItemEx("AirTileWaveProj",750,0,20)
TNT1 A 5
TNT1 A 1 A_SpawnItemEx("AirTileWaveProj",900,0,20)
TNT1 A 5
TNT1 A 1 A_SpawnItemEx("AirTileWaveProj",1050,0,20)
TNT1 A 5
TNT1 A 1 A_SpawnItemEx("AirTileWaveProj",1200,0,20)
TNT1 A 5
TNT1 A 1 A_SpawnItemEx("AirTileWaveProj",1350,0,20)
TNT1 A 5
TNT1 A 1 A_SpawnItemEx("AirTileWaveProj",1500,0,20)
TNT1 A 5
TNT1 A 1 A_SpawnItemEx("AirTileWaveProj",1650,0,20)
TNT1 A 5
TNT1 A 1 A_SpawnItemEx("AirTileWaveProj",1800,0,20)
TNT1 A 5
TNT1 A 1 A_SpawnItemEx("AirTileWaveProj",1950,0,20)
TNT1 A 5
TNT1 A 1 A_SpawnItemEx("AirTileWaveProj",2100,0,20)
TNT1 A 5
TNT1 A 1 A_SpawnItemEx("AirTileWaveProj",2250,0,20)
TNT1 A 5
TNT1 A 1 A_SpawnItemEx("AirTileWaveProj",2400,0,20)
TNT1 A 5
stop
}
}

//Airtilefountain stuff


actor AsplodeNow : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor KilledCount : INVENTORY
{
INVENTORY.AMOUNT 1
inventory.maxamount 9999
}

actor KilledMe2 : KilledMe replaces KilledMe
{
inventory.amount 1
inventory.maxamount 1
States
{
Spawn:
TNT1 A 1
loop
Pickup:
TNT1 A 0 A_GiveInventory("KilledCount",1)
TNT1 A 0 ACS_ExecuteAlways(203,0)
TNT1 A 0 ACS_ExecuteAlways(116,0)
TNT1 A 0 A_GiveInventory("KilledLog",1)
stop
}
}

actor KilledLog : Inventory
{
inventory.amount 1
inventory.maxamount 999
}

Actor AsplodeTrigger : CustomInventory
{
+INVBAR
+INVENTORY.UNDROPPABLE
Inventory.Maxamount 1
Inventory.Amount 1
inventory.icon "ASPICO"
States
{
Use:
TNT1 A 1
TNT1 A 0 A_PlaySoundEx("item/refill","Voice")
TNT1 A 1 A_GiveInventory("AsplodeNow",1)
stop
}
}

Actor AirTileFountain : CustomInventory
{
+INVBAR
+INVENTORY.UNDROPPABLE
Inventory.Maxamount 1
Inventory.Amount 1
inventory.icon "FOUNICO"
States
{
Use:
TNT1 A 1
TNT1 A 0 A_PlaySoundEx("item/refill","Voice")
TNT1 A 1 A_SpawnItemEx("FountainTrap",0,0,1)
stop
}
}


Actor FountainTrap
{
PROJECTILE
+RIPPER
+FLOORHUGGER
Speed 0
Scale 1.0
Damage (0)
ReactionTime 6
Radius 12
Height 20
States
{
Spawn:
AMTI I 1
AMTI I 35
AMTI I 0 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 35
AMTI I 0 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 35
AMTI I 0 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 35
AMTI I 0 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 35
AMTI I 0 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 35
AMTI I 0 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 35
AMTI I 0 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 1
goto RealActive
RealActive:
AMTI I 1 A_GiveToTarget("AsplodeTrigger",1)
goto RealActive2
RealActive2:
AMTI I 0 A_JumpIfInTargetInventory("AirTileFountain",1,"Death")
AMTI I 0 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 0 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 1 A_JumpifInTargetInventory("AsplodeNow",1,"Asplode")
Loop
Asplode:
AMTI I 1
AMTI I 0 A_JumpIfInTargetInventory("AirTileFountain",1,"Death")
AMTI I 0 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 0 A_PlaySoundEx("weapon/airshooter","Voice")
AMTI I 0 A_SpawnItemEx("FountainProj", random(0,50), 0, random(20,80), 15, 0, 0, 0)
AMTI I 1 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 5
AMTI I 0 A_PlaySoundEx("weapon/airshooter","Voice")
AMTI I 0 A_SpawnItemEx("FountainProj", random(0,50), 0, random(20,80), 15, 0, 0, 45)
AMTI I 1 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 5
AMTI I 0 A_PlaySoundEx("weapon/airshooter","Voice")
AMTI I 0 A_SpawnItemEx("FountainProj", random(0,50), 0, random(20,80), 15, 0, 0, 90)
AMTI I 1 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 5
AMTI I 0 A_PlaySoundEx("weapon/airshooter","Voice")
AMTI I 0 A_SpawnItemEx("FountainProj", random(0,50), 0, random(20,80), 15, 0, 0, 67)
AMTI I 1 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 5
AMTI I 0 A_PlaySoundEx("weapon/airshooter","Voice")
AMTI I 0 A_SpawnItemEx("FountainProj", random(0,50), 0, random(20,80), 15, 0, 0, 123)
AMTI I 1 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 5
AMTI I 0 A_PlaySoundEx("weapon/airshooter","Voice")
AMTI I 0 A_SpawnItemEx("FountainProj", random(0,50), 0, random(20,80), 15, 0, 0, 180)
AMTI I 1 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 5
AMTI I 0 A_PlaySoundEx("weapon/airshooter","Voice")
AMTI I 0 A_SpawnItemEx("FountainProj", random(0,50), 0, random(20,80), 15, 0, 0, 225)
AMTI I 1 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 5
AMTI I 0 A_PlaySoundEx("weapon/airshooter","Voice")
AMTI I 1 A_SpawnItemEx("FountainProj", random(0,50), 0, random(20,80), 15, 0, 0, 270)
AMTI I 1 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 5
AMTI I 1 A_JumpIfInTargetInventory("IsDead",1,"Death")
AMTI I 1 A_Countdown
loop
Death:
AMTI I 1
AMTI I 1 A_TakeFromTarget("AsplodeNow",1)
MMFX BCDE 2
stop
}
}

actor FountainProj
{
PROJECTILE
Obituary "%o was showered by %k's Air Tile Fountain"
Radius 12
Height 20
scale 2.5
damagetype "Air"
damage (1)  
-NoGravity
States
{
Spawn: 
AMTI A 1
AMTI A 1 A_PlaySoundEx("weapon/airshooter","Voice")
AMTI A 1
AMTI A 1
AMTI A 1
goto Spawn+4
Death:
NAPA EFGHIJKLMNOPQRS 2
TNT1 A 1 A_Explode(40,120,0)
AMTI A 0 A_PlaySoundEx("weapon/napalm","Voice")
stop
}
}