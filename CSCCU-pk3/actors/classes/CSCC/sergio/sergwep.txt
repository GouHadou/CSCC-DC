actor PsychicProwess : BaseMM8BDMWep
{
Weapon.AmmoUse 1
Weapon.AmmoGive 28
Weapon.SlotNumber 1
Obituary "%k snapped %o's mind with %p Psychic Prowess."
weapon.ammotype "PsychicAmmo"
Inventory.Pickupmessage "MY MIND. TO YOUR MIND."
inventory.pickupsound "weapon/weaponup"
+WEAPON.AMMO_OPTIONAL
+WEAPON.CHEATNOTWEAPON
+INVENTORY.UNDROPPABLE
Scale 2.0
States
{
Spawn:
CFWP Z 0
CFWP Z 1 
stop
Ready:
SERG A 0 ACS_ExecuteAlways(991,0,502)
SERG A 0 A_GunFlash
SERG A 1 A_WeaponReady
Goto Ready+2
Flash:
TNT1 A 10
TNT1 A 0 A_GiveInventory("PsychicAmmo", 1)
loop
Deselect:
TNT1 A 0 A_SelectWeapon("PsychicProwessX")
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
TNT1 A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
SLSR B 1 A_Raise
Loop
Fire:
SERG B 0 A_JumpIfInventory("IsBot", 1, "BotFire")
SERG B 0 A_JumpIfNoAmmo("NoAmmo")
SERG B 5
SERG B 0 A_PlaySoundEx("weapon/SolarL","Weapon")
SERG C 2 A_FireCustomMissile("PsyShot2",0,0,8,0)
SERG C 9
SERG B 0 A_ReFire
SERG B 5
Goto Ready+2
Hold:
SERG B 0 A_PlaySoundEx("weapon/SolarL","Weapon")
SERG C 2 A_FireCustomMissile("PsyShot2",0,0,8,0)
SERG C 9
SERG B 0 A_ReFire
SERG B 5
goto Ready+2
Altfire:
SERG A 0 A_JumpIfInventory("PsychicAmmo", 14, "Wall")
SERG A 0
Goto NoAmmo
Wall:
SERG B 5
SERG A 0 A_TakeInventory("PsychicAmmo",14)
SERG D 0 A_SpawnItemEX("PsyWallPiece",42,64,0,0,0,0,0,SXF_NOCHECKPOSITION)
SERG A 0 A_SpawnItemEX("PsyWallPiece",42,-64,0,0,0,0,0,SXF_NOCHECKPOSITION)
SERG A 0 A_SpawnItemEX("PsyWallPiece",42,128,0,0,0,0,0,SXF_NOCHECKPOSITION)
SERG A 0 A_SpawnItemEX("PsyWallPiece",42,-128,0,0,0,0,0,SXF_NOCHECKPOSITION)
SERG A 0 A_SpawnItemEX("PsyWallPiece",42,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
SERG D 5
SERG B 5
goto Ready+2
NoAmmo:
SERG A 1 ACS_Execute(979,0)
Goto Ready+2
BotFire:
SERG B 0 A_Jump(50, "Wall")
SERG B 5
SERG B 0 A_PlaySoundEx("weapon/SolarL","Weapon")
SERG C 2 A_FireCustomMissile("PsyShot2",0,0,8,0)
SERG C 9
SERG B 0 A_ReFire
SERG B 5
Goto Ready+2
}
}

actor PsychicAmmo : Ammo
{
+INVENTORY.IGNORESKILL
inventory.amount 1
inventory.maxamount 28
}

actor SergioWallChecker : Inventory
{
+INVENTORY.IGNORESKILL
inventory.amount 1
inventory.maxamount 10
}

actor WallDeathCounter : Inventory
{
+INVENTORY.IGNORESKILL
inventory.amount 1
inventory.maxamount 899
}

actor PsyShot
{
Obituary "%k snapped %o's mind with %p Psychic Prowess."
PROJECTILE 
Radius 5
Height 5
scale 2.5 
damage (0) 
damagetype "PsyShot"
+FORCEXYBILLBOARD 
speed 20
States
{
Spawn:
SLSR E 3 
loop
Death:
SLSR E 0 A_SpawnItemEx("PsyShot2",70,0,0,20,momy,momz,0)
stop
}
}

actor PsyShot2 : PsyShot
{
Obituary "%k snapped %o's mind with %p Psychic Prowess."
+THRUGHOST
translation "204:204=36:36", "61:61=39:39"
damage (15)
States
{
Spawn:
SLSR E 0 A_JumpIf(z-floorz==0, "Death")
NCRU DCBA 2
Goto Look
loop
Death:
SLSR E 0
stop
}
}

actor PsyWallPiece
{
PROJECTILE
+SOLID
+SHOOTABLE
+DONTBLAST
+DONTRIP
+GHOST
+THRUGHOST
painchance 256
+noblood
+noblooddecals
+NoTargetSwitch
mass 0x7ffffffff
health 50
Radius 16
Height 128
alpha 0.9
damagefactor "ShunGokuSatsu", 100.0
renderstyle Translucent
-NOBLOCKMAP
Damage(0)
scale 2.5
speed 0
States
{
Spawn:
PSHH A 1 
PSHH A 0 A_GiveToTarget("SergioWallChecker",1)
PSHH A 0 A_JumpIfInventory("WallDeathCounter",898,"Death")
PSHH A 1 A_GiveInventory("WallDeathCounter",2)
PSHH A 0 A_Stop
PSHH A 0 A_FadeOut(0.002)
goto Spawn+2
Pain:
PSHH A 0 A_PlaySoundEx("weapon/mirrorabsorb","Auto")
PSHH A 0 A_ChangeFlag("INVULNERABLE", 1)
PSHH A 24
PSHH A 0 A_ChangeFlag("INVULNERABLE", 0)
goto Spawn+2
GoToSpawn:
PSHH A 0
goto Spawn+2
Death:
PSHH A 0 A_TakeFromTarget("SergioWallChecker",1)
stop
}
}

actor PsychicProwessX : PsychicProwess
{
States
{
Deselect:
TNT1 A 0 A_SelectWeapon("PsychicProwess")
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
TNT1 A 0 A_StopSound(CHAN_WEAPON)
TNT1 A 1 A_Lower
Loop
Select:
TNT1 A 0 A_SelectWeapon("PsychicProwess")
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
GDSW A 0 A_StopSound(CHAN_WEAPON)
GDSW A 1 A_Raise
Loop
}
}