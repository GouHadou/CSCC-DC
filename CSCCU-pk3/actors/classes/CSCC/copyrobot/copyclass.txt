actor CopyRobot : ClassBaseCSCC
{
player.displayname "CopyRobot"
player.soundclass "BestClassEver"
player.damagescreencolor "yellow"
player.startitem "CopyWeapon"
player.startitem "CopyRemover", 1
player.startitem "CopyAmmo", 28
player.startitem "BusterAmmo", 3
player.startitem "CanCopyWeapons"
//player.startitem "LightHealthBar"
player.colorrange 0 0
damagefactor "Dummy", 0.0
player.maxhealth 80
health 80
//damagefactor "Normal", 1.2
damagefactor "CopyMain", 10.0 //case of best fight ever to the death with no copy weps
damagefactor "CopyAlt", 10.0 
States
{
Spawn:
YOKM A 0
YOKM B 1
YOKM A 1
Goto Spawn+2
See:
YOKM BCDE 5
Goto Spawn
Missile:
YOKM F 5 
YOKM G 4 
Goto Spawn+2

Pain.CopyAlt:
Pain.CopyMain:
YOKM H 0 A_SpawnItemEx("MegaCopyHitMain",1)
YOKM H 0 A_SpawnItemEx("WeaknessEffect",random(-40,40), random(-40,40), 90,0,0,0,0,32)
YOKM H 0 A_PlaySoundEx("weapon/criticalhit","SoundSlot5")
goto pain+1
Death.Backstab:
YOKM H 0 SetPlayerProperty(0, 0, 4)
YOKM H 0 A_TakeInventory("PharaohCharge",999)   
YOKM H 0 A_NoBlocking
YOKM H 0 A_GiveInventory("CutterFlag",999)
YOKM H 0 A_GiveInventory("IsDead",1)
YOKM H 0 A_Stop
YOKM H 0 A_GiveToTarget("KilledMeStock",1)
YOKM H 1 A_GiveToTarget("KilledMe",1)
YOKM H 1 A_GiveToTarget("ClearDisguise",1)
YOKM H 0 A_GiveToTarget("DisguiseOn",1)
YOKM H 0 A_GiveToTarget("CopyDisguise",1)
CFSK H 0 A_GiveToTarget("BestDisguiseEver",1)
YOKM H 0 ACS_ExecuteAlways(775,0,253)
YOKM H 1 ACS_ExecuteAlways(999,0,0)
YOKM H 1 A_SetTranslucent (0.9, 0) 
YOKM H 1 A_SetTranslucent (0.8, 0) 
YOKM H 1 A_SetTranslucent (0.7, 0) 
YOKM H 1 A_SetTranslucent (0.6, 0) 
YOKM H 1 A_SetTranslucent (0.5, 0) 
YOKM H 1 A_SetTranslucent (0.4, 0) 
YOKM H 1 A_SetTranslucent (0.3, 0) 
YOKM H 1 A_SetTranslucent (0.2, 0) 
YOKM H 1 A_SetTranslucent (0.1, 0) 
YOKM H 1 A_SetTranslucent (0.0, 0)
YOKM Z -1
stop
}
}


actor YokuPrismWatcher
{
Height 0
Radius 0
+NOINTERACTION
+NOCLIP
-SOLID
+NOGRAVITY
+MISSILE
States
{
Spawn:
TNT1 A 0 A_JumpIfInTargetInventory("InvisibleFlag",1,"Hide")
TNT1 AAAA 1 A_GiveToTarget("YokuGiveFX1",1)
TNT1 A 0 A_JumpIfInTargetInventory("CutterFlag",998,"Death")
TNT1 A 0 A_JumpIfInTargetInventory("InvisibleFlag",1,"Hide")
TNT1 AAAA 1 A_GiveToTarget("YokuGiveFX2",1)
TNT1 A 0 A_JumpIfInTargetInventory("CutterFlag",998,"Death")
TNT1 A 0 A_JumpIfInTargetInventory("InvisibleFlag",1,"Hide")
TNT1 AAAA 1 A_GiveToTarget("YokuGiveFX3",1)
TNT1 A 0 A_JumpIfInTargetInventory("CutterFlag",998,"Death")
TNT1 A 0 A_JumpIfInTargetInventory("InvisibleFlag",1,"Hide")
TNT1 AAAA 1 A_GiveToTarget("YokuGiveFX4",1)
TNT1 A 0 A_JumpIfInTargetInventory("CutterFlag",998,"Death")
TNT1 A 0 A_JumpIfInTargetInventory("InvisibleFlag",1,"Hide")
TNT1 AAAA 1 A_GiveToTarget("YokuGiveFX5",1)
TNT1 A 0 A_JumpIfInTargetInventory("CutterFlag",998,"Death")
TNT1 A 0 A_JumpIfInTargetInventory("InvisibleFlag",1,"Hide")
TNT1 AAAA 1 A_GiveToTarget("YokuGiveFX6",1)
TNT1 A 0 A_JumpIfInTargetInventory("CutterFlag",998,"Death")
TNT1 A 0 A_JumpIfInTargetInventory("InvisibleFlag",1,"Hide")
TNT1 A 0 A_JumpIfInTargetInventory("CopyWeapon",1,"Spawn")
Goto Death
Hide:
TNT1 A 2
Goto Spawn
Death:
TNT1 A 1 
stop
}
}

actor YokuGiveFX1 : CustomInventory
{
inventory.amount 1
inventory.maxamount 1
+AUTOACTIVATE
States
{
Spawn:
TNT1 A 1
loop
Use:
TNT1 A 0 A_SpawnItemEx("YokuPrism1",0,0,108,momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM | SXF_TRANSFERTRANSLATION, 0)
stop
}
}


actor YokuGiveFX2 : YokuGiveFX1
{
States
{
Spawn:
TNT1 A 1
loop
Use:
TNT1 A 0 A_SpawnItemEx("YokuPrism2",0,0,108,momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM | SXF_TRANSFERTRANSLATION, 0)
stop
}
}

actor YokuGiveFX3 : YokuGiveFX1
{
States
{
Spawn:
TNT1 A 1
loop
Use:
TNT1 A 0 A_SpawnItemEx("YokuPrism3",0,0,108,momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM | SXF_TRANSFERTRANSLATION, 0)
stop
}
}

actor YokuGiveFX4 : YokuGiveFX1
{
States
{
Spawn:
TNT1 A 1
loop
Use:
TNT1 A 0 A_SpawnItemEx("YokuPrism4",0,0,108,momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM | SXF_TRANSFERTRANSLATION, 0)
stop
}
}

actor YokuGiveFX5 : YokuGiveFX1
{
States
{
Spawn:
TNT1 A 1
loop
Use:
TNT1 A 0 A_SpawnItemEx("YokuPrism5",0,0,108,momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM | SXF_TRANSFERTRANSLATION, 0)
stop
}
}

actor YokuGiveFX6 : YokuGiveFX1
{
States
{
Spawn:
TNT1 A 1
loop
Use:
TNT1 A 0 A_SpawnItemEx("YokuPrism6",0,0,108,momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM | SXF_TRANSFERTRANSLATION, 0)
stop
}
}



actor YokuPrism1
{
scale 2.5
-SOLID
+NOGRAVITY
+NOINTERACTION
+NOCLIP
+NOTIMEFREEZE
+CLIENTSIDEONLY
States
{
Spawn:
YOKM L 1
YOKM L 1
stop
}
}

actor YokuPrism2 : YokuPrism1
{
States
{
Spawn:
YOKM M 1
YOKM M 1
stop
}
}

actor YokuPrism3 : YokuPrism1
{
States
{
Spawn:
YOKM N 1
YOKM N 1
stop
}
}


actor YokuPrism4 : YokuPrism1
{
States
{
Spawn:
YOKM O 1
YOKM O 1
stop
}
}

actor YokuPrism5 : YokuPrism1
{
States
{
Spawn:
YOKM P 1
YOKM P 1
stop
}
}

actor YokuPrism6 : YokuPrism1
{
States
{
Spawn:
YOKM Q 1
YOKM Q 1
stop
}
}

actor CopyRobotUnmorphed : Powerup
{
powerup.duration 10
}