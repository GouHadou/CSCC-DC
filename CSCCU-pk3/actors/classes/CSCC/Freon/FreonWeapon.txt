actor FreonWeapon : BaseMM8BDMWep
{
Weapon.AmmoUse 1
Weapon.AmmoGive 28
Weapon.SlotNumber 1
Obituary "%o got below zero by %k's Negative Breath."
Inventory.Pickupmessage "Power up! Cool Weapon!"
weapon.ammotype "IceShotAmmo"
inventory.icon "FRICS"
inventory.pickupsound "weapon/weaponup"
+WEAPON.AMMO_OPTIONAL
DropItem "BlizzardAttackWepGiver"
Scale 2.0
States
{
Spawn:
TNT1 A 1
stop
Ready:
FRHD A 0 ACS_ExecuteAlways(998,0,500,1)
FRHD HGFED 1
FRHD A 8 A_WeaponReady
FRHD A 0 A_GiveInventory("IceShotAmmo",1)
FRHD A 0 A_GiveInventory("IceTrapCount",1)
FRHD A 0 A_JumpIfInventory("InvisCounter",1,"CountDown")
FRHD A 0 A_JumpIfInventory("InvisUsed",1,"Invis")
Goto Ready+6 
CountDown:
FRHD A 1
FRHD A 0 A_TakeInventory("InvisCounter",1)
FRHD A 0 A_JumpIfInventory("InvisCounter",1,2)
FRHD A 0 A_GiveInventory("InvisTrigger",1)
FRHD A 0
goto Ready+6
InvisOut3:
FRHD A 1
FRHD A 0 A_SetTranslucent(1,0)
TNT1 A 0 A_TakeInventory("InvisibleFlag",1)
FRHD A 0 A_TakeInventory("InvisFlag",1)
Deselect:
FRHD A 0 A_JumpIfInventory("InvisFlag",1,"InvisOut3")
FRHD DEFGH 1
FRHD H 0 //A_SelectWeapon("FreonWeapon2")
FRHD HHHHHHHHHHHHHHHHHHHHH 0 A_Lower
FRHD H 1 A_Lower
Loop
Select:
FRHD HHHHHHHHHHHHHHHHHHHHH 0 A_Raise
FRHD H 1 A_Raise
Loop
InvisOut1:
FRHD A 1
FRHD A 0 A_SetTranslucent(1,0)
TNT1 A 0 A_TakeInventory("InvisibleFlag",1)
FRHD A 0 A_TakeInventory("InvisFlag",1)
Fire:
JCHN B 0 A_JumpIfInventory("IsBot", 1, "BotFire")
FRHD A 0 A_JumpIfInventory("InvisFlag",1,"InvisOut1")
FRHD DEFG 2
Hold:
JCHN B 0 A_JumpIfInventory("IsBot", 1, "BotHold")
FRHD H 1 A_PlaySoundEx("freon/icebreath","Weapon")
FRHD H 2 A_FireCustomMissile("NegativeBreath",random(-22,22),0,8,0)
FRHD H 1 A_Refire
FRHD HGFED 2
FRHD A 16
Goto Ready+6
AltFire:
FRHD A 0 A_JumpIfInventory("IceShotAmmo",7,"AltFireAttack")
FRHD A 1
goto NoAmmo
InvisOut2:
FRHD A 1
FRHD A 0 A_SetTranslucent(1,0)
TNT1 A 0 A_TakeInventory("InvisibleFlag",1)
FRHD A 0 A_TakeInventory("InvisFlag",1)
AltFireAttack:
FRHD A 0 A_GiveInventory("IceShotFlag",1)
FRHD A 0 A_JumpIfInventory("InvisFlag",1,"InvisOut2")
FRHD A 0 A_PlaySoundEx("freon/iceshot","Weapon")
FRHD BC 2
FRHD A 0 A_TakeInventory("IceShotAmmo",7)
FRHD C 2 A_FireCustomMissile("IceShot",0,0,8,0)
FRHD A 0 A_TakeInventory("IceShotFlag",1)
FRHD CB 2
FRHD A 20 
goto Ready+6
Invis:
FRHD A 0 A_TakeInventory("InvisUsed",1)
TNT1 A 0 A_GiveInventory("InvisibleFlag",1)
FRHD A 1 A_GiveInventory("InvisFlag",1)
FRHD A 1 A_SetTranslucent(0.9)
FRHD A 1 A_SetTranslucent(0.8)
FRHD A 1 A_SetTranslucent(0.7)
FRHD A 1 A_SetTranslucent(0.6)
FRHD A 1 A_SetTranslucent(0.5)
FRHD A 1 A_SetTranslucent(0.4)
FRHD A 1 A_SetTranslucent(0.3)
FRHD A 1 A_SetTranslucent(0.2)
FRHD A 1 A_SetTranslucent(0.1)
FRHD A 0 A_GiveInventory("InvisCounter",20)
FRHD AAAAAAAAAA 35 A_WeaponReady
FRHD A 0 A_TakeInventory("InvisibleFlag",1)
FRHD A 1 A_TakeInventory("InvisFlag",1)
FRHD A 1 A_SetTranslucent(0.1)
FRHD A 1 A_SetTranslucent(0.2)
FRHD A 1 A_SetTranslucent(0.3)
FRHD A 1 A_SetTranslucent(0.4)
FRHD A 1 A_SetTranslucent(0.5)
FRHD A 1 A_SetTranslucent(0.6)
FRHD A 1 A_SetTranslucent(0.7)
FRHD A 1 A_SetTranslucent(0.8)
FRHD A 1 A_SetTranslucent(0.9)
FRHD A 1 A_SetTranslucent(1.0)
goto Ready+6
NoAmmo:
FRHD A 1
FRHD A 1 ACS_Execute(979,0)
Goto Ready+6

Botfire:
FRHD H 0 A_Jump(10, "BotTrap")
FRHD A 0 A_JumpIfCloser(300, "BotBreath")
FRHD A 0 A_GiveInventory("IceShotFlag",1)
FRHD A 0 A_JumpIfInventory("InvisFlag",1,"InvisOut2")
FRHD A 0 A_PlaySoundEx("freon/iceshot","Weapon")
FRHD BC 2
FRHD A 0 A_TakeInventory("IceShotAmmo",7)
FRHD C 2 A_FireCustomMissile("IceShot",0,0,8,0)
FRHD A 0 A_TakeInventory("IceShotFlag",1)
FRHD CB 2
FRHD A 60 
goto Ready+6
BotBreath:
FRHD DEFG 2
BotHold:
FRHD H 0 A_Recoil(-3)
FRHD H 0 A_Jump(20, "AltFireAttack")
FRHD H 1 A_PlaySoundEx("freon/icebreath","Weapon")
FRHD H 2 A_FireCustomMissile("NegativeBreath",random(-22,22),0,8,0)
FRHD H 1 A_Refire
FRHD HGFED 2
FRHD A 16
Goto Ready+6

BotTrap:
FRHD A 0 A_GiveInventory("IceTrapFlag",1)
FRHD R 0 A_JumpIfInventory("InvisFlag",1,"InvisOut2")
FRHD RQQPPIIJJKK 1 A_ScaleVelocity(0.8)
FRHD R 0 A_PlaySoundEx("freon/icetrap","Weapon")
FRHD A 0 A_TakeInventory("IceTrapFlag",1)
FRHD LLMMNN 1 A_ScaleVelocity(0.8)
FRHD A 0 A_TakeInventory("IceTrapFlag",1)
FRHD B 0 A_TakeInventory("IceTrapCount",40)
FRHD O 2 A_SpawnItemEx("IceTrapSet")
FRHD JIIPQ 2
FRHD R 16
goto Ready+3

}
}

actor FreonWeapon2 : FreonWeapon
{
Weapon.SlotNumber 2
weapon.ammotype "IceTrapCount"
inventory.icon "FRICT"
States
{
Ready:
FRHD R 0 ACS_ExecuteAlways(998,0,500,1)
FRHD HS 1
FRHD R 8 A_WeaponReady
FRHD R 0 A_GiveInventory("IceShotAmmo",1)
FRHD R 0 A_GiveInventory("IceTrapCount",1)
FRHD R 0 A_JumpIfInventory("InvisCounter",1,"CountDown")
FRHD R 0 A_JumpIfInventory("InvisUsed",1,"Invis")
Goto Ready+3
CountDown:
FRHD R 1
FRHD R 0 A_TakeInventory("InvisCounter",1)
FRHD R 0 A_JumpIfInventory("InvisCounter",1,2)
FRHD R 0 A_GiveInventory("InvisTrigger",1)
FRHD R 0
goto Ready+3
InvisOut3:
FRHD R 1
FRHD R 0 A_SetTranslucent(1,0)
TNT1 A 0 A_TakeInventory("InvisibleFlag",1)
FRHD R 0 A_TakeInventory("InvisFlag",1)
Deselect:
FRHD R 0 A_JumpIfInventory("InvisFlag",1,"InvisOut3")
FRHD SH 1
FRHD H 0 //A_SelectWeapon("FreonWeapon")
FRHD HHHHHHHHHHHHHHHHHHHHHH 0 A_Lower
FRHD H 1 A_Lower
Loop
Select:
FRHD HHHHHHHHHHHHHHHHHHHHHH 0 A_Raise
FRHD H 1 A_Raise
Loop
InvisOut1:
FRHD R 1
FRHD R 0 A_SetTranslucent(1,0)
TNT1 A 0 A_TakeInventory("InvisibleFlag",1)
FRHD R 0 A_TakeInventory("InvisFlag",1)
InvisOut1:
FRHD R 1
FRHD R 0 A_SetTranslucent(1,0)
TNT1 A 0 A_TakeInventory("InvisibleFlag",1)
FRHD R 0 A_TakeInventory("InvisFlag",1)
Fire:
FRHD R 0 A_JumpIfInventory("InvisFlag",1,"InvisOut1")
FRHD RS 3
Hold:
FRHD H 1 A_PlaySoundEx("freon/icebreath","Weapon")
FRHD H 2 A_FireCustomMissile("NegativeBreath",random(-22,22),0,8,0)
FRHD H 1 A_Refire
FRHD HSSRR 2
FRHD R 16
Goto Ready+3
AltFire:
FRHD R 0 A_JumpIfInventory("IceTrapCount",40,"AltFireAttack")
FRHD R 1
goto Ready+3
InvisOut2:
FRHD R 1
FRHD R 0 A_SetTranslucent(1,0)
TNT1 A 0 A_TakeInventory("InvisibleFlag",1)
FRHD R 0 A_TakeInventory("InvisFlag",1)
AltFireAttack:
FRHD A 0 A_GiveInventory("IceTrapFlag",1)
FRHD R 0 A_JumpIfInventory("InvisFlag",1,"InvisOut2")
FRHD RQQPPIIJJKK 1 A_ScaleVelocity(0.8)
FRHD R 0 A_PlaySoundEx("freon/icetrap","Weapon")
FRHD A 0 A_TakeInventory("IceTrapFlag",1)
FRHD LLMMNN 1 A_ScaleVelocity(0.8)
FRHD A 0 A_TakeInventory("IceTrapFlag",1)
FRHD B 0 A_TakeInventory("IceTrapCount",40)
FRHD O 2 A_SpawnItemEx("IceTrapSet")
FRHD JIIPQ 2
FRHD R 16
goto Ready+3
Invis:
FRHD R 0 A_TakeInventory("InvisUsed",1)
TNT1 A 0 A_GiveInventory("InvisibleFlag",1)
FRHD R 1 A_GiveInventory("InvisFlag",1)
FRHD R 1 A_SetTranslucent(0.9)
FRHD R 1 A_SetTranslucent(0.8)
FRHD R 1 A_SetTranslucent(0.7)
FRHD R 1 A_SetTranslucent(0.6)
FRHD R 1 A_SetTranslucent(0.5)
FRHD R 1 A_SetTranslucent(0.4)
FRHD R 1 A_SetTranslucent(0.3)
FRHD R 1 A_SetTranslucent(0.2)
FRHD R 1 A_SetTranslucent(0.1)
FRHD R 0 A_GiveInventory("InvisCounter",20)
FRHD RRRRRRRRRR 35 A_WeaponReady
TNT1 A 0 A_TakeInventory("InvisibleFlag",1)
FRHD R 1 A_TakeInventory("InvisFlag",1)
FRHD R 1 A_SetTranslucent(0.1)
FRHD R 1 A_SetTranslucent(0.2)
FRHD R 1 A_SetTranslucent(0.3)
FRHD R 1 A_SetTranslucent(0.4)
FRHD R 1 A_SetTranslucent(0.5)
FRHD R 1 A_SetTranslucent(0.6)
FRHD R 1 A_SetTranslucent(0.7)
FRHD R 1 A_SetTranslucent(0.8)
FRHD R 1 A_SetTranslucent(0.9)
FRHD R 1 A_SetTranslucent(1.0)
goto Ready+3
NoAmmo:
FRHD R 1
FRHD R 1 ACS_Execute(979,0)
Goto Ready+3
}
}

actor InvisFlag : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor InvisUsed : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor IceShotAmmo : Ammo 
{
+INVENTORY.IGNORESKILL
inventory.amount 1
inventory.maxamount 28
}

actor IceTrapCount : Ammo
{
+INVENTORY.IGNORESKILL
inventory.amount 1
inventory.maxamount 60
}



actor NegativeBreath
{
PROJECTILE
Radius 8
Height 8
scale 2.5
damage (9)
Obituary "%o got below zero by %k's Negative Breath."
damagetype "NegativeBreath"
+FORCEXYBILLBOARD
speed 30
States
{
Spawn:
TNT1 A 0
FRBR AABBCCDDDEEFFGG 1 A_ScaleVelocity(0.95)
Death:
TNT1 A 0
stop
}
}

actor IceShot
{
PROJECTILE
Radius 10
Height 10
scale 2.5
damage (0)
+FORCEXYBILLBOARD
Obituary "%o earned a frosty layer upon %k's Frigid Missile."
speed 40
damagetype "FreonIceShot"
States
{
Spawn:
FRSH AAAABBCCDDEE 1 A_SpawnItemEx("IceSpeck",random(-8,0),random(-16,16),random(-6,6),-2)
loop
Death:
TNT1 A 0 A_Explode(20,128,0)
TNT1 A 0 A_PlaySoundEx("freon/iceshotexplosion","misc")
FRSH FGHIJKLM 2
stop
}
}

actor IceShotStun : PowerSpeed
{
Powerup.Duration -1
Speed 0.0
}

actor IceSpeck
{
+NOINTERACTION
scale 1.5
States
{
Spawn:
FRBR ABCCCBA 2
stop
}
}

actor IceShotExplosionEffect
{
+NOINTERACTION
scale 2.5
States
{
Spawn:
FRSH FGHIJKLM 2
stop
}
}

actor IceTrapSet
{
PROJECTILE
-NOGRAVITY
+NOEXPLODEFLOOR
Radius 10
Height 10
scale 1.0
damage (15)
+FORCEXYBILLBOARD
Obituary "%o froze solid after stepping on %k's Icicle Mine."
damagetype "FreonIceTrap"
States
{
Spawn:
FRTR AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 70
Death:
TNT1 A 1
stop
}
}

actor IceTrapStun : PowerSpeed
{
Powerup.Duration -3
Speed 0.0
Powerup.Color Blue, 0.5
}

actor InvisTrigger : CustomInventory
{
inventory.amount 1
inventory.maxamount 1
inventory.icon "FRINV"
scale 2.0
+INVBAR
states
{
Use:
WEA2 Q 0 A_PlaySoundEx("item/refill","Voice")
TNT1 A 0 A_GiveInventory("InvisUsed",1)
stop
}
}

actor InvisCounter : CustomInventory
{
inventory.amount 1
inventory.maxamount 20
scale 2.0
+INVBAR
states
{
Use:
TNT1 A 0
fail
}
}

//Below is the CoolWeapon from the Weapon Tutorial, copied over so Megaman would have something to pick up

actor NegativeBreathWeapon : BaseMM8BDMWep
{
Weapon.AmmoUse 1
Weapon.AmmoGive 56
Weapon.SlotNumber 2
Obituary "%o got below zero by %k's Negative Breath."
Inventory.Pickupmessage "Power up! Negative Breath!"
weapon.ammotype "NegativeBreathAmmo"
inventory.pickupsound "weapon/weaponup"
+WEAPON.AMMO_OPTIONAL 
inventory.icon "FRICB"
DropItem "BlizzardAttackWep"
Scale 2.0
States
{
Spawn:
FRIB A 1
loop
Ready:
ICES D 0 ACS_ExecuteAlways(998,0,500)
ICES D 1 A_WeaponReady
Goto Ready+1
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
ICES D 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
ICES D 1 A_Raise
Loop
Fire:
ICES E 4
Hold:
ICES D 0 A_JumpIfNoAmmo("NoAmmo")
ICES F 1 A_PlaySoundEx("freon/icebreath","Weapon")
ICES F 2 A_FireCustomMissile("NegativeBreath",random(-22,22),1,8,0)
ICES F 1 A_Refire
ICES FE 4
ICES D 16
Goto Ready+1
NoAmmo:
ICES D 1 
Goto Ready+1
}
}

actor NegativeBreathAmmo : Ammo 
{
inventory.amount 1
inventory.maxamount 56
}


actor IceShotFlag : Inventory
{
inventory.amount 1
inventory.maxamount 1
}
actor IceTrapFlag : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/*
actor FreonWeapon : BaseMM8BDMWep
{
States
{

CountDown:
FRHD A 1
FRHD A 0 A_TakeInventory("InvisCounter",1)
FRHD A 0 A_JumpIfInventory("InvisCounter",1,2)
FRHD A 0 A_GiveInventory("InvisTrigger",1)
FRHD A 0
goto Ready+6
InvisOut3:
FRHD A 1
FRHD A 0 A_SetTranslucent(1,0)
FRHD A 0 A_TakeInventory("InvisFlag",1)
Deselect:
FRHD A 0 A_JumpIfInventory("InvisFlag",1,"InvisOut3")
FRHD DEFGH 1
FRHD H 0 A_SelectWeapon("FreonWeapon2")
FRHD HHHHHHHHHHHHHHHHHHHHH 0 A_Lower
FRHD H 1 A_Lower
Loop

Hold:
FRHD H 1 A_PlaySoundEx("freon/icebreath","Weapon")
FRHD H 2 A_FireCustomMissile("NegativeBreath",random(-22,22),0,8,0)
FRHD H 1 A_Refire
FRHD HGFED 2
FRHD A 16
Goto Ready+6
AltFire:
FRHD A 0 A_JumpIfInventory("IceShotAmmo",7,"AltFireAttack")
FRHD A 1
goto NoAmmo
InvisOut2:
FRHD A 1
FRHD A 0 A_SetTranslucent(1,0)
FRHD A 0 A_TakeInventory("InvisFlag",1)
AltFireAttack:
FRHD A 0 A_JumpIfInventory("InvisFlag",1,"InvisOut2")
FRHD A 0 A_PlaySoundEx("freon/iceshot","Weapon")
FRHD A 0 ACS_ExecuteAlways(500,0,0)
FRHD BC 2
FRHD A 0 A_TakeInventory("IceShotAmmo",7)
FRHD C 2 A_FireCustomMissile("IceShot",0,0,8,0)
FRHD CB 2
FRHD A 20 
goto Ready+6
}
}

actor FreonWeapon2 : FreonWeapon
{
weapon.ammotype "IceTrapCount"
inventory.icon "FRICT"
States
{
Ready:
FRHD R 0 ACS_ExecuteAlways(998,0,500,1)
FRHD HS 1
FRHD R 8 A_WeaponReady
FRHD R 0 A_GiveInventory("IceTrapCount",1)
FRHD R 0 A_JumpIfInventory("InvisCounter",1,"CountDown")
FRHD R 0 A_JumpIfInventory("InvisUsed",1,"Invis")
Goto Ready+3
CountDown:
FRHD R 1
FRHD R 0 A_TakeInventory("InvisCounter",1)
FRHD R 0 A_JumpIfInventory("InvisCounter",1,2)
FRHD R 0 A_GiveInventory("InvisTrigger",1)
FRHD R 0
goto Ready+3
InvisOut3:
FRHD R 1
FRHD R 0 A_SetTranslucent(1,0)
FRHD R 0 A_TakeInventory("InvisFlag",1)
Deselect:
FRHD R 0 A_JumpIfInventory("InvisFlag",1,"InvisOut3")
FRHD SH 1
FRHD H 0 A_SelectWeapon("FreonWeapon")
FRHD HHHHHHHHHHHHHHHHHHHHHH 0 A_Lower
FRHD H 1 A_Lower
Loop
Select:
FRHD HHHHHHHHHHHHHHHHHHHHHH 0 A_Raise
FRHD H 1 A_Raise
Loop
InvisOut1:
FRHD R 1
FRHD R 0 A_SetTranslucent(1,0)
FRHD R 0 A_TakeInventory("InvisFlag",1)
InvisOut1:
FRHD R 1
FRHD R 0 A_SetTranslucent(1,0)
FRHD R 0 A_TakeInventory("InvisFlag",1)
Fire:
FRHD R 0 A_JumpIfInventory("InvisFlag",1,"InvisOut1")
FRHD RRSS 2
Hold:
FRHD H 1 A_PlaySoundEx("freon/icebreath","Weapon")
FRHD H 2 A_FireCustomMissile("NegativeBreath",random(-22,22),0,8,0)
FRHD H 1 A_Refire
FRHD HSSRR 2
FRHD R 16
Goto Ready+3
AltFire:
FRHD R 1
FRHD R 1 A_JumpIfInventory("IceTrapCount",40,"AltFireAttack")
goto Ready+3
InvisOut2:
FRHD R 1
FRHD R 0 A_SetTranslucent(1,0)
FRHD R 0 A_TakeInventory("InvisFlag",1)
AltFireAttack:
FRHD R 0 A_JumpIfInventory("InvisFlag",1,"InvisOut2")
FRHD R 0 ACS_ExecuteAlways(500,0,1)
FRHD RQQPPIIJJKK 1 A_ScaleVelocity(0.8)
FRHD R 0 A_PlaySoundEx("freon/icetrap","Weapon")
FRHD LLMMNN 1 A_ScaleVelocity(0.8)
FRHD B 0 A_TakeInventory("IceTrapCount",40)
FRHD O 2 A_SpawnItemEx("IceTrapSet")
FRHD JIIPQ 2
FRHD R 16
goto Ready+3
Invis:
FRHD R 0 A_TakeInventory("InvisUsed",1)
FRHD R 0 ACS_ExecuteAlways(500,0,2)
FRHD R 1 A_GiveInventory("InvisFlag",1)
FRHD R 1 A_SetTranslucent(0.9)
FRHD R 1 A_SetTranslucent(0.8)
FRHD R 1 A_SetTranslucent(0.7)
FRHD R 1 A_SetTranslucent(0.6)
FRHD R 1 A_SetTranslucent(0.5)
FRHD R 1 A_SetTranslucent(0.4)
FRHD R 1 A_SetTranslucent(0.3)
FRHD R 1 A_SetTranslucent(0.2)
FRHD R 1 A_SetTranslucent(0.1)
FRHD R 0 A_GiveInventory("InvisCounter",20)
FRHD RRRRRRRRRR 35 A_WeaponReady
FRHD R 1 A_TakeInventory("InvisFlag",1)
FRHD R 1 A_SetTranslucent(0.1)
FRHD R 1 A_SetTranslucent(0.2)
FRHD R 1 A_SetTranslucent(0.3)
FRHD R 1 A_SetTranslucent(0.4)
FRHD R 1 A_SetTranslucent(0.5)
FRHD R 1 A_SetTranslucent(0.6)
FRHD R 1 A_SetTranslucent(0.7)
FRHD R 1 A_SetTranslucent(0.8)
FRHD R 1 A_SetTranslucent(0.9)
FRHD R 1 A_SetTranslucent(1.0)
goto Ready+3
NoAmmo:
FRHD R 1
FRHD R 1 ACS_Execute(979,0)
Goto Ready+3
}
}

*/