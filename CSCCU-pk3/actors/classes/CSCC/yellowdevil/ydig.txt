actor YDInstagib : Base8BDMWeapon
{
//$Category MM8BDM-Weapons
Weapon.AmmoUse 1
Weapon.AmmoGive 0
Weapon.SlotNumber 1
Obituary "%o was zapped into submission by %k's Electrokinesis."
Inventory.Pickupmessage "ZZZZZZZZAP"
weapon.ammotype "ElectrokinesisAmmo"
inventory.pickupsound "weapon/weaponup"
+WEAPON.AMMO_OPTIONAL
+WEAPON.CHEATNOTWEAPON
Scale 2.0
States
{
Spawn:
TNT1 A 1
stop
Ready:
TBOL S 0 ACS_ExecuteAlways(998,0,502)
YDHD B 10 A_WeaponReady
YDHD B 0 A_GiveInventory("ElectroKinesisAmmo",1)
Goto Ready+1
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
YDHD A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
YDHD K 1 A_Raise
Loop
Fire:
TBOL S 0 SetPlayerProperty(0,1,0)
YDHD LMNOP 2
YDHD P 0 A_FireCustomMissile("LightningLine",0,0,32,0)
YDHD P 5
YDHD P 0 A_FireCustomMissile("LightningLine",0,0,0,0)
YDHD P 5
YDHD P 0 A_FireCustomMissile("LightningLine",0,0,-32,0)
YDHD P 5
TBOL S 0 SetPlayerProperty(0,0,0)
TBOL S 0 A_Refire
Goto Ready+1
Altfire:
TBOL S 0 A_JumpIfInventory("WeaponCharge",50,"AltCharge2")
TBOL S 0 A_JumpIfInventory("WeaponCharge",10,"AltCharge")
TBOL S 0 A_JumpIfNoAmmo("NoAmmo")
TBOL S 0 SetPlayerProperty(0,1,0)
YDHD A 1 A_GiveInventory("WeaponCharge",1)
TBOL S 0 A_Refire
goto NoCharge
Altcharge:
TBOL S 0 A_JumpIfInventory("WeaponCharge",50,"AltCharge2")
YDHD B 1 A_GiveInventory("WeaponCharge",1)
TBOL T 0 A_Refire
goto MidCharge
AltCharge2:
YDHD D 3
TBOL S 0 A_Refire
FullCharge:
TBOL S 0 A_JumpIfInventory("ElectroKinesisAmmo",14,"FullFire")
goto MidCharge
FullFire:
VLBL A 0 A_SetTranslucent (0.0, 0) 
TBOL S 0 A_TakeInventory("WeaponCharge",999)
TBOL A 0 A_Recoil(-150)
TBOL C 0 A_ChangeFlag("SOLID",0)
TBOL C 0 A_PlaySoundEx("weapon/ydlightningform","Weapon")
TBOL C 0 SetPlayerProperty(0,1,3)
TBOL A 0 A_ChangeFlag("INVULNERABLE",1)
FullFly:
YDHD C 1 A_FireCustomMissile("LightningRadiusHueg",0,0,0,0)
YDLG A 0 A_SpawnItemEx("YDTrail",0,0,32)
TBOL S 0 A_GiveInventory("WeaponCharge",1)
TBOL S 0 A_JumpIfInventory("WeaponCharge",35,"FullStop")
loop
FullStop:
TBOL S 0 A_TakeInventory("WeaponCharge",999)
TBOL A 0 SetPlayerProperty(0,0,0)
TBOL C 0 SetPlayerProperty(0,0,3)
TBOL A 0 A_ChangeFlag("INVULNERABLE",0)
TBOL C 0 A_ChangeFlag("SOLID",1)
VLBL A 0 A_SetTranslucent (1.0, 0) 
TBOL A 0 A_TakeInventory("ElectroKinesisAmmo",14)
goto Ready+1
MidCharge:
TBOL S 0 A_JumpIfInventory("ElectroKinesisAmmo",7,"MidFire")
goto NoCharge
MidFire:
VLBL A 0 A_SetTranslucent (0.0, 0) 
TBOL S 0 A_TakeInventory("WeaponCharge",999)
TBOL A 0 A_Recoil(-50)
TBOL C 0 A_ChangeFlag("SOLID",0)
TBOL C 0 A_PlaySoundEx("weapon/ydlightningform","Weapon")
//TBOL C 0 SetPlayerProperty(0,1,3)
TBOL A 0 A_ChangeFlag("INVULNERABLE",1)
MidFly:
YDHD C 1 A_FireCustomMissile("LightningRadiusMid",0,0,0,0)
YDLG A 0 A_SpawnItemEx("YDTrail",0,0,32)
TBOL S 0 A_GiveInventory("WeaponCharge",1)
TBOL S 0 A_JumpIfInventory("WeaponCharge",17,"MidStop")
loop
MidStop:
TBOL S 0 A_TakeInventory("WeaponCharge",999)
TBOL A 0 SetPlayerProperty(0,0,0)
TBOL C 0 SetPlayerProperty(0,0,3)
TBOL A 0 A_ChangeFlag("INVULNERABLE",0)
TBOL C 0 A_ChangeFlag("SOLID",1)
VLBL A 0 A_SetTranslucent (1.0, 0) 
TBOL A 0 A_TakeInventory("ElectrokinesisAmmo",7)
goto Ready+1
NoCharge:
TBOL S 0 A_JumpIfInventory("ElectroKinesisAmmo",4,"SmallFire")
goto YourDum
SmallFire:
TBOL S 0 A_TakeInventory("WeaponCharge",999)
TBOL A 0 A_Recoil(-20)
//TBOL C 0 A_ChangeFlag("SOLID",0)
TBOL C 0 A_PlaySoundEx("weapon/ydlightningform","Weapon")
TBOL C 0 //SetPlayerProperty(0,1,3)
//TBOL A 0 A_ChangeFlag("INVULNERABLE",1)
SmallFly:
YDHD A 1 A_FireCustomMissile("LightningRadiusSmall",0,0,0,0)
YDLG A 0 A_SpawnItemEx("YDTrail",0,0,32)
TBOL S 0 A_GiveInventory("WeaponCharge",1)
TBOL S 0 A_JumpIfInventory("WeaponCharge",7,"SmallStop")
loop
SmallStop:
TBOL S 0 A_TakeInventory("WeaponCharge",999)
TBOL A 0 SetPlayerProperty(0,0,0)
TBOL C 0 //SetPlayerProperty(0,0,3)
//TBOL A 0 A_ChangeFlag("INVULNERABLE",0)
//TBOL C 0 A_ChangeFlag("SOLID",1)
TBOL A 0 A_TakeInventory("ElectrokinesisAmmo",4)
goto Ready+1
NoAmmo:
TBOL S 0 ACS_Execute(979,0)
Goto Ready+1
YourDum:
TBOL S 0 A_TakeInventory("WeaponCharge",999)
TBOL A 0 SetPlayerProperty(0,0,0)
TBOL C 0 SetPlayerProperty(0,0,3)
goto Ready+1
}
}