actor MutantYoshi : ClassBaseCSCC
{
player.displayname "MutantYoshi"
player.soundclass "MYoshi"
player.startitem "MutantYoshiTongue"
player.startitem "MutantYoshiTongueX"
player.startitem "EggFlag"
player.startitem "EggTossInv", 1
//player.startitem "DuoHealthBar"
player.forwardmove 1.02, 1.02
player.sidemove 0.64, 0.64
player.maxhealth 110
health 110
//DamageFactor "Normal", 0.9

player.jumpz 12
States
{
Spawn:
MYOS A 0
MYOS B 1 A_JumpIfHealthLower(1,"Dead")
MYOS A 1 A_JumpIfInventory("SpindashFlag",1,"SpindashHold")
MYOS A 1 A_JumpIf(momz!=0, "Jumping")
Goto Spawn+2
See:
MYOS B 0 A_JumpIfInventory("SpindashFlag",1,"SpindashHold")
MYOS BBBCCCDDDEEE 1 A_JumpIf(momz!=0, "Jumping")
Goto Spawn+2
Jumping:
MYOS X 1 A_JumpIf(momz==0, "Spawn")
wait
Missile:
MYOS F 0 A_JumpIfInventory("SpindashFlag",1,"SpindashHold")
MYOS F 5 A_JumpIfInventory("PunkSpinning",1,"Spindashing")
MYOS G 3 
MYOS G 1 
goto Spawn+3
SpindashHold:
MYOS IIJJKKLL 1 A_JumpIfInventory("PunkSpinning",1,"Spindashing")
Goto SpindashHold
Spindashing:
MYOS X 1 A_JumpIfInventory("PunkStopping",1,"Spawn")
Loop

Pain:
MYOS H 0 A_ScaleVelocity(0.75)
MYOS H 0 A_Pain
MYOS H 0 A_JumpIfInventory("PunkSpinning",1,"SpindashingPain")
MYOS H 0 A_JumpIfInventory("SpindashFlag",1,"SpindashHoldPain")
MYOS H 0 A_Jump(256, "SuperClassPain")
goto SuperClassPain

Pain.CopyAlt:
Pain.CopyMain:
CFSK H 0 A_SpawnItemEx("YoshiCopyHitMain",1)
goto pain+1

PainFix:
MYOS H 0 A_JumpIfInventory("PunkSpinning",1,"SpindashingPain")
MYOS H 0 A_JumpIfInventory("SpindashFlag",1,"SpindashHoldPain")
goto PainFrames

SpindashingPain:
MYOS X 0 A_SpawnItem("PainFX",0,3)
Goto Spindashing
SpindashHoldPain:
MYOS I 0 A_SpawnItem("PainFX",0,3)
Goto SpindashHold

DeathFix:
MYOS H 0
goto DeathFrames
Pain.WilyIce:
MYOS H 0
goto WilyIceFrames
Death:
MYOS Y 0 SetPlayerProperty(0, 0, 4)
MYOS Y 0 A_NoBlocking
MYOS Y 0 A_Stop
MYOS Y 0 A_GiveInventory("NormalGravity", 1)
MYOS Y 0 A_GiveToTarget("KilledMeStock",1)
"----" H 0 A_GiveToTarget("FusionStock",1)	
MYOS Y 1 A_GiveToTarget("KilledMe",1)
MYOS Y 0 A_GiveInventory("CutterFlag", 999)
MYOS Y 0 A_GiveInventory("IsDead",1)
MYOS Y 1 ThrustThingZ(0,75,0,0)
MYOS Y 1 A_PlayerScream
Goto Grounded
Grounded:
MYOS YYYYY 1 A_CheckFloor("Dead")
MYOS YYYYY 1 A_CheckFloor("Dead")
MYOS YYYYY 1 A_CheckFloor("Dead")
MYOS YYYYY 1 A_CheckFloor("Dead")
MYOS YYYYY 1 A_CheckFloor("Dead")
MYOS Y 0 A_JumpIf(momz==0, "Dead")
MYOS YYYYY 1 A_CheckFloor("Dead")
MYOS Y 0 A_JumpIf(momz==0, "Dead")
MYOS YYYYY 1 A_CheckFloor("Dead")
MYOS Y 0 A_JumpIf(momz==0, "Dead")
MYOS YYYYY 1 A_CheckFloor("Dead")
MYOS Y 0 A_JumpIf(momz==0, "Dead")
MYOS YYYYY 1 A_CheckFloor("Dead")
MYOS Y 0 A_JumpIf(momz==0, "Dead")
MYOS YYYYY 1 A_CheckFloor("Dead")
MYOS Y 0 A_JumpIf(momz==0, "Dead")
Goto Dead
Dead:
PLAY Z 0 A_Stop
PLAY Z 0 A_ChangeFlag("NOGRAVITY", 1)
PLAY Z 0 A_PlaySoundEx("misc/devildeath", "Body")
PLAY Z 0 A_SpawnItemEx("FakeDeathFX2", 0, 0, 32, 0, 0, 0, 0, SXF_TRANSFERTRANSLATION)
PLAY Z 1 A_CheckPlayerDone
wait
RiseMyMegamanEnd:
MYOS H 0 A_Stop
MYOS H 0 A_PlayerScream
MYOS H 0 A_GiveInventory("CutterFlag",999)
MYOS Z 1 A_CheckPlayerDone
wait

Death.Falling:
MYOS H 0 SetPlayerProperty(0, 0, 4)
Goto Death+1
TheEnd:
MYOS G 4
loop
CreditWalk:
MYOS BCDE 8
loop
}
}

actor MutantYoshiHit
{
Height 0
Radius 0
+NOINTERACTION
-SOLID
+NOGRAVITY
+MISSILE
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_GiveToTarget("MutantYoshiHitPickup",1)
stop
}
}

actor MutantYoshiHitPickup : CustomInventory
{
inventory.amount 1
inventory.maxamount 1
States
{
Spawn:
TNT1 A 0
stop
Pickup:
TNT1 A 0 A_GiveToTarget("MutantYoshiEgg",1)
stop
}
}

actor YoshiCopyPickupMain : CustomInventory
{
inventory.amount 1
inventory.maxamount 1
States
{
Spawn:
TNT1 A 0
stop
Pickup:
TNT1 A 0 A_GiveToTarget("MutantYoshiMorphItem",1)
stop
}
}

actor YoshiCopyHitMain
{
Height 0
Radius 0
+NOINTERACTION
-SOLID
+NOGRAVITY
+MISSILE
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_GiveToTarget("YoshiCopyPickupMain",1)
stop
}
}


actor MutantYoshiMorphItem : CustomInventory
{
States
{
Spawn:
TNT1 A 0
stop
Pickup:
TNT1 A 0 ACS_ExecuteAlways(CSACS_COPYMORPH, 0, 38)
stop
}
}

actor MutantYoshiMorph : MutantYoshi
{
+NOSKIN
player.morphweapon "MutantYoshiTongue"
player.soundclass "BestClassEver"
States
{
Pain:
YOKM H 0 A_ScaleVelocity(0.75)
YOKM H 0 
Goto "ClassBaseCSCC::Pain+2"
}
}

