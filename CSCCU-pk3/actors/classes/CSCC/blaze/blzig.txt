actor BlazeIGWeapon : Weapon
{
Weapon.AmmoGive2 350
Weapon.SlotNumber 1
scale 2.0
Obituary "%o was charred by one of %k's Supernova Mines."
Inventory.Pickupmessage "Power up! Solar Mine"
+WEAPON.AMMO_OPTIONAL
+WEAPON.DONTBOB
+WEAPON.NOAUTOAIM
+INVENTORY.UNDROPPABLE
+WEAPON.CHEATNOTWEAPON
States
{
Ready:
BLZA A 0 ACS_ExecuteAlways(998,0,3)
goto Ready2
Ready2:
BLZA A 0 A_TakeInventory("TriggerSolarMine",1)
BLZA A 1 A_WeaponReady(2)
loop
Deselect:
BLZA B 0 A_GiveInventory("TriggerSolarMine",1)
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
BLZA A 1 A_Lower
Loop
Select:
BLZA B 0 A_GiveInventory("TriggerSolarMine",1)
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
BLZA A 1 A_Raise
Loop
Fire:
BLZA A 0 A_JumpIfInventory("SolarMineFlag",3,"SolarBomb")
BLZA A 0 A_PlaySoundEx("weapon/pharaoh2","Weapon")
BLZA B 0 A_FireCustomMissile("SolarMineShot",0,0)
BLZA BC 3
BLZA A 18
goto Ready2
SolarBomb:
BLZA A 0 A_PlaySoundEx("weapon/pharaoh2","Weapon")
BLZA B 0 A_FireCustomMissile("SolarBombShot",0,0)
BLZA BC 3
BLZA A 18
goto Ready2
AltFire:
BLZA B 0 A_GiveInventory("TriggerSolarMine",1)
BLZA BC 3
BLZA A 10
BLZA A 0 A_TakeInventory("SolarMineFlag",3)
BLZA A 0 A_TakeInventory("TriggerSolarMine",1)
goto Ready2
}
}

actor SolarMineFlag : Inventory
{
inventory.amount 1
inventory.maxamount 3
}

actor TriggerSolarMine : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

Actor SolarMineShot
{
PROJECTILE
+FORCEXYBILLBOARD
+LOOKALLAROUND
+SKYEXPLODE
+DONTBLAST
Damage (0)
damagetype "Instagib"
ReactionTime 30
Height 10
Speed 0
Radius 10
Scale 2.5
States
{
Spawn:
FLAR A 1 A_JumpIfInTargetInventory("TriggerSolarMine",1,"Death")
FLAR A 0 A_GiveToTarget("SolarMineFlag",1)
FLAR AAABBBB 1 A_JumpIfInTargetInventory("TriggerSolarMine",1,"Death")
FLAR A 0 A_JumpIfInTargetInventory("BlazeIGWeapon",1,"Continue")
FLAR ABABABCDCDCD 4
stop
Continue:
FLAR AAAABBBB 1 A_JumpIfInTargetInventory("TriggerSolarMine",1,"Death")
FLAR A 0 A_Countdown
FLAR A 0 A_JumpIfInTargetInventory("BlazeIGWeapon",1,"Continue")
FLAR ABABABCDCDCD 4
stop
Death:
FLAR D 0 A_PlaySoundEx("weapon/sunflare","Voice")
FLAR DCBADCBADCBA 2 
FLAR DCBADCBADCBA 1
FLAR A 0 A_PlaySoundEx("weapon/solarblazesplit","Voice")
MMFX B 0 A_SpawnItemEx("Solarball",0,0,0,30,0,0,60)
MMFX B 0 A_SpawnItemEx("Solarball",0,0,0,30,0,0,-60)
MMFX B 0 A_SpawnItemEx("Solarball",0,0,0,30,0,0,120)
MMFX B 0 A_SpawnItemEx("Solarball",0,0,0,30,0,0,-120)
MMFX B 0 A_SpawnItemEx("Solarball",0,0,0,30,0,0,0)
MMFX B 0 A_SpawnItemEx("Solarball",0,0,0,30,0,0,-180)
FLAR CD 4
stop
}
}

Actor SolarBombShot
{
PROJECTILE
+FORCEXYBILLBOARD
+LOOKALLAROUND
+SKYEXPLODE
+DONTBLAST
Damage (200)
damagetype "Instagib"
Height 10
Speed 80
Radius 10
Scale 2.5
States
{
Spawn:
FLAR AB 4
loop
Death:
FLAR A 0 A_PlaySoundEx("weapon/solarblazesplit","Voice")
FLAR CD 4
stop
}
}


actor Solarball
{
PROJECTILE
+FORCEXYBILLBOARD
+LOOKALLAROUND
+SKYEXPLODE
+DONTBLAST
+RIPPER
Radius 5
Height 5
scale 2.5
damage (200)
damagetype "Instagib"
speed 20
states
{
Spawn:
FLAR CDCDCDCDCD 4
stop
}
}