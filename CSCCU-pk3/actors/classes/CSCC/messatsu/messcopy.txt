actor GouhadouWep : MegaBuster
{
Weapon.AmmoUse 1
Weapon.AmmoGive 28
Weapon.SlotNumber 2
scale 2.0
Obituary "%o didn't block %k's Gou Hadouken."
inventory.pickupsound "weapon/weaponup"
weapon.ammotype "GouhadouAmmo"
Inventory.Pickupmessage "Power up! Gou Hadouken!"
inventory.icon "TEMAGOU"
+WEAPON.AMMO_OPTIONAL
+WEAPON.DONTBOB
States
{
Spawn:
MESU B 1
Loop
Ready:
HADO A 0 ACS_ExecuteAlways(998,0,WCCS_MESSATSU)
HADO A 1 A_WeaponReady
Goto Ready+1
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
TNT1 A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
HADO A 1 A_Raise
Loop
Hold:
HADO A 0 A_JumpIfNoAmmo("NoAmmo")
HADO A 0 A_JumpIfInventory("MessatsuCharge",34,"Charge2")
HADO A 0 A_JumpIfInventory("MessatsuCharge",15,"Charge")
HADO A 1 A_GiveInventory("MessatsuCharge",1)
HADO A 0 A_Refire
Goto Fire
Charge:
HADO A 0 A_JumpIfInventory("MessatsuCharge",34,"Charge2")
HADO A 0 A_JumpIfInventory("MessatsuCharge",16,"Charge1")
HADO A 0 A_PlaySoundEx("weapon/coilstart","Weapon")
HADO A 2 A_GiveInventory("MessatsuCharge",1)
HADO A 0 A_Refire
Goto Release
Charge1:
HADO A 0 A_JumpIfInventory("MessatsuCharge",34,"Charge2")
HADO D 1 ACS_ExecuteAlways(991,0,WCCS_MESSCHARGE)
HADO A 1 ACS_ExecuteAlways(991,0,WCCS_MESSATSU)
HADO A 0 A_GiveInventory("MessatsuCharge",1)
HADO A 0 A_Refire
Goto Release
Charge2:
HADO A 0 A_JumpIfInventory("MessatsuCharge", 35, 2)
HADO A 0 A_GunFlash
HADO A 1 ACS_ExecuteAlways(991,0,WCCS_MESSATSU)
HADO D 1 ACS_ExecuteAlways(991,0,WCCS_MESSCHARGE)
HADO A 1 ACS_ExecuteAlways(991,0,WCCS_MESSATSU)
HADO A 0 A_JumpIfInventory("MessatsuCharge",35,2)
HADO A 0 A_GiveInventory("MessatsuCharge",1)
HADO A 0 A_JumpIfInventory("IsBot", 1, "BotCheck")
HADO A 0 A_Refire
Goto Release
Release:
HADO A 0 A_TakeInventory("MessatsuFlag", 50)
HADO A 0 A_JumpIfInventory("MessatsuCharge", 35, "RedFireball3")
HADO A 0 A_JumpIfInventory("MessatsuCharge", 25, "RedFireball2")
HADO A 0 A_JumpIfInventory("MessatsuCharge", 15, "RedFireball1")
Goto Fire
RedFireball3:
HADO A 0 A_GiveInventory("MessatsuFlag", 3)
HADO A 0 A_FireCustomMissile("Shakunetsu3",0,0,8,0)
Goto RedFireBallC
RedFireball2:
HADO A 0 A_GiveInventory("MessatsuFlag", 2)
HADO A 0 A_FireCustomMissile("Shakunetsu2",0,0,8,0)
Goto RedFireBallC
RedFireball1:
HADO A 0 A_GiveInventory("MessatsuFlag", 1)
HADO A 0 A_FireCustomMissile("Shakunetsu",0,0,8,0)
Goto RedFireBallC
RedFireBallC:
HADO A 0 A_PlaySoundEx("weapon/mbuster","Weapon")
HADO A 0 A_TakeInventory("MessatsuCharge", 35)
HADO A 0 A_TakeInventory("GouhadouAmmo", 2)
HADO BC 3
Goto Cooldown
CoolDown:
HADO B 3 A_TakeInventory("MessatsuFlag", 1)
HADO B 0 A_JumpIfInventory("MessatsuFlag", 1, "CoolDown")
HADO B 5
HADO B 0 A_Refire
goto Ready+1
BotCheck:
HADO A 0 A_Jump(224, "Hold")
Goto Release
Fire:
HADO A 0 A_JumpIfNoAmmo("NoAmmo")
HADO A 0 A_TakeInventory("MessatsuCharge", 35)
HADO A 0 A_PlaySoundEx("weapon/mbuster","Weapon")
HADO A 0 A_FireCustomMissile("Gouhadou",0,1,8,0)
HADO BC 2
HADO C 6
HADO B 2 
HADO B 0 A_Refire
goto Ready+1
NoAmmo:
HADO A 1 ACS_Execute(979,0)
Goto Ready+1
Flash:
TNT1 H 5 A_PlaySoundEx("weapon/coilcharge", "Weapon")
TNT1 H 0 A_JumpIfInventory("MessatsuCharge",1,"Flash")
stop
}
}

actor GouhadouWepCS : GouhadouWep
{
}



actor GouhadouAmmo : Ammo
{
inventory.amount 1
inventory.maxamount 28
}