actor Beed28Weapon1 : BaseCSCCWep
{
	Weapon.AmmoUse 7
	Weapon.AmmoGive 28
	Weapon.SlotNumber 1
	Obituary "%o was locked on by %k's Missile Barrage."
	Inventory.Pickupmessage "Power Up! Missile Barrage!"
	weapon.ammotype "Beed28Ammo"
	weapon.ammotype2 "Beed28LaserAmmo"
	inventory.pickupsound "weapon/weaponup"
	DropItem "MissileBarrageWepGiver"
	+WEAPON.AMMO_OPTIONAL
	+WEAPON.CHEATNOTWEAPON
	+INVENTORY.UNDROPPABLE
	inventory.icon "NULLICON"
	Scale 2.0

	States
	{
		Ready:
			BEEW B 0 ACS_ExecuteAlways(998,0,0)
			BEEW B 0 A_GunFlash
			BEEW G 0 A_TakeInventory("MirrorBusterFlag", 999)
			BEEW B 5 A_WeaponReady
			BEEW B 0 A_GiveInventory("Beed28Ammo",1)
			Goto Ready+2
		Deselect:
			TNT1 A 0 A_SelectWeapon("Beed28Weapon2")
			TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
			TNT1 A 1 A_Lower
			Loop
		Select:
			TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
			BEEW B 1 A_Raise
			Loop
		Fire:
			BEEW B 1 A_JumpIfInventory("BeedBotAttack",1,"AltFire")
			BEEW B 0 A_GiveInventory("BeedDetectCount",175)
			BEEW B 0 A_JumpIfNoAmmo("NoAmmo")
			BEEW B 0 A_JumpIfInventory("BarrageCount",1,"Right")
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissile",-8,1,8,0)
			BEEW CDB 1
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissile",-4,0,8,0)
			BEEW CDB 1
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissile",0,0,8,0)
			BEEW CDB 1
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissile",4,0,8,0)
			BEEW CDB 1
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissile",8,0,8,0)
			BEEW CD 1
			BEEW B 24
			BEEW B 0 A_GiveInventory("BarrageCount",1)
			BEEW B 0 A_Refire
			Goto Ready+2
		Right:
			BEEW B 0 A_TakeInventory("BarrageCount",1)
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissile",8,1,8,0)
			BEEW CDB 1
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissile",4,0,8,0)
			BEEW CDB 1
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissile",0,0,8,0)
			BEEW CDB 1
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissile",-4,0,8,0)
			BEEW CDB 1
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissile",-8,0,8,0)
			BEEW CD 1
			BEEW B 24
			BEEW B 0 A_Refire
			Goto Ready+2
		NoAmmo:
			BEEW B 0 ACS_Execute(CSACS_BEEDBOTWEP,0,0)
			BEEW B 0 A_JumpIfInventory("BarrageCount",1,"NoAmmoRight")
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissileWeaker",-8,0,8,0)
			BEEW CDB 1
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissileWeaker",-4,0,8,0)
			BEEW CDB 1
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissileWeaker",0,0,8,0)
			BEEW CDB 1
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissileWeaker",4,0,8,0)
			BEEW CDB 1
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissileWeaker",8,0,8,0)
			BEEW CDB 1
			BEEW B 23
			BEEW B 0 A_GiveInventory("BarrageCount",1)
			BEEW B 0 A_Refire
			Goto Ready+1
		NoAmmoRight:
			BEEW B 0 A_TakeInventory("BarrageCount",1)
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissileWeaker",8,0,8,0)
			BEEW CDB 1
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissileWeaker",4,0,8,0)
			BEEW CDB 1
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissileWeaker",0,0,8,0)
			BEEW CDB 1
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissileWeaker",-4,0,8,0)
			BEEW CDB 1
			BEEW B 0 A_PlaySoundEx("weapon/beedmissile","Weapon")
			BEEW B 0 A_FireCustomMissile("BarrageMissileWeaker",-8,0,8,0)
			BEEW CDB 1
			BEEW B 23
			BEEW B 0 A_TakeInventory("BarrageCount",1)
			BEEW B 0 A_Refire
			Goto Ready+1
		AltFire:
			BEEW B 0 A_GiveInventory("BeedDetectCount",175)
			BEEW F 0 A_JumpIfInventory("MirrorBusterFlag", 1, "AltHold2")
            BEEW G 0 A_JumpIfInventory("Beed28Ammo",1,"AltHold")
			BEEW B 1
            Goto Ready+2
		AltHold:
            BEEW F 0 A_JumpIfInventory("MirrorBusterFlag", 1, "AltHold2")
            BEEW F 0 A_JumpIfInventory("Beed28Ammo",1, "AltHoldStart")
            Goto No
		AltHoldStart:
            BEEW F 0 A_PlayWeaponSound("weapon/mirroractivate")
            BEEW F 0 A_TakeInventory("Beed28Ammo",2)
		AltHold2:
			BEEW G 0 A_JumpIfInventory("Beed28Ammo",1,"AltHold3")
			BEEW B 1
			goto No
		AltHold3:
            BEEW D 0 A_JumpIfInventory("MirrorBusterFlag", 35, "CoolDown")
            BEEW CCC 1 A_SpawnItemEx("MirrorBuster1",38,0,0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
            BEEW D 0 A_GiveInventory("MirrorBusterFlag", 2)
            BEEW CCC 1 A_SpawnItemEx("MirrorBuster2",38,0,0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
            BEEW D 0 A_GiveInventory("MirrorBusterFlag", 2)
            BEEW D 0 A_Refire
            BEEW D 4
            Goto Ready+2
		No:
            BEEW B 0 A_TakeInventory("BeedBotAttack",999)
            BEEW B 1 ACS_Execute(979,0)
			BEEW B 0 ACS_Execute(CSACS_BEEDBOTWEP,0,2)
            Goto Ready+2
		CoolDown:
            BEEW DB 15
            BEEW G 0 A_TakeInventory("MirrorBusterFlag", 999)
			BEEW G 0 A_TakeInventory("BeedBotAttack",999)
			BEEW G 0 ACS_Execute(CSACS_BEEDBOTWEP,0,2)
            Goto Ready+2
		Flash:
			TNT1 A 1 A_TakeInventory("BeedDetectCount",1)
			TNT1 A 0 A_JumpIfHealthLower(10,"ArmorBroken")
			TNT1 A 0 A_TakeInventory("ArmorBroken",1)
			TNT1 A 0 A_JumpIfTargetInLos("Spotted")
			loop
		Spotted:
			TNT1 A 0 A_JumpIfHealthLower(0,"Flash")
			TNT1 A 0 A_JumpIfInventory("BeedDetectCount",1,"Spotted2")
			TNT1 A 0 A_GiveInventory("BeedDetectCount",175)
			TNT1 A 0 A_PlaySoundEx("beed28/reaverbot","Voice") //Need a sort of MML "Detected" sound. The one Reaverbots make when they spot you
			Goto Flash
		Spotted2:
			TNT1 A 0 A_GiveInventory("BeedDetectCount",175)
			Goto Flash
		ArmorBroken:
			TNT1 A 0 A_GiveInventory("ArmorBroken",35)
			TNT1 A 0 A_JumpIfTargetInLos("Spotted")
			Goto Flash+3
	}
}

actor Beed28Ammo : Ammo
{
	+INVENTORY.IGNORESKILL
	inventory.amount 1
	inventory.maxamount 28
}

actor Beed28LaserAmmo : Ammo
{
	+INVENTORY.IGNORESKILL
	inventory.amount 1
	inventory.maxamount 56
}

actor BeedBotAttack : Inventory
{
	inventory.amount 1
	inventory.maxamount 1
}

actor BeedLaserFlag : Inventory
{
	inventory.amount 1
	inventory.maxamount 1
}

actor ArmorBroken : Inventory
{
	inventory.amount 1
	inventory.maxamount 35
}

actor BarrageCount : Inventory
{
	inventory.amount 1
	inventory.maxamount 2
}

actor BeedDetectCount : Inventory
{
	inventory.amount 1
	inventory.maxamount 175
}

/*actor BarrageMissile : MageStaffFX2
{
PROJECTILE
+SEEKERMISSILE
-EXTREMEDEATH
Radius 5
Height 5
scale 2.5
damage (4)
damagetype "Quick"
speed 35
States
{
Spawn:
MIBA A 0 A_GiveInventory("CutterFlag", 1)
MIBA A 0 A_JumpIfInventory("CutterFlag", 10, "NoHoming")
MIBA AB 1 A_SeekerMissile (2, 10, SMF_LOOK, 50, 10)
loop
NoHoming:
MIBA AB 1
loop
Death:
MMFX BCDE 2
stop
}
}

actor BarrageMissileWeaker : BarrageMissile
{
Obituary "%o was eliminated by %k's Missile Barrage."
States
{
Spawn:
MIBA AB 1
loop
}
}/*

/*------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
------------------------------------------------------------------------------*/

/*actor BarrageMissile
{
 PROJECTILE
 +LOOKALLAROUND
 +FORCEYBILLBOARD
 damagetype "Beed"
 Speed 30
 Damage (4)
 radius 5
 height 5
 scale 2.5

 States
 {
  Spawn:
   TNT1 A 0
   TNT1 A 0 A_Jump(256,"GetTarget")
   goto GetTarget
  GetTarget:
   TNT1 A 0
   goto Spawn2
  Spawn2:
   MIBA AB 1
   MIBA A 0 A_JumpIfInventory("Target",1,"Chase")
   MIBA A 0 ACS_ExecuteAlways(700,0,0)
   MIBA AB 1
   goto Spawn2
  Spawn3:
   MIBA AB 1
   MIBA A 0 A_JumpIfInventory("Target",1,"Chase")
   MIBA A 0 ACS_ExecuteAlways(700,0,0)
   MIBA AB 1
   TNT1 A 0 A_Stop
   MIBA A 0 A_Recoil(-30)
   goto Spawn3
  Chase:
   TNT1 A 0 A_Stop
   MIBA A 0 A_JumpIfInventory("CutterFlag", 2, "NoHoming")
   MIBA A 0 A_GiveInventory("CutterFlag", 1)
   MIBA A 0 A_JumpIf(ACS_ExecuteWithResult(705,0)==1,"ClearTarget")
   //MIBA A 0 A_JumpIf(ACS_ExecuteWithResult(701,0)==2,"ChaseUp")
   //MIBA A 0 A_JumpIf(ACS_ExecuteWithResult(701,0)==1,"ChaseDown")
   MIBA A 0 ACS_ExecuteAlways(701,0)
   goto Chase2
  NoHoming:
   MIBA A 0 A_JumpIf(ACS_ExecuteWithResult(707,0)==1,"ClearTarget")
   //MIBA A 0 A_JumpIf(ACS_ExecuteWithResult(706,0)==2,"ChaseUp")
   //MIBA A 0 A_JumpIf(ACS_ExecuteWithResult(706,0)==1,"ChaseDown")
   MIBA A 0 ACS_ExecuteAlways(706,0)
   goto Chase2
  ChaseUp:
   MIBA A 0 ThrustThingZ(0,30,0,0)
   goto Chase2+1
  ChaseDown:
   MIBA A 0 ThrustThingZ(0,30,1,0)
   goto Chase2+1
  Chase2:
   //MIBA A 0 ThrustThingZ(0,0,0,0)
   //MIBA A 0 A_Recoil(-30)
   //MIBA A 0 ThrustThingZ(0,sin(-pitch)*30,1,0)
   MIBA A 0 ThrustThingZ(0,sin(-pitch)*90,1,0)
   MIBA A 0 A_Recoil(cos(-pitch)*-30)
   goto Spawn3
  ClearTarget:
   MIBA A 0 A_TakeInventory("Target",999)
   MIBA A 0 A_TakeInventory("TargetID",999)
   goto Spawn3
  Death:
   MMFX BCDE 2
   stop
 }
}*/
actor BarrageMissile : HomingSniper
{
Obituary "%o was locked on by %k's Missile Barrage."
Speed 30
Damage (8)
radius 5
height 5
DamageType "MissileBarrage"
States
{
Spawn:
MIBA AABBAABB 1 A_SeekerMissile (1, 10, SMF_LOOK, 50, 10)
Goto Primed
Primed:
MIBA A 1 A_SeekerMissile (1, 10, SMF_LOOK, 50, 10)
MIBA B 0 A_JumpIfTargetInLOS("See", 0, 1)
MIBA A 1 A_SeekerMissile (1, 10, SMF_LOOK, 50, 10)
MIBA B 0 A_JumpIfTargetInLOS("See", 0, 1)
MIBA B 1 A_SeekerMissile (1, 10, SMF_LOOK, 50, 10)
MIBA B 0 A_JumpIfTargetInLOS("See", 0, 1)
MIBA B 1 A_SeekerMissile (1, 10, SMF_LOOK, 50, 10)
MIBA B 0 A_JumpIfTargetInLOS("See", 0, 1)
loop
/*
See:	
MIBA BBBBBB 0 A_SeekerMissile (2, 10, SMF_LOOK, 50, 10)
MIBA A 1
MIBA B 0 A_ScaleVelocity(2.0)//A_SpawnItemEx("HomingSniper2",0,0,0,momx*2,momy*2,momz*2,0,SXF_ABSOLUTEMOMENTUM|SXF_ABSOLUTEPOSITION)
Goto FastMode
*/
See:
MIBA A 0 A_ScaleVelocity(1.1)
MIBA A 2 A_SeekerMissile(1, 5, SMF_LOOK, 50, 10)//A_SeekerMissile (2, 10, SMF_LOOK, 50, 10)
MIBA A 0 A_ScaleVelocity(1.1)
MIBA A 2 A_SeekerMissile(1, 5, SMF_LOOK, 50, 10)//A_SeekerMissile (2, 10, SMF_LOOK, 50, 10)
MIBA B 0 A_ScaleVelocity(1.1)
MIBA B 2 A_SeekerMissile(1, 5, SMF_LOOK, 50, 10)//A_SeekerMissile (2, 10, SMF_LOOK, 50, 10)
MIBA B 0 A_ScaleVelocity(1.1)
MIBA B 2 A_SeekerMissile(1, 5, SMF_LOOK, 50, 10)//A_SeekerMissile (2, 10, SMF_LOOK, 50, 10)
MIBA B 0 A_GiveInventory("HomingLockGiverBeed", 1, AAPTR_Tracer)
loop
/*
FastMode:
MIBA AB 2 
MIBA B 0 A_GiveToTarget("HomingLockGiverBeed", 1, AAPTR_Tracer)//A_SpawnItemEx("HomingSniperLockonBeed",0,0,0,momx*10,momy*10,momz*10,0,SXF_ABSOLUTEMOMENTUM|SXF_ABSOLUTEPOSITION)
MIBA AB 2 
MIBA B 0 A_GiveToTarget("HomingLockGiverBeed", 1, AAPTR_Tracer)//A_SpawnItemEx("HomingSniperLockonBeed",0,0,0,momx*10,momy*10,momz*10,0,SXF_ABSOLUTEMOMENTUM|SXF_ABSOLUTEPOSITION)
MIBA AB 2 
MIBA B 0 A_GiveToTarget("HomingLockGiverBeed", 1, AAPTR_Tracer)//A_SpawnItemEx("HomingSniperLockonBeed",0,0,0,momx*10,momy*10,momz*10,0,SXF_ABSOLUTEMOMENTUM|SXF_ABSOLUTEPOSITION)
MIBA AB 2 //A_SeekerMissile (2, 10, SMF_LOOK, 50, 10)
MIBA B 0 A_GiveToTarget("HomingLockGiverBeed", 1, AAPTR_Tracer)//A_SpawnItemEx("HomingSniperLockonBeed",0,0,0,momx*10,momy*10,momz*10,0,SXF_ABSOLUTEMOMENTUM|SXF_ABSOLUTEPOSITION)
Goto See+4
//loop
*/
Death:
MMFX B 0
MMFX B 0 A_GiveToTarget("Clip", 1)
MMFX BCDE 2
stop
}
}

actor HomingSniperLockonBeed : HomingSniperLockon
{
States
{
Spawn:
TNT1 A 1
loop
XDeath:
TNT1 A 0
TNT1 A 0 A_SpawnItemEx("HomingCrosshairBeed",8,0,8,momx,momy,momz,0,SXF_ABSOLUTEMOMENTUM)
Death:
TNT1 A 1
stop
}
}

actor BarrageMissileWeaker : BarrageMissile
{
	Obituary "%o was eliminated by %k's Missile Barrage."

	States
	{
		Spawn:
			MIBA FG 1
			goto Spawn
	}
}

actor FirstLocked : CustomInventory
{
	inventory.amount 1
	inventory.maxamount 1

	States
	{
		Spawn:
			TNT1 A 0
			stop
		Pickup:
			TNT1 A 0 A_PlaySoundEx("weapon/beedlockon","Voice")
			stop
	}
}

actor HomingLockGiverBeed : CustomInventory
{
	inventory.amount 1
	inventory.maxamount 1

	States
	{
		Spawn:
			TNT1 A 0
			stop
		Pickup:
			TNT1 A 0 A_JumpIfInventory("CutterFlag",998,"Death")
			TNT1 A 0 A_JumpIfInventory("isDead",1,"Death")
			TNT1 A 0 A_JumpIf(!(health>0),"Death")
			TNT1 A 0 A_SpawnItemEx("HomingCrosshairBeed",0,0,30)
			stop
		Death:
			TNT1 A 0
			stop
	}
}

actor HomingCrosshairBeed
{
	+CLIENTSIDEONLY
	-SOLID
	+NOGRAVITY
	+FORCEYBILLBOARD
	Scale 2.5

	States
	{
		Spawn:
			MIBA Y 0
			MIBA Y 6
			stop
	}
}

actor Target : Inventory
{
	inventory.amount 1
	inventory.maxamount 1
}
actor Target1 : Target
{
}
actor Target2 : Target
{
}
actor Target3 : Target
{
}
actor Target4 : Target
{
}
actor Target5 : Target
{
}

actor TargetID : Inventory
{
	inventory.amount 999
	inventory.maxamount 999
}
actor Target1ID : TargetID
{
}
actor Target2ID : TargetID
{
}
actor Target3ID : TargetID
{
}
actor Target4ID : TargetID
{
}
actor Target5ID : TargetID
{
}

/*------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
------------------------------------------------------------------------------*/


actor MirrorBuster1Alt replaces MirrorBuster1
{
+MISSILE
//+RIPPER
+DONTSPLASH
+SHOOTABLE
+GHOST
+NOBLOOD
+NOTARGETSWITCH
+DONTRIP
+DONTBLAST
Obituary "%o saw %hself in %k's Mirror Buster."
Damage 0
Height 48
speed 0
health 100
painchance 256
Radius 32
scale 2.5
States
{
Spawn:
MIRR A 2
stop
Pain.PharaohHold:
Pain.StarCrash:
Pain.TopSpin:
Pain.FireSpin:
Pain.Tango:
Pain.GeminiLaser:
Pain.JunkShield:
Pain.Scorch:
TNT1 A 0
stop
Pain:
TNT1 A 0 
TNT1 A 0 A_JumpIfHealthLower(76,"Shot2")
TNT1 A 0 A_JumpIfHealthLower(89,"Shot1")
TNT1 A 0 A_JumpIfHealthLower(100,"Shot3")
stop
Shot1:
TNT1 A 0 A_ChangeFlag("SHOOTABLE",0)
TNT1 A 1 A_GiveToTarget("MirrorShot1Alt",1)
stop
Shot2:
TNT1 A 0 A_ChangeFlag("SHOOTABLE",0)
TNT1 A 1 A_GiveToTarget("MirrorShot2Alt",1)
stop
Shot3:
TNT1 A 0 A_ChangeFlag("SHOOTABLE",0)
TNT1 A 1 A_GiveToTarget("MirrorShot3Alt",1)
stop
Death:
TNT1 A 0 A_ChangeFlag("SHOOTABLE",0)
TNT1 A 0 A_JumpIfHealthLower(1,"Shot2")
stop
NoShot:
TNT1 A 0
stop
}
}

actor MirrorBuster2Alt : MirrorBuster1Alt replaces MirrorBuster2
{
States
{
Spawn:
MIRR B 2
stop
}
}


actor MirrorShot1Alt : CustomInventory
{
Obituary "%o saw %hself in %k's Mirror Buster."
inventory.amount 1
inventory.maxamount 1
states
{
Spawn:
TNT1 A 0
stop
Pickup:
TNT1 A 0 A_FireCustomMissile("MirrorShotMedium",0,0,0,0)
TNT1 A 0 A_TakeInventory("MirrorBusterAmmo",2)
TNT1 A 0 A_TakeInventory("Beed28Ammo",2)
TNT1 A 0 A_TakeInventory("MirrorBusterFlag", 999)
TNT1 A 0 A_PlaySound("weapon/mirrordeflect")
stop
}
}

actor MirrorShot2Alt : CustomInventory
{
Obituary "%o saw %hself in %k's Mirror Buster."
inventory.amount 1
inventory.maxamount 1
states
{
Spawn:
TNT1 A 0
stop
Pickup:
TNT1 A 0 A_FireCustomMissile("MirrorShotLarge",0,0,0,0)
TNT1 A 0 A_TakeInventory("MirrorBusterAmmo",4)
TNT1 A 0 A_TakeInventory("Beed28Ammo",4)
TNT1 A 0 A_TakeInventory("MirrorBusterFlag", 999)
TNT1 A 0 A_PlaySound("weapon/mirrordeflect2")
stop
}
}

actor MirrorShot3Alt : CustomInventory
{
Obituary "%o saw %hself in %k's Mirror Buster."
inventory.amount 1
inventory.maxamount 1
states
{
Spawn:
TNT1 A 0
stop
Pickup:
TNT1 A 0 A_FireCustomMissile("MirrorShotSmall",0,0,0,0)
TNT1 A 0 A_TakeInventory("MirrorBusterAmmo",1)
TNT1 A 0 A_TakeInventory("Beed28Ammo",1)
TNT1 A 0 A_TakeInventory("MirrorBusterFlag", 999)
TNT1 A 0 A_PlaySound("weapon/mirrordeflect")
stop
}
}

actor MirrorShotSmallAlt : MirrorShotMedium replaces MirrorShotSmall
{
damage (15)
}

actor Beed28Weapon2 : BaseCSCCWep
{
	Weapon.AmmoUse 7
	Weapon.AmmoGive 28
	Weapon.SlotNumber 2
	Obituary "%o was pulverised by %k's Hyper Missile."
	Inventory.Pickupmessage "Power Up! Missile Barage!"
	weapon.ammotype "Beed28Ammo"
	weapon.ammotype2 "Beed28LaserAmmo"
	inventory.pickupsound "weapon/weaponup"
	DropItem "MissileBarrageWepGiver"
	+WEAPON.AMMO_OPTIONAL
	+WEAPON.CHEATNOTWEAPON
	+INVENTORY.UNDROPPABLE
	+WEAPON.NOAUTOAIM
	Scale 2.0

	States
	{
		Ready:
			BEEW I 0 ACS_ExecuteAlways(998,0,0)
			BEEW B 0 A_GunFlash
			BEEW I 5 A_WeaponReady
			BEEW I 0 A_GiveInventory("Beed28Ammo",1)
			Goto Ready+2
		Deselect:
		    TNT1 A 0 A_TakeInventory("Wep2",1)
			TNT1 A 0 A_SelectWeapon("Beed28Weapon1")
			TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
			BEEW I 1 A_Lower
			Loop
		Select:
		    TNT1 A 0 A_GiveInventory("Wep2",1)
			TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
			BEEW I 1 A_Raise
			Loop
		Fire:
			BEEW I 1 A_JumpIfInventory("BeedBotAttack",1,"LaserBlastBot")
			BEEW I 0 A_JumpIfNoAmmo("NoAmmo")
			BEEW I 0 A_GiveInventory("BeedDetectCount",175)
			BEEW I 0 A_PlaySoundEx("weapon/mbuster","Weapon")
			BEEW I 0 A_FireCustomMissile("BeedHyperMissile",0,1,10,-2)
			BEEW I 0 A_ChangeVelocity(-Cos(pitch)*6, 0, sin(pitch)*6,CVF_RELATIVE)
			BEEW KJ 2
			BEEW I 25
			BEEW I 0 A_Refire
			Goto Ready+2
		AltFire:
			BEEW I 0 A_JumpIfInventory("Beed28Ammo",28,1)
			Goto NoAmmo
		AltFire:
			BEEW I 0 A_JumpIfInventory("Beed28LaserAmmo",56,1)
			Goto NoAmmo
			BEEW I 0 A_GiveInventory("BeedLaserFlag",1)
			BEEW I 0 A_GiveInventory("BeedDetectCount",175)
			BEEW J 0 A_PlaySoundEx("misc/wilystart","Weapon")
			BEEW J 32 SetPlayerProperty(0,1,0)
			BEEW J 0 SetPlayerProperty(0,1,4)
			BEEW J 0 A_TakeInventory("Beed28LaserAmmo",56)
			BEEW J 0 A_PlaySoundEx("misc/quicktrap","Weapon")
			BEEW KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK 1 A_FireCustomMissile("BeedQuickBeam",0,0,10,-2)
			BEEW J 2
			BEEW I 0 SetPlayerProperty(0,0,0)
			BEEW I 0 SetPlayerProperty(0,0,4)
			BEEW I 0 A_TakeInventory("BeedLaserFlag",999)
			BEEW I 0 A_Refire
			Goto Ready+2
		LaserBlastBot:
			BEEW I 0 A_GiveInventory("BeedLaserFlag",1)
			BEEW I 0 A_GiveInventory("BeedDetectCount",175)
			BEEW J 0 A_PlaySoundEx("misc/wilystart","Weapon")
			BEEW J 32 SetPlayerProperty(0,1,0)
			BEEW J 0 SetPlayerProperty(0,1,4)
			BEEW J 0 A_PlaySoundEx("misc/quicktrap","Weapon")
			BEEW J 0 A_FireCustomMissile("BeedQuickBeamBotFirer",0,0,10,-2)
			BEEW KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK 1
			BEEW J 2
			BEEW I 8 SetPlayerProperty(0,0,4)
			BEEW I 0 SetPlayerProperty(0,0,0)
			BEEW I 0 A_TakeInventory("BeedBotAttack",999)
			BEEW I 0 ACS_Execute(CSACS_BEEDBOTWEP,0,1)
			BEEW I 0 A_TakeInventory("BeedLaserFlag",999)
			BEEW I 0 A_Refire
			Goto Ready+2
		NoAmmo:
			BEEW I 5 ACS_Execute(979,0)
			BEEW I 0 ACS_Execute(CSACS_BEEDBOTWEP,0,0)
			BEEW I 0 A_GiveInventory("Beed28Ammo",1)
			Goto Ready+2
		Flash:
			TNT1 A 1 A_TakeInventory("BeedDetectCount",1)
			TNT1 A 0 A_JumpIfHealthLower(10,"ArmorBroken")
			TNT1 A 0 A_TakeInventory("ArmorBroken",1)
			TNT1 A 0 A_JumpIfTargetInLos("Spotted")
			loop
		Spotted:
			TNT1 A 0 A_JumpIfHealthLower(0,"Flash")
			TNT1 A 0 A_JumpIfInventory("BeedDetectCount",1,"Spotted2")
			TNT1 A 0 A_GiveInventory("BeedDetectCount",175)
			TNT1 A 0 A_PlaySoundEx("beed28/reaverbot","Voice") //Need a sort of MML "Detected" sound. The one Reaverbots make when they spot you
			Goto Flash
		Spotted2:
			TNT1 A 0 A_GiveInventory("BeedDetectCount",175)
			Goto Flash
		ArmorBroken:
			TNT1 A 0 A_GiveInventory("ArmorBroken",35)
			TNT1 A 0 A_JumpIfTargetInLos("Spotted")
			Goto Flash+3
	}
}

actor BeedHyperMissile
{
Obituary "%o was pulverised by %k's Hyper Missile."
	PROJECTILE
	+FORCEYBILLBOARD
	scale 2.5
	damagetype "Bomb"
	Speed 25
	Radius 12
	Height 10
	Damage (0)

	States
	{
		Spawn:
			BEEM A 0 A_PlaySoundEx("weapon/drillfly","Weapon")
			BEEM AAAAAA 1 A_SpawnItem("BeedHyperMissileTrail")
			loop
		Death:
			BOMB A 0 A_Stop
			BOMB A 0 A_PlaySoundEx("weapon/hyperbomb", "Weapon")
			BOMB A 0 A_ChangeFlag("NOGRAVITY",1)
			BOMB A 0 A_Explode(35, 180, 0)
			BOMB BCDEFGHIJKLMNOPQR 1
			stop
	}
}

actor BeedHyperMissileTrail
{
	+NOINTERACTION
	scale 2.5
	Radius 12
	Height 10

	States
	{
		Spawn:
			TNT1 A 2
			MMFX CDE 2
			stop
	}
}

actor BeedQuickBeam
{
	PROJECTILE
	Damage (10)
	+RIPPER
	damagetype "Beam"
	scale 2.5
	+DONTBLAST
	+FORCEXYBILLBOARD
	radius 20
	height 42
	obituary "%o was not quick enough to avoid %k's Shining Laser."
	Speed 32

	States
	{
		Spawn:
			BEEM B 1
			loop
		Death:
			MMFX BCDE 2
			stop
	}
}

actor BeedQuickBeamBotFirer
{
	PROJECTILE
	Damage (0)
	+RIPPER
	radius 0
	damagetype "Quick"
	scale 2.5
	+MOVEWITHSECTOR
	+DONTBLAST
	Speed 0

	States
	{
		Spawn:
			TNT1 A 0
			TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_CustomMissile("BeedQuickBeam",0,0,0,2)
			stop
	}
}