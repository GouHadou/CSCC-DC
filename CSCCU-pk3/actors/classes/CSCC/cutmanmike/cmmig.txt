actor LightningBow : Weapon
{
Inventory.PickupMessage "You got CMM's Bow!" 
AttackSound "weapons/LightningArrow"
Weapon.AmmoType1 "HellfireAmmo" 
Weapon.AmmoGive1 20 
Weapon.AmmoUse1 0
+NOALERT 
+DONTBOB
+INVENTORY.UNDROPPABLE
+WEAPON.NOAUTOAIM
+WEAPON.CHEATNOTWEAPON
+WEAPON.AMMO_OPTIONAL
Radius 30
Height 10
Scale .20 
+WEAPON.NOAUTOAIM
Weapon.SlotNumber 1
Obituary "%o was electrocuted by %k's lightning arrow." 
States
{
Ready: 
BOW1 A 0 ACS_ExecuteAlways(998,0,WCCS_CUTMANMIKE)
BOW1 H 1 A_WeaponReady 
Goto Ready+1
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
BOW1 H 1 A_Lower
Loop
Select: 
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
BOW1 H 1 A_Raise
Loop
Fire:   
BOW1 HIJL 3
BOW1 L 2 A_PlaySoundEx ("weapons/bowdraw", "SoundSlot7")
BOW1 A 0 A_GiveInventory("LightningCheck",1)
BOW1 A 0 A_GunFlash
Goto Hold
Hold:
TNT1 A 0 ACS_ExecuteAlways(974,0)
BOW1 M 1 bright 
BOWL A 0 A_Refire
BOWL A 0 A_GiveInventory("LightningCheck",1)
BOW1 O 0 A_StopSoundEx("SoundSlot7")
BOW1 H 0 A_Light0
BOW1 O 0 A_FireCustomMissile("LightningArrow", 0, 0, 8, 0)
BOW1 O 0 A_RailAttack(0, 8, 0, "None", "FF FF 00", 1, 9999, "LightningRailPuff")
BOW1 O 0 A_PlaySoundEx("weapons/lightningstrike","Weapon")
BOW1 P 16
BOW1 G 4 A_TakeInventory("LightningCheck",2)
Goto Ready+1
Flash:
TNT1 A 1 A_JumpIfInventory("LightningCheck",1,"SFlash")
Stop
SFlash:
BOWL A 1 bright
BOWL A 0 A_JumpIfInventory("LightningCheck",2,"Goaway")
BOWL A 1 bright
BOWL A 0 A_JumpIfInventory("LightningCheck",2,"Goaway")
BOWL B 1 bright
BOWL A 0 A_JumpIfInventory("LightningCheck",2,"Goaway")
BOWL B 1 bright
BOWL A 0 A_JumpIfInventory("LightningCheck",2,"Goaway")
BOWL C 1 bright
BOWL A 0 A_JumpIfInventory("LightningCheck",2,"Goaway")
BOWL C 1 bright
BOWL A 0 A_JumpIfInventory("LightningCheck",2,"Goaway")
loop
Goaway:
TNT1 A 0
stop
}
}

ACTOR LightningArrow : FastProjectile
{
PROJECTILE
damage (250)
+RIPPER
height 5
radius 5
+NOBLOOD
damagetype "Instagib"
speed 500
States
{
Spawn:
TNT1 A 1
Loop
Death:
TNT1 A 0 A_JumpIfInventory("Clip",1,"goaway")
TNT1 A 0 A_GiveInventory("Clip",1)
Stop
goaway:
TNT1 A 0
stop
}
}

actor LightningCheck : Inventory
{
Inventory.amount 2
inventory.maxamount 2
States
{
Spawn:
TNT1 A 1
Stop
}
}