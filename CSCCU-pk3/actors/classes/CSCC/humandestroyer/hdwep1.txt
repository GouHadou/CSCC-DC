actor HDClassWep1 : BaseCSCCWep //need copy
{
Weapon.AmmoUse 4
Weapon.AmmoGive 28
Weapon.SlotNumber 1
Obituary "%o was ripped apart by %k's Destructor."
Inventory.Pickupmessage "Power up! Power Stone!"
weapon.ammotype "HDAmmo1"
inventory.pickupsound "weapon/weaponup"
+WEAPON.AMMO_OPTIONAL
+WEAPON.CHEATNOTWEAPON
+INVENTORY.UNDROPPABLE
DropItem "PowerStoneWepGiver"
Scale 2.0
States
{
Ready:
HDWP F 0 ACS_ExecuteAlways(998,0,WCCS_HUMANDESTROYER)
HDWP F 7 A_WeaponReady
HDWP F 0 A_GiveInventory("HDAmmo1",1)
//HDWP F 1 A_GiveInventory("HDAmmo2",1)
Goto Ready+1
Deselect:
TNT1 A 0 A_SelectWeapon("HDClassWep2")
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
TNT1 A 1 A_Lower
Loop
Select:
TNT1 A 0 A_TakeInventory("Wep2",1)
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
HDWP F 1 A_Raise
Loop
Fire:
TSU0 A 0 A_JumpIfInventory("IsBot", 1, "BotFire")
HDWP F 0 A_JumpIfNoAmmo("NoAmmo")
HDWP FG 2
HDWP H 0 A_PlaySoundEx("weapon/powerstone","Weapon")
HDWP H 0 A_FireCustomMissile("DestructorStart",0,1,8,0)
HDWP HHHGF 2
HDWP F 20
HDWP H 0 A_Refire
Goto Ready+1
Altfire:
HDWP F 0 A_JumpIfInventory("HDAmmo1", 14, "EarthShaker")
Goto NoAmmo
EarthShaker:
HDWP H 0 A_PlaySoundEx("weapon/powerstone","Weapon")
HDWP F 0 A_JumpIfInventory("InBoat",1,"DestroyBoat")
goto Continue
DestroyBoat:
HDWP F 0 A_TakeInventory("InBoat", 1)
goto Continue+1
Continue:
HDWP FFFGH 2
HDWP F 0 A_FireCustomMissile("EarthShakerRadius",0,0,0)
HDWP FFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 0 A_SpawnItemEx("EarthShakerSpawner",0,0,0,0,random(0,30),0,random(-180,180),SXF_NOCHECKPOSITION)
HDWP FFFFF 1 ThrustThingZ(0,30,0,0)
HDWP H 0 A_TakeInventory("HDAmmo1", 14)
ContinueLoop:
HDWP H 2 A_JumpIf(Z-Floorz==0,"End")
goto Continueloop
End:
HDWP H 0 A_PlaySoundEx("weapon/powerstone","Weapon")
HDWP F 0 A_FireCustomMissile("EarthShakerRadius",0,0,0)
HDWP FFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 0 A_SpawnItemEx("EarthShakerSpawner",0,0,0,0,random(0,30),0,random(-180,180),SXF_NOCHECKPOSITION)
HDWP H 30
HDWP HGF 2
HDWP F 0 A_Refire
Goto Ready+1
NoAmmo:
HDWP F 1 ACS_Execute(979,0)
Goto Ready+1

BotFire:
JCHN A 2 A_JumpIfCloser(300, "EarthShaker")
HDWP FG 2
HDWP H 0 A_PlaySoundEx("weapon/powerstone","Weapon")
HDWP H 0 A_FireCustomMissile("DestructorStart",0,0,8,0)
HDWP HHHGF 2
HDWP F 20
HDWP H 0 A_Refire
Goto Ready+1
}
}

actor HDAmmo1 : Ammo
{
+INVENTORY.IGNORESKILL
inventory.amount 1
inventory.maxamount 28
}

actor DestructorStart
{
Obituary "%o was ripped apart by %k's Destructor."
PROJECTILE
-NOGRAVITY
+FLOORHUGGER
Damage (20)
//damagetype "Stone"
damagetype "HD"
Height 5
Radius 6
Scale 2.5
States
{
Spawn:
TNT1 A 1
goto death
XDeath:
Crash:
TNT1 A 1
stop
Death:
TNT1 A 1 A_SpawnItemEx("Destructor",0,0,0,20,0,0,0)
stop
}
}

actor Destructor// : MaceFX1
{
-SOLID
PROJECTILE
//-NOGRAVITY
+RIPPER
+DONTBLAST
+FLOORHUGGER
bouncefactor 0.0
maxstepheight 0
Damage (0)
Height 5
Radius 10
Scale 2.5
gravity 3.0
States
{
Spawn:
TNT1 A 2
TNT1 A 0 A_PlaySoundEx("weapon/powerstone","weapon")
TNT1 A 0 A_SpawnItemEx("DestructorTrail",0,0,0,0,5,5,random(-180,180),SXF_NOCHECKPOSITION)
loop
}
}

actor DestructorTrail
{
Obituary "%o was ripped apart by %k's Destructor."
PROJECTILE
-NOGRAVITY
Radius 5
Height 5
Damage (20)
//damagetype "Stone"
damagetype "HD"
Scale 2.5
States
{
Spawn:
HDRK A 1
loop
Death:
MMFX BCDE 2 A_Stop
stop
}
}

actor DestructorUp
{
Obituary "%o was ripped apart by %k's Destructor."
-SOLID
+MISSILE
+NOGRAVITY
+ACTIVATEPCROSS
+NOBLOCKMAP
+NOBLOCKMONST
+DROPOFF
Height 5
+RIPPER
Scale 2.5
Radius 6
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_ChangeFlag("MISSILE",0)
TNT1 A 1 A_Recoil(-1)
TNT1 A 0 A_JumpIf(z-ceilingz==0-5,"Death2")
TNT1 A 0 A_JumpIf(momx!=0.0,"Ledge")
TNT1 A 0 A_JumpIf(momy!=0.0,"Ledge")
loop
Ledge:
TNT1 A 0 A_PlaySoundEx("weapon/powerstone","weapon")
TNT1 A 1 A_SpawnItemEx("Destructor",4,0,4,18,0,0,0,0,0)
stop
Death:
TNT1 A 0
stop
Goto Spawn
Crash:
XDeath:
Death2:
TNT1 A 1
stop
}
}

actor DestructorDown
{
Obituary "%o was ripped apart by %k's Destructor."
-SOLID
+NOGRAVITY
+ACTIVATEPCROSS
+NOBLOCKMAP
+DROPOFF
+MISSILE
+RIPPER
Height 5
Scale 2.5
Radius 6
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_ChangeFlag("MISSILE",0)
TNT1 A 1 A_JumpIf(z-floorz==0,"Death")
TNT1 A 1 A_JumpIf(z-floorz==0,"Death")
TNT1 A 1 A_JumpIf(z-floorz==0,"Death")
TNT1 A 1 A_JumpIf(z-floorz==0,"Death")
TNT1 A 1 A_JumpIf(z-floorz==0,"Death")
TNT1 A 1 A_JumpIf(z-floorz==0,"Death")
loop
Death:
TNT1 A 0 A_PlaySoundEx("weapon/powerstone","weapon")
TNT1 A 1 A_SpawnItemEx("Destructor",4,0,4,18,0,0,0,0,0)
stop
}
}

actor EarthShakerRadius
{
PROJECTILE
+FLOORHUGGER
+RIPPER
maxstepheight 0
damage (0)
damagetype "EarthShaker"
obituary "%o was all shook up by %k's Earth Shaker."
speed 0
Scale 2.5
States
{
Spawn:
TNT1 A 0
TNT1 A 1 A_Explode(5, 300, 0)
stop
}
}

actor EarthShakerSpawner
{
PROJECTILE
+FLOORHUGGER
+RIPPER
+DOOMBOUNCE
bouncefactor 1.0
maxstepheight 0
obituary "%o was all shook up by %k's Earth Shaker."
damage (0)
damagetype "Dummy"
speed 20
height 5
Radius 10
Scale 2.5
States
{
Spawn:
TNT1 A 10
Goto Death
Death:
TNT1 A 0
TNT1 A 1 A_SpawnItemEx("DestructorTrail",0,0,0,0,5,5,random(-180,180),SXF_NOCHECKPOSITION)
stop
}
}

actor EarthShakerDamager : DestructorTrail
{
obituary "%o was all shook up by %k's Earth Shaker."
Damage (40)
//damagetype "Stone"
damagetype "HD"
Scale 2.5
}