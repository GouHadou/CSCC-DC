actor HDClassWep2 : BaseCSCCWep //need copy
{
Weapon.AmmoUse 4
Weapon.AmmoGive 14 //28
Weapon.SlotNumber 2
Obituary "%o was ripped apart by %k's Destructor."
Inventory.Pickupmessage "Power up! Power Stone!"
weapon.ammotype "HDAmmo2"
inventory.pickupsound "weapon/weaponup"
+WEAPON.AMMO_OPTIONAL
+WEAPON.CHEATNOTWEAPON
+INVENTORY.UNDROPPABLE
DropItem "PowerStoneWepGiver"
Scale 2.0
States
{
Ready:
HDWP Q 0 ACS_ExecuteAlways(998,0,WCCS_HUMANDESTROYER)
HDWP Q 7 A_WeaponReady
HDWP Q 0 A_GiveInventory("HDAmmo1",1)
//HDWP Q 1 A_GiveInventory("HDAmmo2",1)
Goto Ready+1
Deselect:
TNT1 A 0 A_SelectWeapon("HDClassWep1")
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
TNT1 A 1 A_Lower
Loop
Select:
TNT1 A 0 A_GiveInventory("Wep2",1)
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
HDWP F 1 A_Raise
Loop
Fire:
HDWP F 0 A_JumpIfNoAmmo("NoAmmo")
HDWP IJK 2
HDWP H 0 A_PlaySoundEx("weapon/mbuster","Weapon")
LEHU D 0 A_JumpIf(ACS_ExecuteWithResult(630,0)>0, "TeamGift")
NoTeamFire:
HDWP H 0 A_FireCustomMissile("EarthGift",0,1,8,0)
FireEnd:
HDWP LMNOPQ 2
HDWP Q 20
HDWP H 0 A_Refire
Goto Ready+1
TeamGift:
LEHU D 0 A_JumpIf(ACS_ExecuteWithResult(630,0)==1, "LightGift")
LEHU D 0 A_JumpIf(ACS_ExecuteWithResult(630,0)==2, "WilyGift")
LEHU D 0 A_JumpIf(ACS_ExecuteWithResult(630,0)==3, "CossackGift")
LEHU D 0 A_JumpIf(ACS_ExecuteWithResult(630,0)==4, "MrXGift")
goto NoTeamFire//Failsafe
LightGift:
LEHU D 0 A_FireCustomMissile("EarthGiftL",0,1,8,0)
goto FireEnd
WilyGift:
LEHU D 0 A_FireCustomMissile("EarthGiftW",0,1,8,0)
goto FireEnd
CossackGift:
LEHU D 0 A_FireCustomMissile("EarthGiftC",0,1,8,0)
goto FireEnd
MrXGift:
LEHU D 0 A_FireCustomMissile("EarthGiftX",0,1,8,0)
goto FireEnd
Altfire:
HDWP F 0 A_JumpIfInventory("HDAmmo2", 28, "GaiaShield")
Goto NoAmmo
GaiaShield:
HDWP QPON 2
HDWP H 0 A_PlaySoundEx("item/refill","Weapon")
HDWP H 0 A_TakeInventory("HDAmmo2", 28)
HDWP F 0 A_FireBullets(0,0,1,0,"GaiaShieldGiver") 
GaiaShieldEnd:
HDWP ABCDENOPQ 2
HDWP Q 30
HDWP F 0 A_Refire
Goto Ready+1
NoAmmo:
HDWP Q 1 ACS_Execute(979,0)
Goto Ready+1
}
}

actor HDAmmo2 : Ammo
{
+INVENTORY.IGNORESKILL
inventory.amount 1
inventory.maxamount 28
}

actor EarthGift : ProjectileBase
{
Obituary "%o was ripped apart by %k's Destructor."
PROJECTILE
-NOGRAVITY
Radius 5
Height 5
Damage (10)
//Damagetype "Stone"
Damagetype "HDGift"
speed 20
Scale 2.5
States
{
Spawn:
HDRK A 1
loop
Death:
MMFX B 0 A_Jump(16, "BigHealth")
MMFX B 2 A_Stop
MMFX C 0 A_SpawnItemEX("SmallHealthHD")
MMFX CDE 2 A_Stop
stop
BigHealth:
MMFX B 2 A_Stop
MMFX C 0 A_SpawnItemEX("BigHealthHD")
MMFX CDE 2 A_Stop
stop
}
}

actor EarthGiftL : EarthGift
{
states
{
Death:
MMFX B 0 A_Jump(16, "BigHealth")
MMFX B 2 A_Stop
MMFX C 0 A_SpawnItemEX("SmallHealthHDL")
MMFX CDE 2 A_Stop
stop
BigHealth:
MMFX B 2 A_Stop
MMFX C 0 A_SpawnItemEX("BigHealthHDL")
MMFX CDE 2 A_Stop
stop
}
}

actor EarthGiftW : EarthGift
{
states
{
Death:
MMFX B 0 A_Jump(16, "BigHealth")
MMFX B 2 A_Stop
MMFX C 0 A_SpawnItemEX("SmallHealthHDW")
MMFX CDE 2 A_Stop
stop
BigHealth:
MMFX B 2 A_Stop
MMFX C 0 A_SpawnItemEX("BigHealthHDW")
MMFX CDE 2 A_Stop
stop
}
}

actor EarthGiftC : EarthGift
{
states
{
Death:
MMFX B 0 A_Jump(16, "BigHealth")
MMFX B 2 A_Stop
MMFX C 0 A_SpawnItemEX("SmallHealthHDC")
MMFX CDE 2 A_Stop
stop
BigHealth:
MMFX B 2 A_Stop
MMFX C 0 A_SpawnItemEX("BigHealthHDC")
MMFX CDE 2 A_Stop
stop
}
}

actor EarthGiftX : EarthGift
{
states
{
Death:
MMFX B 0 A_Jump(16, "BigHealth")
MMFX B 2 A_Stop
MMFX C 0 A_SpawnItemEX("SmallHealthHDX")
MMFX CDE 2 A_Stop
stop
BigHealth:
MMFX B 2 A_Stop
MMFX C 0 A_SpawnItemEX("BigHealthHDX")
MMFX CDE 2 A_Stop
stop
}
}

actor SmallHealthHD : CustomInventory
{
inventory.pickupmessage "Picked up a health capsule."
inventory.pickupsound "item/energyup"
Scale 2.0
States
{
Spawn:
HBAL ABABABABABABABABABABABABABABABABAB 6 ACS_NamedExecuteAlways("CSACS_HealthSet")
stop
DefaultState:
TNT1 A 0 A_SetTranslucent(1.0, 0)
goto Spawn+2
Bonehead:
TNT1 A 0 A_SetTranslucent(0.5, 0)
goto Spawn+2

Pickup:
Health:
TNT1 A 0 A_JumpIfInventory("CannotUseHealth",1,"No")
TNT1 A 0 A_JumpIf(CallACS("CSACS_Heal",1)==1,"No")
TNT1 A 0 ACS_NamedExecuteAlways("CSACS_Heal",0,0,15)
TNT1 A 0 A_PlaySound("item/energyup")
stop
No:
TNT1 A 0
fail
}
}

actor BigHealthHD : CustomInventory
{
inventory.pickupmessage "Picked up a large health capsule."
inventory.pickupsound "item/energyup"
Scale 2.0
States
{
Spawn:
HBAL CDCDCDCDCDCDCDCDCDCDCDCDCDCDCDCDCD 6 ACS_NamedExecuteAlways("CSACS_HealthSet")
stop
DefaultState:
TNT1 A 0 A_SetTranslucent(1.0, 0)
goto Spawn+2
Bonehead:
TNT1 A 0 A_SetTranslucent(0.5, 0)
goto Spawn+2

Pickup:
Health:
TNT1 A 0 A_JumpIfInventory("CannotUseHealth",1,"No")
TNT1 A 0 A_JumpIf(CallACS("CSACS_Heal",1)==1,"No")
TNT1 A 0 ACS_NamedExecuteAlways("CSACS_Heal",0,0,30)
TNT1 A 0 A_PlaySound("item/energyup")
stop
No:
TNT1 A 0
fail
}
}
actor SmallHealthHDL : SmallHealthHD
{
states
{
Pickup:
LEHU D 0 A_JumpIf(ACS_ExecuteWithResult(630,0)==1, "Health")
stop
}
}
actor SmallHealthHDW : SmallHealthHD
{
states
{
Pickup:
LEHU D 0 A_JumpIf(ACS_ExecuteWithResult(630,0)==2, "Health")
stop
}
}
actor SmallHealthHDC : SmallHealthHD
{
states
{
Pickup:
LEHU D 0 A_JumpIf(ACS_ExecuteWithResult(630,0)==3, "Health")
stop
}
}
actor SmallHealthHDX : SmallHealthHD
{
states
{
Pickup:
LEHU D 0 A_JumpIf(ACS_ExecuteWithResult(630,0)==4, "Health")
stop
}
}
actor BigHealthHDL : BigHealthHD
{
states
{
Pickup:
LEHU D 0 A_JumpIf(ACS_ExecuteWithResult(630,0)==1, "Health")
stop
}
}
actor BigHealthHDW : BigHealthHD
{
states
{
Pickup:
LEHU D 0 A_JumpIf(ACS_ExecuteWithResult(630,0)==2, "Health")
stop
}
}
actor BigHealthHDC : BigHealthHD
{
states
{
Pickup:
LEHU D 0 A_JumpIf(ACS_ExecuteWithResult(630,0)==3, "Health")
stop
}
}
actor BigHealthHDX : BigHealthHD
{
states
{
Pickup:
LEHU D 0 A_JumpIf(ACS_ExecuteWithResult(630,0)==4, "Health")
stop
}
}

actor GaiaShieldGiver : CustomInventory
{
inventory.pickupmessage "You've been given a Gaia Shield!"
inventory.amount 1
inventory.maxamount 1
radius 15
height 15
+INVENTORY.AUTOACTIVATE
states
{
Spawn:
HDRK A 1
HDRK A 1 A_GiveToTarget("HDAmmo2",28)
stop
Pickup:
TNT1 A 0
TNT1 A 0 A_GiveInventory("GaiaShieldProtection")
TNT1 A 0 A_SpawnItemEX("GaiaShieldEffect")
TNT1 A 1 //A_GiveInventory("GaiaShieldGravity")
stop
Death:
TNT1 A 1
stop
}
}

actor GaiaShieldProtection : PowerProtection
{
damagefactor "Normal", 0.5
powerup.color "00 00 00", 0.0
powerup.duration 350
}

actor GaiaShieldGravity : CustomInventory
{
inventory.maxamount 0
+INVENTORY.AUTOACTIVATE
+INVENTORY.ALWAYSPICKUP
states
{
Spawn:
TNT1 A 1
stop
Pickup:
TNT1 A 1 ThrustThingZ(0, 100, 1, 0)
TNT1 A 1 A_JumpIfInTargetInventory("GaiaShieldProtection",1,"Pickup")
goto Death
Death:
TNT1 A 0
stop
}
}

actor GaiaShieldEffect
{
Height 0
Radius 0
+NOINTERACTION
-SOLID
+NOGRAVITY
+MISSILE
States
{
Spawn:
TNT1 A 0 A_JumpIfInTargetInventory("CutterFlag",998,"Death")
TNT1 A 1 A_GiveToTarget("GaiaGiveFX1",1)
TNT1 A 0 A_JumpIfInTargetInventory("CutterFlag",998,"Death")
TNT1 A 1 A_GiveToTarget("GaiaGiveFX2",1)
TNT1 A 0 A_JumpIfInTargetInventory("CutterFlag",998,"Death")
TNT1 A 1 A_GiveToTarget("GaiaGiveFX3",1)
TNT1 A 0 A_JumpIfInTargetInventory("CutterFlag",998,"Death")
TNT1 A 1 A_GiveToTarget("GaiaGiveFX4",1)
TNT1 A 0 A_JumpIfInTargetInventory("CutterFlag",998,"Death")
TNT1 A 0 A_JumpIfInTargetInventory("GaiaShieldProtection",1,"Spawn")
goto Death
Death:
TNT1 A 1
stop
}
}

actor GaiaGiveFX1 : CustomInventory
{
inventory.amount 1
inventory.maxamount 1
//+AUTOACTIVATE
States
{
Spawn:
TNT1 A 1
loop
//Use:
Pickup:
TNT1 A 1 A_SpawnItemEx("GaiaFX1",0,0,0,momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
stop
}
}

actor GaiaGiveFX2 : GaiaGiveFX1
{
States
{
//Use:
Pickup:
TNT1 A 1 A_SpawnItemEx("GaiaFX2",0,0,0,momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
stop
}
}

actor GaiaGiveFX3 : GaiaGiveFX1
{
States
{
//Use:
Pickup:
TNT1 A 1 A_SpawnItemEx("GaiaFX3",0,0,0,momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
stop
}
}

actor GaiaGiveFX4 : GaiaGiveFX1
{
States
{
//Use:
Pickup:
TNT1 A 1 A_SpawnItemEx("GaiaFX4",0,0,0,momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
stop
}
}

actor GaiaFX1
{
scale 2.5
- SOLID
+NOGRAVITY
+CLIENTSIDEONLY
States
{
Spawn:
HDGA A 1
HDGA A 1
stop
}
}


actor GaiaFX2
{
scale 2.5
- SOLID
+NOGRAVITY
+CLIENTSIDEONLY
States
{
Spawn:
HDGA B 1
HDGA B 1
stop
}
}


actor GaiaFX3
{
scale 2.5
- SOLID
+NOGRAVITY
+CLIENTSIDEONLY
States
{
Spawn:
HDGA C 1
HDGA C 1
stop
}
}


actor GaiaFX4
{
scale 2.5
- SOLID
+NOGRAVITY
+CLIENTSIDEONLY
States
{
Spawn:
HDGA D 1
HDGA D 1
stop
}
}

actor HDHit : MessatsuHit
{
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_GiveToTarget("HDHitPickup",1)
stop
}
}

actor HDHitPickup : MessatsuHitPickup
{
States
{
Pickup:
TNT1 A 0 A_GiveToTarget("HDAmmo2",4)
stop
}
}

actor HDGiftHit : MessatsuHit
{
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_GiveToTarget("HDGiftHitPickup",1)
stop
}
}

actor HDGiftHitPickup : MessatsuHitPickup
{
States
{
Pickup:
TNT1 A 0 A_GiveToTarget("HDAmmo2",2)
stop
}
}