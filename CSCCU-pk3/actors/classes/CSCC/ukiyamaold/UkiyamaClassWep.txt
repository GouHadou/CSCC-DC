actor UkiyamaClassWepOld : Base8BDMWeapon 
{
Weapon.AmmoUse 56
Weapon.AmmoGive 28 
Weapon.SlotNumber 1  
Inventory.Pickupmessage "Power Up! Meteor!"
weapon.ammotype "UkiMeteorAmmo" 
weapon.ammotype2 "WindTornadoAmmo"
inventory.pickupsound "weapon/weaponup" 
+WEAPON.AMMO_OPTIONAL
+WEAPON.CHEATNOTWEAPON 
+INVENTORY.UNDROPPABLE
Scale 2.0
inventory.icon "TNT1A0"
States
{
Ready:
METE B 0 ACS_ExecuteAlways(998,0,WCCS_UKIYAMA)
METE B 1 A_WeaponReady 
Charge:
METE B 15 A_WeaponReady
METE B 0 A_GiveInventory("UkiMeteorAmmo",1)
METE B 0 A_JumpIf(z-floorz>0,"Charge")
METE B 0 A_GiveInventory("WindTornadoAmmo",2)
goto Charge 
Deselect: 
TNT1 A 0 
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
METE B 1 A_Lower
Loop
Select: 
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
METE B 1 A_Raise
Loop
Fire:
METE B 0 A_JumpIfInventory("UkiMeteorAmmo",56,"MeteorTime")  
METE B 0 A_JumpIfInventory("IsBot", 1, "Swap")
METE B 1
goto Ready+1
MeteorTime: 
METE B 1
METE B 0 A_JumpIf(ACS_ExecuteWithResult(143,0)==0,"BlueStaff")
METE B 0 A_JumpIf(ACS_ExecuteWithResult(143,0)==1,"RedStaff")
METE B 0 A_JumpIf(ACS_ExecuteWithResult(143,0)==2,"OrangeStaff")
METE B 0 A_JumpIf(ACS_ExecuteWithResult(143,0)==3,"PurpleStaff")
METE B 0 A_PlaySoundEx("weapon/magnetmissile","Weapon") 
METE B 0 A_SpawnItemEx("MeteorStaffOld",10,0,13,0,0,0)
METE B 0 A_TakeInventory("UkiMeteorAmmo",56)
METE CDE 6
METE E 15
METE B 2
Goto Ready+1
BlueStaff: 
METE B 0 A_PlaySoundEx("weapon/magnetmissile","Weapon") 
METE B 0 A_SpawnItemEx("MeteorStaffBlue",10,0,13,0,0,0)
METE B 0 A_TakeInventory("UkiMeteorAmmo",56)
METE CDE 6
METE E 15
METE B 2
Goto Ready+1
RedStaff: 
METE B 0 A_PlaySoundEx("weapon/magnetmissile","Weapon") 
METE B 0 A_SpawnItemEx("MeteorStaffRed",10,0,13,0,0,0)
METE B 0 A_TakeInventory("UkiMeteorAmmo",56)
METE CDE 6
METE E 15
METE B 2
Goto Ready+1
OrangeStaff: 
METE B 0 A_PlaySoundEx("weapon/magnetmissile","Weapon") 
METE B 0 A_SpawnItemEx("MeteorStaffOrange",10,0,13,0,0,0)
METE B 0 A_TakeInventory("UkiMeteorAmmo",56)
METE CDE 6
METE E 15
METE B 2
Goto Ready+1
PurpleStaff: 
METE B 0 A_PlaySoundEx("weapon/magnetmissile","Weapon") 
METE B 0 A_SpawnItemEx("MeteorStaffPurple",10,0,13,0,0,0)
METE B 0 A_TakeInventory("UkiMeteorAmmo",56)
METE CDE 6
METE E 15
METE B 2
Goto Ready+1
AltFire: 
METE B 0 A_JumpIfInventory("WindTornadoAmmo",14,"TornadoTime") 
METE B 1 
Goto Ready+1
TornadoTime:
UKIY D 0 A_PlaySoundEx("weapon/WindTornadoStart","Weapon") 
UKIY D 0 A_FireCustomMissile("WindTornadoSpawnerStart",0,0,0,-20) 
UKIY D 0 A_TakeInventory("WindTornadoAmmo",14)
UKIY DFGH 3
METE B 50  
Goto Ready+1
NoAmmo: 
METE B 1 
Goto Ready+1 
Swap:
METE B 1 A_SelectWeapon("UkiRevolverWep")
Goto Ready+1 
}
}

actor UkiMeteorAmmo : Ammo 
{
+INVENTORY.IGNORESKILL
inventory.amount 1
inventory.maxamount 56
}

actor WindTornadoAmmo : Ammo 
{
+INVENTORY.IGNORESKILL
inventory.amount 1
inventory.maxamount 56
}

actor WindTornadoSpawnerStart 
{
PROJECTILE 
Radius 35 
Height 5 
scale 2.5
Obituary "%o was sucked into %k's Wind Tornado."
+Ripper
+Noclip
speed 5 
States
{
Spawn:
TNTA A 1 
TNTA A 0 A_SpawnItemEx("WindTornadoSpawnerMoving",0,0,0,5,0,0)
stop
}
}

actor WindTornadoSpawnerMoving 
{
PROJECTILE 
Radius 35 
Height 5 
scale 2.5 
Obituary "%o was sucked into %k's Wind Tornado."
+Ripper 
+DontBlast
+FloorHugger
reactiontime 20
States
{
Spawn:
TNTA A 0 A_countdown
TNTA A 2 A_SpawnItemEx("WindTornadoAttack1",0,0,0,5,0,35)
TNTA A 2 A_SpawnItemEx("WindTornadoAttack2",0,0,0,5,0,35)
TNTA A 2 A_SpawnItemEx("WindTornadoAttack3",0,0,0,5,0,35)
TNTA A 2 A_SpawnItemEx("WindTornadoAttack4",0,0,0,5,0,35)
TNTA A 0
loop
Death:
stop 
}
}


actor WindTornadoAttack1 
{
PROJECTILE 
Radius 35 
Height 30 
Yscale 2.5
Xscale 4 
Obituary "%o was sucked into %k's Wind Tornado." 
+Ripper
+DontBlast
damage (2) //Change all these to 2 for all wind tornado attacks whenever the wind damage gets fixed atm op vs megaman
damagetype "Wind" 
States
{
Spawn:
TNTA A 0
goto Part1
Part1:
UKIY L 1 
UKIY L 1 A_JumpIfCloser(60,"Rise1")
goto Part2
Part2:
UKIY I 1 
UKIY I 1 A_JumpIfCloser(60,"Rise2")
goto Part3
Part3:
UKIY J 1
UKIY J 1 A_JumpIfCloser(60,"Rise3")
goto Part4
Part4:
UKIY K 1
UKIY K 1 A_JumpIfCloser(60,"Rise4")
goto Part1
Rise1:
UKIY L 1 A_GiveToTarget("WindTornadoRise",1)
goto Part2
Rise2:
UKIY I 1 A_GiveToTarget("WindTornadoRise",1)
goto Part3
Rise3:
UKIY J 1 A_GiveToTarget("WindTornadoRise",1)
goto Part4
Rise4:
UKIY K 1 A_GiveToTarget("WindTornadoRise",1)
goto Part1
Death:
stop 
}
}

actor WindTornadoAttack2 
{
PROJECTILE 
Radius 35 
Height 30 
Yscale 2.5
Xscale 4
Obituary "%o was sucked into %k's Wind Tornado." 
+Ripper 
+DontBlast
damage (2)
damagetype "Wind" 
States
{
Spawn:
TNTA A 0
goto Part1
Part1:
UKIY I 1 
UKIY I 1 A_JumpIfCloser(60,"Rise1")
goto Part2
Part2:
UKIY J 1
UKIY J 1 A_JumpIfCloser(60,"Rise2")
goto Part3
Part3:
UKIY K 1
UKIY K 1 A_JumpIfCloser(60,"Rise3")
goto Part4
Part4:
UKIY L 1
UKIY L 1 A_JumpIfCloser(60,"Rise4")
goto Part1
Rise1:
UKIY I 1 A_GiveToTarget("WindTornadoRise",1)
goto Part2
Rise2:
UKIY J 1 A_GiveToTarget("WindTornadoRise",1)
goto Part3
Rise3:
UKIY K 1 A_GiveToTarget("WindTornadoRise",1)
goto Part4
Rise4:
UKIY L 1 A_GiveToTarget("WindTornadoRise",1)
goto Part1
Death:
stop 
}
}

actor WindTornadoAttack3
{
PROJECTILE 
Radius 35 
Height 30 
Yscale 2.5
Xscale 4 
Obituary "%o was sucked into %k's Wind Tornado."
+Ripper
+DontBlast
damage (2) 
damagetype "Wind" 
States
{
Spawn:
TNTA A 0
goto Part1
Part1:
UKIY J 1
UKIY J 1 A_JumpIfCloser(60,"Rise1")
goto Part2
Part2:
UKIY K 1
UKIY K 1 A_JumpIfCloser(60,"Rise2")
goto Part3
Part3:
UKIY L 1
UKIY L 1 A_JumpIfCloser(60,"Rise3")
goto Part4
Part4:
UKIY I 1
UKIY I 1 A_JumpIfCloser(60,"Rise4")
goto Part1
Rise1:
UKIY J 1 A_GiveToTarget("WindTornadoRise",1)
goto Part2
Rise2:
UKIY K 1 A_GiveToTarget("WindTornadoRise",1)
goto Part3
Rise3:
UKIY L 1 A_GiveToTarget("WindTornadoRise",1)
goto Part4
Rise4:
UKIY I 1 A_GiveToTarget("WindTornadoRise",1)
goto Part1
Death:
stop 
}
}

actor WindTornadoAttack4 
{
PROJECTILE 
Radius 35 
Height 30 
Yscale 2.5
Xscale 4 
Obituary "%o was sucked into %k's Wind Tornado."
+Ripper
+DontBlast
damage (2) 
damagetype "Wind" 
States
{
Spawn:
TNTA A 0
goto Part1
Part1:
UKIY K 1
UKIY K 1 A_JumpIfCloser(60,"Rise1")
goto Part2
Part2:
UKIY L 1
UKIY L 1 A_JumpIfCloser(60,"Rise2")
goto Part3
Part3:
UKIY I 1
UKIY I 1 A_JumpIfCloser(60,"Rise3")
goto Part4
Part4:
UKIY J 1
UKIY J 1 A_JumpIfCloser(60,"Rise4")
goto Part1
Rise1:
UKIY K 1 A_GiveToTarget("WindTornadoRise",1)
goto Part2
Rise2:
UKIY L 1 A_GiveToTarget("WindTornadoRise",1)
goto Part3
Rise3:
UKIY I 1 A_GiveToTarget("WindTornadoRise",1)
goto Part4
Rise4:
UKIY J 1 A_GiveToTarget("WindTornadoRise",1)
goto Part1
Death:
stop 
}
}

actor WindTornadoRise : CustomInventory
{
+INVENTORY.AUTOACTIVATE
States
{
Pickup:
TNT1 A 1 ThrustThingZ(0,30,0,0)
stop
}
}


actor MeteorStaffOld
{
PROJECTILE
translation "192:192=23:23", "198:198=43:43"
+SHOOTABLE
-NOBLOCKMAP
+RIPPER
-SOLID
+NoGravity
+DontFall
+NOTARGETSWITCH
painchance 255
mass 99999
damagefactor "Stone",0.0 
damagefactor "Wind",0.0 
Radius 10 
Height 48 
scale 2.5 
damage (0) 
+FORCEYBILLBOARD 
speed 0 
reactiontime 300
States
{
Spawn:
METE HGFIJ 2 A_GiveToTarget("MeteorCounter", 1)
Goto Spawn2
Spawn2: 
TNTA A 0 A_SpawnitemEX ("MeteorSpawnerOld",random(500,-500),random(500,-500),40,0,0,0,0)
METE JKLMNO 2 A_CountDown
TNTA A 0 A_Stop
TNTA A 0 A_SpawnitemEX ("MeteorSpawnerOld",random(500,-500),random(500,-500),40,0,0,0,0)
loop
Death:
METE J 0 A_ChangeFlag("Shootable",0)
METE JIHGF 2 A_TakeFromTarget("MeteorCounter", 999)
stop
}
}

actor MeteorStaffBlue : MeteorStaffOld
{
translation "192:192=192:192", "198:198=198:198"
States
{
Spawn:
METE HGFIJ 2 A_GiveToTarget("MeteorCounter", 1)
Goto Spawn2
Spawn2: 
TNTA A 0 A_SpawnitemEX ("MeteorSpawnerBlue",random(500,-500),random(500,-500),40,0,0,0,0)
METE JKLMNO 2 A_CountDown
TNTA A 0 A_Stop
TNTA A 0 A_SpawnitemEX ("MeteorSpawnerBlue",random(500,-500),random(500,-500),40,0,0,0,0)
loop
Death:
METE J 0 A_ChangeFlag("Shootable",0)
METE JIHGF 2 A_TakeFromTarget("MeteorCounter", 999)
stop
}
}

actor MeteorStaffRed : MeteorStaffOld
{
translation "192:192=16:16", "198:198=178:178"
States
{
Spawn:
METE HGFIJ 2 A_GiveToTarget("MeteorCounter", 1)
Goto Spawn2
Spawn2: 
TNTA A 0 A_SpawnitemEX ("MeteorSpawnerRed",random(500,-500),random(500,-500),40,0,0,0,0)
METE JKLMNO 2 A_CountDown
TNTA A 0 A_Stop
TNTA A 0 A_SpawnitemEX ("MeteorSpawnerRed",random(500,-500),random(500,-500),40,0,0,0,0)
loop
Death:
METE J 0 A_ChangeFlag("Shootable",0)
METE JIHGF 2 A_TakeFromTarget("MeteorCounter", 999)
stop
}
}

actor MeteorStaffOrange : MeteorStaffOld
{
translation "192:192=249:249", "198:198=218:218"
States
{
Spawn:
METE HGFIJ 2 A_GiveToTarget("MeteorCounter", 1)
Goto Spawn2
Spawn2: 
TNTA A 0 A_SpawnitemEX ("MeteorSpawnerOrange",random(500,-500),random(500,-500),40,0,0,0,0)
METE JKLMNO 2 A_CountDown
TNTA A 0 A_Stop
TNTA A 0 A_SpawnitemEX ("MeteorSpawnerOrange",random(500,-500),random(500,-500),40,0,0,0,0)
loop
Death:
METE J 0 A_ChangeFlag("Shootable",0)
METE JIHGF 2 A_TakeFromTarget("MeteorCounter", 999)
stop
}
}

actor MeteorStaffPurple : MeteorStaffOld
{
translation "192:192=231:231", "198:198=254:254"
States
{
Spawn:
METE HGFIJ 2 A_GiveToTarget("MeteorCounter", 1)
Goto Spawn2
Spawn2: 
TNTA A 0 A_SpawnitemEX ("MeteorSpawnerPurple",random(500,-500),random(500,-500),40,0,0,0,0)
METE JKLMNO 2 A_CountDown
TNTA A 0 A_Stop
TNTA A 0 A_SpawnitemEX ("MeteorSpawnerPurple",random(500,-500),random(500,-500),40,0,0,0,0)
loop
Death:
METE J 0 A_ChangeFlag("Shootable",0)
METE JIHGF 2 A_TakeFromTarget("MeteorCounter", 999)
stop
}
}

actor MeteorSpawnerOld
{
+NOGRAVITY
+MISSILE
+SKYEXPLODE
Radius 5
Height 5
scale 2.5
damage (0)
+FORCEXYBILLBOARD
+NoClip
+NoBlockMap
States
{
Spawn:
TNT1 A 1 ThrustThingZ(0,9999,0,0)
TNT1 A 1
TNT1 A 0 A_ChangeFlag("NoClip",0)
loop
Death:
TNT1 A 0 A_SpawnitemEX("MeteorOld",0,0,0,10,0,-20)
TNT1 A 5
stop
}
}

actor MeteorSpawnerBlue : MeteorSpawnerOld
{
States
{
Death:
TNT1 A 0 A_SpawnitemEX("MeteorBlue",0,0,0,10,0,-20)
TNT1 A 5
stop
}
}


actor MeteorSpawnerRed : MeteorSpawnerOld
{
States
{
Death:
TNT1 A 0 A_SpawnitemEX("MeteorRed",0,0,0,10,0,-20)
TNT1 A 5
stop
}
}

actor MeteorSpawnerOrange : MeteorSpawnerOld
{
States
{
Death:
TNT1 A 0 A_SpawnitemEX("MeteorOrange",0,0,0,10,0,-20)
TNT1 A 5
stop
}
}

actor MeteorSpawnerPurple : MeteorSpawnerOld
{
States
{
Death:
TNT1 A 0 A_SpawnitemEX("MeteorPurple",0,0,0,10,0,-20)
TNT1 A 5
stop
}
}

actor MeteorOld
{
Obituary "%o was turned into a crater by %k's Meteors."
Projectile
-FORCEXYBILLBOARD
translation "192:192=23:23", "198:198=43:43"
Damagetype "Stone"
+DontBlast
Radius 5
Height 5
damage (0)
scale 2.5
States
{
Spawn:
METE P 1
loop
Death:
CBOM K 0 A_PlaySoundEx("weapon/MeteorLand", "Weapon")
METE Q 2 A_Explode (20,150,0)
METE RST 2
stop
}
}

actor MeteorBlue : MeteorOld
{
translation "192:192=192:192", "198:198=198:198"
}

actor MeteorRed : MeteorOld
{
translation "192:192=16:16", "198:198=178:178"
}

actor MeteorOrange : MeteorOld
{
translation "192:192=249:249", "198:198=218:218"
}

actor MeteorPurple : MeteorOld
{
translation "192:192=231:231", "198:198=254:254"
}