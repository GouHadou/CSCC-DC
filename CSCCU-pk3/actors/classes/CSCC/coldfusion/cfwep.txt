actor FusionBombClassWep : Base8BDMWeapon
{
Weapon.AmmoUse 4
Weapon.AmmoGive 28
Weapon.SlotNumber 5
weapon.ammotype "FusionClassAmmo"
Obituary "%o was fused by %k's Fusion Bomb."
Inventory.Pickupmessage "Power Up! Fusion Bomb!"
inventory.pickupsound "weapon/weaponup"
+WEAPON.AMMO_OPTIONAL
+INVENTORY.UNDROPPABLE
+WEAPON.CHEATNOTWEAPON
inventory.icon "TNT1A0"
dropitem "FusionBombWepGiver"
Scale 2.0
States
{
Ready:
CFGV B 1
CFGV B 0 A_GunFlash
CFGV B 0 A_TakeInventory("AltFlag", 1)
CFGV B 0 A_TakeInventory("CFDashFlag", 10)
CFGV B 0 A_JumpIfInventory("Once", 1, "Ready2")
CFGV B 0 A_GiveInventory("Once", 1)
CFGV B 0 ACS_ExecuteAlways(998,0,WCCS_COLDFUSION)
Ready2:
CFGV BBBBB 1 A_WeaponReady
CFGV B 0 A_GiveInventory("FusionClassAmmo", 1)
CFGV B 0 A_GiveInventory("FusionShield", 1)
loop
Deselect:
TNT1 A 0 A_SelectWeapon("FusionBombClassWepX")
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
TNT1 A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
CFGV B 1 A_Raise
Loop
Fire:
CFGV B 0 A_JumpIfNoAmmo("NoAmmo")
CFGV B 0 A_JumpIfInventory("IsBot", 1, "BotCheck1")
CFGV B 0 A_PlaySoundEx("weapon/crackerthrow","Weapon")
CFGV B 0 A_FireCustomMissile ("FusionBombClass", 0, 1, 8, 0)
CFGV CDE 1
CFGV FGH 3
CFGV IJ 2
CFGV A 10
CFGV KL 6
CFGV MMMMBBBB 1 A_WeaponReady(WRF_NOPRIMARY|WRF_NOSWITCH)
Goto Ready2
AltFire:
CFGV B 0 A_JumpIfInventory("FusionClassAmmo", 1, 1)
Goto NoAmmo
CFGV B 0 A_TakeInventory("InBoat", 1)
CFGV B 0 A_GiveInventory("AltFlag", 1)
CFGV J 0 A_TakeInventory("FusionClassAmmo", 2)
CFGV J 0 A_GiveInventory("CFDashFlag", 1)
CFGV J 0 A_Recoil(-10)
CFGV I 0 A_CheckFloor(2)
CFGV I 0 ThrustThingZ(0, 25, 1, 0)
CFGV J 0 A_PlaySoundEx("weapon/superboost","Weapon")
CFGV J 0 A_SpawnItemEX("BoosterFX", 0, -10, 0, 0, 0, 0, 0, 0)
CFGV J 0 A_SpawnItemEX("BoosterFX", 0, 10, 0, 0, 0, 0, 0, 0)
Goto AltHold
AltHold:
CFGV I 0 A_JumpIfInventory("FusionClassAmmo", 1, 1)
Goto DashBrake
CFGV I 0 A_TakeInventory("FusionClassAmmo", 2)
CFGV I 0 A_GiveInventory("CFDashFlag", 1)
CFGV I 0 A_FireCustomMissile("FusionBrake", 0, 0, 0, 0, 30)
CFGV I 1 A_Recoil(-3)
CFGV I 0 A_CheckFloor(2)
CFGV I 0 ThrustThingZ(0, 5, 1, 1)
CFGV I 0 A_PlaySoundEx("weapon/superboost","Weapon")
CFGV I 0 A_SpawnItemEX("BoosterFX", 0, -10, 0, 0, 0, 0, 0, 0)
CFGV I 0 A_SpawnItemEX("BoosterFX", 0, 10, 0, 0, 0, 0, 0, 0)
CFGV I 0 A_GiveInventory("CFDashFlag", 1)
CFGV I 0 A_FireCustomMissile("FusionBrake", 0, 0, 0, 0, 30)
CFGV I 1 A_Recoil(-3)
CFGV I 0 A_CheckFloor(2)
CFGV I 0 ThrustThingZ(0, 5, 1, 1)
CFGV I 0 A_PlaySoundEx("weapon/superboost","Weapon")
CFGV I 0 A_SpawnItemEX("BoosterFX", 0, -10, 0, 0, 0, 0, 0, 0)
CFGV I 0 A_SpawnItemEX("BoosterFX", 0, 10, 0, 0, 0, 0, 0, 0)
CFGV I 0 A_FireCustomMissile("FusionBrake", 0, 0, 0, 0, 30)
CFGV I 1 A_Recoil(-3)
CFGV I 0 A_CheckFloor(2)
CFGV I 0 ThrustThingZ(0, 5, 1, 1)
CFGV I 0 A_PlaySoundEx("weapon/superboost","Weapon")
CFGV I 0 A_SpawnItemEX("BoosterFX", 0, -10, 0, 0, 0, 0, 0, 0)
CFGV I 0 A_SpawnItemEX("BoosterFX", 0, 10, 0, 0, 0, 0, 0, 0)
CFGV I 0 A_GiveInventory("CFDashFlag", 1)
CFGV I 0 A_FireCustomMissile("FusionBrake", 0, 0, 0, 0, 30)
CFGV I 1 A_Recoil(-3)
CFGV I 0 A_CheckFloor(2)
CFGV I 0 ThrustThingZ(0, 5, 1, 1)
CFGV I 0 A_PlaySoundEx("weapon/superboost","Weapon")
CFGV I 0 A_SpawnItemEX("BoosterFX", 0, -10, 0, 0, 0, 0, 0, 0)
CFGV I 0 A_SpawnItemEX("BoosterFX", 0, 10, 0, 0, 0, 0, 0, 0)
CFGV B 0 A_JumpIfInventory("IsBot", 1, "BotCheck2")
CFGV I 0 A_Refire
Goto DashBrake
DashBrake:
CFGV J 0 A_ScaleVelocity(0.50)
CFGV J 0 A_TakeInventory("AltFlag", 1)
CFGV J 0 A_TakeInventory("CFDashFlag", 10)
CFGV I 0 A_FireCustomMissile("FusionBrake", 0, 0, 0, 0, 30)
CFGV IIIJJJ 1 A_PlaySoundEx("misc/bombcount","Weapon")
CFGV B 0 A_ClearRefire
CFGV BBBBB 1  A_WeaponReady(WRF_NOSECONDARY|WRF_NOSWITCH)
Goto Ready2
NoAmmo:
CFGV B 1 ACS_Execute(979,0)
Goto Ready2
Flash:
TNT1 A 0 A_JumpIfInventory("Isdead",1,"NoFlash") 
TNT1 A 0 A_JumpIfInventory("AltFlag",1,"AltFlash")
TNT1 A 1 A_SpawnItemEx("CFWingFX1",-8,0,12,momx,momy,momz,0,SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
loop
AltFlash:
TNT1 A 1 A_SpawnItemEx("CFWingFX2",-8,0,12,momx,momy,momz,0,SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 1 A_SpawnItemEx("CFWingFX2",-8,0,12,momx,momy,momz,0,SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 1 A_SpawnItemEx("CFWingFX3",-8,0,12,momx,momy,momz,0,SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 1 A_SpawnItemEx("CFWingFX3",-8,0,12,momx,momy,momz,0,SXF_ABSOLUTEMOMENTUM|SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_CheckFloor("TakeAlt")
goto Flash
TakeAlt:
TNT1 A 0 A_JumpIfInventory("CFDashFlag", 1, "Flash")
TNT1 A 0 A_TakeInventory("AltFlag", 1)
Goto Flash
NoFlash:
TNT1 A 0
stop

BotCheck1:
ICEH A 0 A_Jump(160, "Airboost")
CFGV A 0 A_Jump(70, 1)
Goto Fire+2
CFGV A 0 A_GiveInventory("FusionClassAmmo", 8)
CFGV A 0 A_JumpIfCloser(512, "AltFire")
Goto Fire+2
BotCheck2:
CFGV A 0 A_Jump(224, "Althold")
Goto DashBrake
Airboost:
//TNT1 A 1 A_JumpIfInventory("IsHovering", 1, "Ready2")
TNT1 A 1 A_JumpIfInventory("IsHovering", 1, "Debug")
CFGV A 2 A_GiveInventory("CFBoostingBot", 1)
Goto Ready2

Debug:
CFGV A 2
Goto Ready2
}
}

actor FusionBombClassWepX : FusionBombClassWep
{
States
{
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
TNT1 A 1 A_Lower
Loop
Select:
TNT1 A 0 A_SelectWeapon("FusionBombClassWep")
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
CFGV B 1 A_Raise
Loop
}
}
actor FusionClassAmmo : Ammo
{
+INVENTORY.IGNORESKILL
inventory.amount 1
inventory.maxamount 28
}

actor AltFlag : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor IsHovering: Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor FusionBombClass
{
Obituary "%o was fused by %k's Fusion Bomb."
PROJECTILE
-NOGRAVITY
Gravity 0.2
Radius 8
Height 8
scale 2.5
damagetype "FusionBomb"
speed 45 
damage (0) 
States
{
Spawn:
CFWP KL 3
loop
Death:
CFWP K 0 A_Stop
CFWP K 0 A_Explode(10, 128, 0, 0, 128) //Explode on impact
CFWP K 0 A_ChangeFlag("NOGRAVITY", 1)
CFWP K 0 ThrustThingZ(0, 8, 0, 1)
CFWP K 0 A_PlaySoundEx("weapon/fusionreaction", "Weapon")
CFWP K 0 A_SpawnItemEx ("FusionBombFusion", 0, 0, 0, 10, 0, 12, 0)
CFWP K 0 A_SpawnItemEx ("FusionBombFusion", 0, 0, 0, 10, 0, 12, 90)
CFWP K 0 A_SpawnItemEx ("FusionBombFusion", 0, 0, 0, 10, 0, 12, 180)
CFWP K 0 A_SpawnItemEx ("FusionBombFusion", 0, 0, 0, 10, 0, 12, 270)
CFWP NOPQ 2 //A_Explode(5, 64, 0, 0, 64)
MMFX EDCB 2// A_Explode(3, 64, 0, 0, 64)
CFWP K 0 A_Stop
CFWP K 0 A_PlaySoundEx("weapon/crackerexplode", "Weapon")
CFWP K 0 A_Explode(15, 128, 0, 0, 128)//CFWP K 0 A_Explode(20, 128, 0)
NAPA EFGHIJKLMNOPQRS 1 
stop
}
}

Actor FusionBombFusion
{
Obituary "%o was fused by %k's Fusion Bomb."
PROJECTILE
+NOCLIP
+NOINTERACTION
Radius 4
Height 4
Scale 2.5
damagetype "FusionBomb"
Speed 20
damage (0)
ReactionTime 20
States
{
Spawn:
CFWP M 0 
CFWP M 0 A_ChangeVelocity(10,0,1,CVF_RELATIVE|CVF_REPLACE)
CFWP M 1 A_Setangle(angle-18.0)
CFWP M 0 A_SpawnItemEx("FusionShadow")
CFWP M 0 A_CountDown
Loop
Death:
CFWP K 0 A_SpawnItemEx ("FusionShatterClass", 0, 0, 0, 5, 0, 12)
stop
}
}

Actor FusionShadow
{
+NOGRAVITY
+NOINTERACTION
+CLIENTSIDEONLY
//Translation "192:192=3:3", "198:198=191:191"
RenderStyle "add"
+FORCEYBILLBOARD
Scale 2.5
Height 1
Radius 1
States
{
Spawn:
CFWP M 1 A_Fadeout(0.05)
Loop
}
}

Actor FusionShatterClass
{
Obituary "%o was fused by %k's Fusion Bomb."
PROJECTILE
+HEXENBOUNCE
-NOGRAVITY
Radius 4
Height 4
Scale 2.5
damagetype "FusionBit"
Speed 20
damage (0)
States
{
Spawn:
CFWP M 3
CFWP M 0 A_ChangeFlag("HEXENBOUNCE", 0)
loop
Death:
CFWP M 0 A_Stop
CFWP M 0 A_ChangeFlag("NOGRAVITY", 1)
CFWP M 0 A_PlaySoundEx("weapon/crackerexplode", "Weapon")
CFWP M 0 A_Explode(20, 80, 0)
NAPA EFGHIJKLMNOPQRS 1
Stop
}
}

actor CFWingFX1
{
-SOLID
+NOGRAVITY
+NOBLOCKMAP
+FIXMAPTHINGPOS
Height 6
Radius 6
+MISSILE
damage 0
scale 2.5
+CLIENTSIDEONLY
+DONTSPLASH
//+NOINTERACTION
States
{
Spawn:
TNT1 A 0
CFWP W 2
stop
}
}

actor CFWingFX2
{
-SOLID
+NOGRAVITY
+NOBLOCKMAP
+FIXMAPTHINGPOS
Height 6
Radius 6
+MISSILE
damage 0
scale 2.5
+CLIENTSIDEONLY
//+NOINTERACTION
States
{
Spawn:
TNT1 A 0
CFWP X 2
stop
}
}

actor CFWingFX3
{
-SOLID
+NOGRAVITY
+NOBLOCKMAP
+FIXMAPTHINGPOS
Height 6
Radius 6
+MISSILE
damage 0
scale 2.5
+CLIENTSIDEONLY
//+NOINTERACTION
States
{
Spawn:
TNT1 A 0
CFWP X 2
stop
}
}


actor FusionBrake
{
PROJECTILE
Radius 8
Height 48
Renderstyle "Translucent"
Alpha 0.75
+DONTBLAST
Damage (6)
Damagetype "Afterburner"
Obituary "%o was trampled by %k's Afterburner."
Speed 50
scale 2.5 
States
{
Spawn:
FIRT A 0
FIRT A 0 ThrustThingZ(0, 0, 0, 0)
FIRT ABC 1
stop

}
}


actor CFDashFlag : Inventory
{
inventory.amount 1
inventory.maxamount 10
}

actor CFNoBoost : Inventory
{
inventory.amount 1
inventory.maxamount 1
}


actor HoverFlag : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor CFHover : Inventory
{
inventory.amount 1
inventory.maxamount 1
}



actor FusionShieldStarter : BasicArmorPickup
{
armor.saveamount 25
armor.savepercent 50
armor.maxabsorb 25
} 

actor FusionShield : BasicArmorBonus
{
armor.saveamount 1
armor.maxsaveamount 25
armor.savepercent 50
}

actor CFBoostGive : CustomInventory
{
inventory.amount 1
inventory.maxamount 1
States
{
Spawn:
TNT1 A 0
stop
Pickup:
TNT1 A 0 ThrustThingZ(0, 40, 0, 0) 
TNT1 A 0 A_PlaySoundEx("weapon/superboost","Weapon")
TNT1 A 0 A_SpawnItemEX("BoosterFX", 0, -10, 0, 0, 0, 0, 0, 0)
TNT1 A 0 A_SpawnItemEX("BoosterFX", 0, 10, 0, 0, 0, 0, 0, 0)
stop
}
}

actor CFBoosting : CustomInventory
{
inventory.amount 1
inventory.maxamount 1
+INVENTORY.AUTOACTIVATE
-INVBAR
States
{
Spawn:
TNT1 A 1
loop
Use:
TNT1 A 0 A_SpawnItemEx("CFBoostMan")
stop
}
}

actor CFBoostMan
{
-SOLID
+NOGRAVITY
+MISSILE
+NOBLOCKMAP
Height 0
Radius 0
scale 2.5
+NOINTERACTION
States
{
Spawn:
TNT1 A 0 
TNT1 A 0 A_GiveToTarget("AltFlag", 1)
TNT1 AAAAAAAA 1 A_GiveToTarget("CFBoostGive",1)
TNT1 A 0 A_GiveToTarget("Hoverflag", 1)
stop
Death:
TNT1 A 0
stop
}
}

actor CFSputterGive : CustomInventory
{
inventory.amount 1
inventory.maxamount 1
States
{
Spawn:
TNT1 A 0
stop
Pickup:
TNT1 A 0 A_PlaySoundEx("weapon/superboost","Weapon")
TNT1 A 0 A_SpawnItemEX("BoosterFX", 0, -10, 0, 0, 0, 0, 0, 0)
TNT1 A 0 A_SpawnItemEX("BoosterFX", 0, 10, 0, 0, 0, 0, 0, 0)
TNT1 A 0 A_JumpIfInventory("IsUnderwater", 1, "UWBoost")
TNT1 A 0 ThrustThingZ(0, 12, 0, 1) 
stop
UWBoost:
TNT1 A 0 ThrustThingZ(0, 4, 0, 1) 
stop
}
}

actor CFSputtering : CustomInventory
{
inventory.amount 1
inventory.maxamount 1
+INVENTORY.AUTOACTIVATE
-INVBAR
States
{
Spawn:
TNT1 A 1
loop
Use:
TNT1 A 0 A_SpawnItemEx("CFSputterMan")
stop
}
}

actor CFSputterMan
{
-SOLID
+NOGRAVITY
+MISSILE
+NOBLOCKMAP
Height 0
Radius 0
scale 2.5
+NOINTERACTION
States
{
Spawn:
TNT1 A 0 
TNT1 A 1 A_GiveToTarget("CFSPutterGive",1)
stop
Death:
TNT1 A 0
stop
}
}

actor CFBoostingBot : CustomInventory
{
inventory.amount 1
inventory.maxamount 1
+INVENTORY.AUTOACTIVATE
-INVBAR
States
{
Spawn:
TNT1 A 1
loop
Use:
TNT1 A 0 A_JumpIfInventory("IsHovering", 1, "Dont")
TNT1 A 0 A_SpawnItemEx("CFBoostManBot")
stop
Dont:
TNT1 A 0// A_SpawnItemEx("CFBoostManBot")
stop
}
}

actor CFBoostManBot
{
-SOLID
+NOGRAVITY
+MISSILE
+NOBLOCKMAP
Height 0
Radius 0
scale 2.5
+NOINTERACTION
States
{
Spawn:
TNT1 A 0 A_JumpifInTargetInventory("IsHovering", 1, "Death")
TNT1 A 0 A_GiveToTarget("IsHovering", 1)
TNT1 A 0 A_GiveToTarget("AltFlag", 1)
TNT1 AAAAAAAAA 1 A_GiveToTarget("CFBoostGive",1)
TNT1 A 2 
TNT1 AAAAAAAAAAAAAAAAAAA 5 A_GiveToTarget("CFSPutterGive",1)
TNT1 A 10 A_TakeFromTarget("IsHovering", 1)
stop
Death:
TNT1 A 0
stop
}
}