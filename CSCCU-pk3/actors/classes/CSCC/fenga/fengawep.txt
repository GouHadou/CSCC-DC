actor TrollSentry : BaseCSCCWep
{
Weapon.AmmoUse 2
Weapon.AmmoGive 28
Weapon.SlotNumber 1
Obituary "%o was trolled by %k's Rage Seeker."
weapon.ammotype "TrollAmmo"
Inventory.Pickupmessage "Support Item! E-Piece!"
inventory.pickupsound "weapon/weaponup"
+WEAPON.AMMO_OPTIONAL
+WEAPON.CHEATNOTWEAPON
+INVENTORY.UNDROPPABLE
dropitem "BalladeCrackerWepGiver"
Scale 2.0
States
{
Spawn:
BHND Z 0
BHND Z 1 
stop
Ready:
BHND A 0 ACS_ExecuteAlways(998,0,47)
BHND A 12 A_WeaponReady(WRF_NOSWITCH)
BHND A 0 A_GiveInventory("TrollAmmo",2)
Goto Ready+1
Deselect:
TNT1 A 0 A_SelectWeapon("TrollSentry")
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
BHND A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
BHND A 1 A_Raise
Loop
Fire:
BHND A 0 A_JumpIfInventory("IsBot", 1, "BotFire")
BHND A 0 A_JumpIfNoAmmo("NoAmmo")
BHND A 0 A_PlaySoundEx("weapon/crackerthrow","Weapon")
BHND A 0 A_FireCustomMissile("HomingTroller",0,1,8,0)
BHND BCDEFG 2
BHND HI 2
BHND A 13
BHND A 0 A_Refire
Goto Ready+1
BotFire:
BHND A 0 A_JumpIfInventory("TrollAmmo",28,"Place")
BHND A 0 A_PlaySoundEx("weapon/crackerthrow","Weapon")
BHND A 0 A_FireCustomMissile("HomingTroller",0,1,8,0)
BHND BCDEFG 2
BHND HI 2
BHND A 13
BHND A 0 A_Refire
Goto Ready+1
Altfire:
BHND A 0 A_JumpIfInventory("TrollAmmo",28,"Place")
goto Ready+1
Place:
BHND A 0 A_TakeInventory("TrollAmmo",28)
BHND A 0 A_SpawnItemEx("TrollerSentry",15,0,10,0,0,0,0)
BHND IH 5
BHND HI 5
BHND A 10
goto Ready+1
NoAmmo:
BHND A 1 ACS_Execute(979,0)
Goto Ready+1
}
}

actor TrollAmmo : Ammo
{
+INVENTORY.IGNORESKILL
inventory.amount 1
inventory.maxamount 28
}

actor HomingTroller : MageStaffFX2
{
Obituary "%o was trolled by %k's Rage Seeker."
PROJECTILE
Radius 6
Height 7
scale 2.5
damagetype "RageSeeker"
damage (0)
speed 55
+SEEKERMISSILE
-EXTREMEDEATH
+MTHRUSPECIES
reactiontime 60
States
{
Spawn:
BALA A 3 A_MStaffTrack
MAGG A 0 A_SpawnItemEx("TrollExplosion")
BALA B 3 A_MStaffTrack
MAGG A 0 A_SpawnItemEx("TrollExplosion")
BALA C 3 A_MStaffTrack
MAGG A 0 A_SpawnItemEx("TrollExplosion")
BALA D 3 A_MStaffTrack
MAGG A 0 A_SpawnItemEx("TrollExplosion")
loop
Death:
BALA A 0 A_Stop
BALA A 0 A_PlaySoundEx("weapon/crackerexplode", "Weapon")
BALA A 0 A_Explode(15, 128, 0)
NAPA EFGHIJKLMNOPQRS 1
stop
}
}

actor TrollExplosion
{
Obituary "%o was trolled by %k's Rage Seeker."
PROJECTILE
Radius 7
Height 7 
scale 2.5
speed 26
damage (0)
damagetype "RageSeeker"
States
{
Spawn:
MMFX BCDE 2 A_Explode(5,10,0)
stop
}
}

actor TrollerSentry
{
-NOGRAVITY
MONSTER
//+MISSILE
+NOCLIP
+DONTBLAST
+SKYEXPLODE
-SOLID
-COUNTKILL
+FRIENDLY
+SHOOTABLE
+NEVERRESPAWN
health 50
speed 0
scale 2.5
+MISSILEMORE
+MISSILEEVENMORE
Radius 12
Height 32
reactiontime 128//256
meleerange 20
states
{
Spawn:
METT F 0 A_ChangeFlag("NOGRAVITY",0)
METT F 0 A_ChangeFlag("NOCLIP",0)
METT F 0 A_ClearTarget
METT D 10
METT A 0 A_GiveInventory("CutterFlag",2)//1
METT A 0 A_JumpIfInventory("CutterFlag",35,"Death")
Goto See
See:
METT F 0 A_ChangeFlag("INVULNERABLE",1)
METT A 0 //A_ClearTarget
METT DDDDDDDDDD 2 A_Chase
METT A 0 A_JumpIfTargetInLOS ("Missile", 0, 0)
METT A 0 A_GiveInventory("CutterFlag",4)//2
METT A 0 A_JumpIfInventory("CutterFlag",35,"Death")
loop
Missile:
METT F 0 A_JumpIfInTargetInventory("InvisibleFlag",1,"Ignore")
METT F 0 A_ChangeFlag("INVULNERABLE",0)
METT E 1 A_FaceTarget
METT A 0 A_JumpIfInventory("CutterFlag",35,"Death")
METT A 0 A_PlaySoundEx("misc/devilfire","Voice")
METT F 8 A_CustomMissile("TrollShot",5,0,0,0)
METT F 4 A_GiveInventory("CutterFlag",4)//2
METT A 0 A_JumpIfTargetInLOS ("Missile", 0, 0)
METT E 4 A_ClearTarget
Goto See 
Ignore:
METT D 1 A_ClearTarget
Goto See 
Death:
MMFX BCDE 2 
stop
}
}

actor TrollShot : ProjectileBase
{
obituary "%o was trolled by %k's Troll Sentry."
PROJECTILE
Damage (12)
Speed 35
scale 2.5
Height 8
Radius 8
Damagetype "TrollSentry"
States
{
Spawn:
BASB A 1
loop
}
}

actor TrollSentryBot : TrollSentry
{
States
{
Deselect:
TNT1 A 0 A_SelectWeapon("TrollSentryBot")
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
TNT1 A 1 A_Lower
Loop
Fire:
BHND A 0 A_JumpIfInventory("TrollAmmo",28,"Place")
BHND A 0 A_PlaySoundEx("weapon/crackerthrow","Weapon")
BHND A 0 A_FireCustomMissile("HomingTroller",0,1,8,0)
BHND BCDEFG 2
BHND HI 2
BHND A 13
Goto Ready+1
Place:
BHND A 0 A_TakeInventory("TrollAmmo",28)
BHND A 0 A_SpawnItemEx("TrollerSentry",15,0,10,0,0,0,0)
BHND IH 5
BHND HI 5
BHND A 100
goto Ready+1
}
}