actor TsukiClassIGWeapon : Weapon
{
Weapon.SlotNumber 1
scale 2.0
Inventory.Pickupmessage "You got End of All!"
weapon.ammotype2 "GhostlyCloakAmmo"
+WEAPON.AMMO_OPTIONAL
+WEAPON.DONTBOB
+WEAPON.NOAUTOAIM
+INVENTORY.UNDROPPABLE
+WEAPON.CHEATNOTWEAPON
States
{
Spawn:
TSU0 I 0
stop
Ready:
TSU0 R 0 ACS_ExecuteAlways(998,0,355) //Now you will REALLY need a black/almost black translation
goto Ready2
Ready2:
TSU0 R 0 A_GiveInventory("GhostlyCloakCounter",1)
TSU0 R 0 A_JumpIfInventory("IGNilExistanceOn",1,"NilReady")
TSU0 R 0 A_GiveInventory("IGNilExistanceCounter",1)
TSU0 R 1 A_WeaponReady(2)
loop
NilReady:
TSU0 R 1 A_WeaponReady(2)
goto Ready2
Deselect:
TNT1 A 0 A_SetTranslucent(1,0)
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
TSU0 R 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
TSU0 R 1 A_Raise
Loop
Fire:
TSU0 R 0 A_JumpIfInventory("TsuIGNilFlag",1,"IGDevour")
TSU0 R 0 A_JumpIfInventory("GhostlyCloakOn",1,"EndCloak")
TSU0 R 0 A_JumpIfInventory("IGNilExistanceOn",1,"NilReady")
TSU0 R 0 A_PlaySoundEx("weapon/pharaoh2","Weapon")
TSU0 S 0 A_FireCustomMissile("EndOfAllShot",0,0)
TSU0 S 0 A_FireCustomMissile("EndOfAllWave",0,0)
TSU0 S 3
TSU0 R 22
goto Ready2
IGDevour:
TSU0 R 0 A_PlaySoundEx("weapon/mirrordeflect","Weapon")
TSU0 S 1 A_SpawnItemEx ("IGSoulDevour1",cos(-pitch)*60,-2,20+(sin(-pitch)*60),0,0,0,0,SXF_NOCHECKPOSITION)
TSU0 S 1 A_SpawnItemEx ("IGSoulDevour2",cos(-pitch)*60,-2,20+(sin(-pitch)*60),0,0,0,0,SXF_NOCHECKPOSITION)
TSU0 S 1 A_SpawnItemEx ("IGSoulDevour3",cos(-pitch)*60,-2,20+(sin(-pitch)*60),0,0,0,0,SXF_NOCHECKPOSITION)
TSU0 R 1 A_SpawnItemEx ("IGSoulDevour4",cos(-pitch)*60,-2,20+(sin(-pitch)*60),0,0,0,0,SXF_NOCHECKPOSITION)
TSU0 R 8
goto Ready2
AltFire:
TSU0 R 0 A_JumpIfInventory("GhostlyCloakOn",1,"EndCloak")
TSU0 R 0 A_JumpIfInventory("TsuIGNilFlag",1,"NilExist")
TSU0 R 0 A_JumpIfInventory("GhostlyCloakCounter",350,"StartCloak")
TSU0 S 3
TSU0 R 10
goto Ready2
StartCloak:
TSU0 S 0 A_PlaySoundEx("weapon/tsukisentinel", "Weapon")
TSU0 S 3 A_SetTranslucent(1,0)
TSU0 S 3 A_SetTranslucent(0,0)
TSU0 S 3 A_SetTranslucent(1,0)
TSU0 S 3 A_SetTranslucent(0,0)
TSU0 S 3 A_SetTranslucent(1,0)
TSU0 S 3 A_SetTranslucent(0,0)
TSU0 S 3 A_SetTranslucent(1,0)
TSU0 S 3 A_SetTranslucent(0,0)
TSU0 S 3 A_SetTranslucent(1,0)
TSU0 S 3 A_SetTranslucent(0,0)
TSU0 S 3 A_SetTranslucent(1,0)
TSU0 S 3 A_SetTranslucent(0,0)
TSU0 S 0 A_ChangeFlag("NOTARGET",1)
TSU0 S 0 A_ChangeFlag("CANTSEEK",1)
Goto Cloaked
Cloaked:
TSU0 R 0 A_SetTranslucent(0,0)
TSU0 R 0 A_TakeInventory("GhostlyCloakCounter",1)
TSU0 R 0 A_GiveInventory("GhostlyCloakOn",1)
TSU0 R 1 A_WeaponReady(2)
TSU0 R 0 A_JumpIfInventory("GhostlyCloakCounter",1,"Cloaked")
Goto EndCloak
EndCloak:
TSU0 R 0 A_TakeInventory("GhostlyCloakCounter",350)
TSU0 R 0 A_TakeInventory("GhostlyCloakOn",1)
TSU0 R 0 A_PlaySoundEx("weapon/tsukisentinel", "Weapon")
TSU0 S 0 A_ChangeFlag("NOTARGET",0)
TSU0 S 0 A_ChangeFlag("CANTSEEK",0)
TSU0 S 3 A_SetTranslucent(0,0)
TSU0 S 3 A_SetTranslucent(1,0)
TSU0 S 3 A_SetTranslucent(0,0)
TSU0 S 3 A_SetTranslucent(1,0)
TSU0 S 3 A_SetTranslucent(0,0)
TSU0 S 3 A_SetTranslucent(1,0)
TSU0 S 3 A_SetTranslucent(0,0)
TSU0 S 3 A_SetTranslucent(1,0)
TSU0 S 3 A_SetTranslucent(0,0)
TSU0 S 3 A_SetTranslucent(1,0)
TSU0 S 3 A_SetTranslucent(0,0)
TSU0 S 3 A_SetTranslucent(1,0)
Goto Ready2
NilExist:
TSU0 S 0 A_JumpIfInventory("IGNilExistanceOn",1,"NoNilTrigger")
TSU0 S 0 A_JumpIfInventory("IGNilExistanceCounter",350,"NilTrigger")
TSU0 S 3
TSU0 R 10
goto Ready2
NilTrigger: 
TSU0 S 0 A_GiveInventory("IGNilExistanceOn",1)
TSU0 S 1 A_GunFlash
Goto Ready2
NoNilTrigger:
TSU0 S 1
Goto Ready2
Flash:
TNT1 A 0 A_ChangeFlag("SHOOTABLE",0)
TNT1 A 0 A_ChangeFlag("NOTARGET",1)
TNT1 A 0 A_ChangeFlag("CANTSEEK",1)
//TNT1 A 0 A_ChangeFlag("DONTRIP",0)
TNT1 A 0 A_SetTranslucent(0,0)
TNT1 A 1 A_SpawnItemEx("TsukiGhost",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
TNT1 A 0 A_TakeInventory("IGNilExistanceCounter",2)
TNT1 A 0 A_JumpIfInventory("IGNilExistanceCounter",1,"Flash")
TNT1 A 0 A_TakeInventory("IGNilExistanceOn",1)
TNT1 A 0 A_SetTranslucent(1,0)
TNT1 A 0 A_ChangeFlag("SHOOTABLE",1)
TNT1 A 0 A_ChangeFlag("NOTARGET",0)
TNT1 A 0 A_ChangeFlag("CANTSEEK",0)
//TNT1 A 0 A_ChangeFlag("DONTRIP",0)
Stop
}
}

actor TsuChangerRemover : CustomInventory
{
inventory.amount 1
inventory.maxamount 1
+INVENTORY.AUTOACTIVATE
states
{
Use:
TNT1 A 0 A_TakeInventory("TsuChargeChanger",1)
TNT1 A 0 A_TakeInventory("TsuRapidChanger",1)
TNT1 A 0 A_TakeInventory("TsuCannonChanger",1)
TNT1 A 0 A_TakeInventory("TsuDevourChanger",1)
TNT1 A 0 A_TakeInventory("TsuCometChanger",1)
TNT1 A 0 A_TakeInventory("TsuNociChanger",1)
TNT1 A 0 A_TakeInventory("TsuTerrorChanger",1)
TNT1 A 0 A_TakeInventory("TsuNilChanger",1)
stop
}
}

actor TsuFlagRemover : CustomInventory
{
inventory.amount 1
inventory.maxamount 1
+INVENTORY.AUTOACTIVATE
states
{
Use:
TNT1 A 0 A_TakeInventory("TsuChargeFlag",1)
TNT1 A 0 A_TakeInventory("TsuRapidFlag",1)
TNT1 A 0 A_TakeInventory("TsuCannonFlag",1)
TNT1 A 0 A_TakeInventory("TsuDevourFlag",1)
TNT1 A 0 A_TakeInventory("TsuCometFlag",1)
TNT1 A 0 A_TakeInventory("TsuNociFlag",1)
TNT1 A 0 A_TakeInventory("TsuTerrorFlag",1)
TNT1 A 0 A_TakeInventory("TsuNilFlag",1)
stop
}
}

actor TsuIgSwapper : CustomInventory
{
inventory.amount 1
inventory.maxamount 1
+INVENTORY.AUTOACTIVATE
states
{
Use:
TNT1 A 0 A_GiveInventory("TsukiClassIGWeapon",1)
TNT1 A 0 A_GiveInventory("TsuIGRailFlag",1)
TNT1 A 0 A_GiveInventory("TsuIGRailChanger",1)
TNT1 A 0 A_GiveInventory("TsuIGNilChanger",1)
TNT1 A 0 A_GiveInventory("GhostlyCloakCounter",350)
TNT1 A 0 A_GiveInventory("IGNilExistanceCounter",350)
TNT1 A 0 A_TakeInventory("TsukiClassWeapon",99)
TNT1 A 0 A_TakeInventory("SentinelWispsCounter",9999)
TNT1 A 0 A_TakeInventory("CannonChargeCounter",9999)
TNT1 A 0 A_TakeInventory("CometAmmoCounter",9999)
TNT1 A 0 A_TakeInventory("NociAmmoCounter",9999)
TNT1 A 0 A_TakeInventory("TerrorAmmoCounter",9999)
TNT1 A 0 A_TakeInventory("NilAmmoCounter",9999)
TNT1 A 0 A_SelectWeapon("TsukiClassIGWeapon")
TNT1 A 0 A_SetTranslucent(1,0)
TNT1 A 0 A_ChangeFlag("SHOOTABLE",1)
TNT1 A 0 A_ChangeFlag("NOTARGET",0)
TNT1 A 0 A_ChangeFlag("CANTSEEK",0)
stop
}
}

actor TsuIGRailFlag : TsuFlagBase
{
}

actor TsuIGNilFlag : TsuFlagBase
{
}

actor TsuIGRailChanger : TsuChangerBase
{
inventory.icon "TZRAIL"
states
{
Use:
Use:
TNT1 A 0 A_JumpIfInventory("TsuIGRailFlag",1,"NoChange")
TNT1 A 0 A_JumpIfInventory("IGNilExistanceOn",1,"NoChange")
TNT1 A 0 A_JumpIfInventory("GhostlyCloakOn",1,"NoChange")
TNT1 A 0 A_GiveInventory("TsuIGRailFlag",1)
TNT1 A 0 A_TakeInventory("TsuIGNilFlag",1)
fail
}
}

actor TsuIGNilChanger : TsuChangerBase
{
inventory.icon "TZNIL"
states
{
Use:
TNT1 A 0 A_JumpIfInventory("TsuIGNilFlag",1,"NoChange")
TNT1 A 0 A_JumpIfInventory("IGNilExistanceOn",1,"NoChange")
TNT1 A 0 A_JumpIfInventory("GhostlyCloakOn",1,"NoChange")
TNT1 A 0 A_GiveInventory("TsuIGNilFlag",1)
TNT1 A 0 A_TakeInventory("TsuIGRailFlag",1)
fail
}
}

actor GhostlyCloakCounter : Inventory
{
inventory.amount 1
inventory.maxamount 350
}

actor GhostlyCloakAmmo : Ammo //Remove this class from ACS
{
inventory.amount 1
inventory.maxamount 350
}

actor IGNilExistanceCounter : Inventory
{
inventory.amount 1
inventory.maxamount 350
}

actor GhostlyCloakOn : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor IGNilExistanceOn : Inventory
{
inventory.amount 1
inventory.maxamount 1
}


actor EndOfAllShot : FastProjectileBase
{
PROJECTILE
+LOOKALLAROUND
+SKYEXPLODE
+DONTBLAST
Radius 5
Height 5
scale 2.5
damage (200)
Obituary "%o had his end foreseen by %k's End of All."
damagetype "Instagib"
speed 256
States
{
Spawn:
TSU0 QPO 1
loop
Death:
TSU0 CDECDEFGH 1
stop
}
}

actor EndOfAllWave
{
PROJECTILE
+LOOKALLAROUND
+SKYEXPLODE
+DONTBLAST
+RIPPER
+PAINLESS
+CLIENTSIDEONLY
+NONETID
Radius 5
Height 5
scale 2.5
damage (0)
damagetype "Dummy"
speed 20
Reactiontime 3
States
{
Spawn:
TNT1 A 1
TNT1 A 0 A_SpawnItemEx ("EndOfAllPulse",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
TNT1 A 1 A_Countdown
loop
Death:
TNT1 A 1
stop
}
}

actor EndOfAllPulse
{
PROJECTILE
+FORCEXYBILLBOARD
+SKYEXPLODE
+DONTBLAST
+NOINTERACTION
Radius 0
Height 0
scale 2.5 
damage (0)
speed 0
States
{
Spawn:
TSU0 Q 1
TSU0 QPO 2
stop
}
}

actor IGSoulDevour1
{
PROJECTILE
+FORCEXYBILLBOARD
+SKYEXPLODE
+DONTBLAST
+NOINTERACTION
+NONETID
+CLIENTSIDEONLY
+NOTIMEFREEZE
Radius 0
Height 0
scale 2.5 
damage (0)
speed 0
States
{
Spawn:
TSU2 A 2
stop
}
}

actor IGSoulDevour2 : IGSoulDevour1
{
States
{
Spawn:
TSU2 B 2
stop
}
}

actor IGSoulDevour3 : IGSoulDevour1
{
States
{
Spawn:
TSU2 C 2
stop
}
}

actor IGSoulDevour4 : IGSoulDevour1
{
-NONETID
-CLIENTSIDEONLY
States
{
Spawn:
TSU2 D 1
TSU2 D 0 A_SpawnItemEx("IGSoulDevourD",0,0,0,0,0,0,0,SXF_ABSOLUTEMOMENTUM|SXF_NOCHECKPOSITION)
TSU2 D 1
stop
}
}

actor IGSoulDevourD
{
PROJECTILE
+LOOKALLAROUND
+SKYEXPLODE
+DONTBLAST
+FORCEXYBILLBOARD
+RIPPER
+MTHRUSPECIES
Speed 0
Obituary "%o had his soul completely devoured by %k's Soul Eater."
Damage (200)
damagetype "Instagib"
Height 20
Radius 20
States
{
Spawn:
TNT1 A 1
Stop
}
}

actor TsukiGhost
{
PROJECTILE
+FORCEXYBILLBOARD
+SKYEXPLODE
+DONTBLAST
+NOINTERACTION
Radius 0
Height 0
scale 2.5 
damage (0)
speed 0
States
{
Spawn:
TSU4 XAXAXAXA 1
stop
}
}