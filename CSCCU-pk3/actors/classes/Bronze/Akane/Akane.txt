Actor IsAkane : Inventory{}

actor Akane : ClassBaseCSCC
{
player.displayname "akane"
player.soundclass "akane"
player.damagescreencolor "black"
player.forwardmove 0.75 0.75
player.sidemove 0.75, 0.75 
player.jumpz 15
Health 115
Player.MaxHealth 115
player.startitem "AkaneClassItems"
states
{
Spawn:
AKNE A 0
AKNE B 1
AKNE A 1
Goto Spawn+2
See:
AKNE BCDE 5
Goto Spawn
Missile:
AKNE F 5
AKNE G 4
goto Spawn
ClassDeath:
AKNE "#" 0 SetPlayerProperty(0, 0, 4)
AKNE "#" 0 A_NoBlocking
AKNE "#" 0 A_GiveInventory("CutterFlag",999)
AKNE "#" 0 A_GiveInventory("KnightFlag",999)
AKNE "#" 0 A_GiveInventory("IsDead",1)
AKNE "#" 0 A_GiveToTarget("KilledMeStock",1)
AKNE "#" 0 A_Stop
AKNE "#" 1 A_GiveToTarget("KilledMe",1)
AKNE "#" 0 A_PlayerScream
AKNE "#" 5 A_SetTranslucent(1.0, 0)
AKNE "#" 5 A_SetTranslucent(0.9, 0)
AKNE "#" 5 A_SetTranslucent(0.8, 0)
AKNE "#" 5 A_SetTranslucent(0.7, 0)
AKNE "#" 5 A_SetTranslucent(0.6, 0)
AKNE "#" 5 A_SetTranslucent(0.5, 0)
AKNE "#" 5 A_SetTranslucent(0.4, 0)
AKNE "#" 5 A_SetTranslucent(0.3, 0)
AKNE "#" 5 A_SetTranslucent(0.2, 0)
AKNE "#" 5 A_SetTranslucent(0.1, 0)
AKNE "#" 5 A_SetTranslucent(0.0, 0)
AKNE Z 1 A_CheckPlayerDone
wait
}
}

Actor DarkSplitProtect : PowerProtection
{
PowerUp.Duration 15
DamageFactor "DarkSplit", 0.4
}

actor AkaneColorBase : CustomInventory
{
States
{
Pickup:
TNT1 A 0
TNT1 A 0 A_JumpIfInventory("LightTeamFlag",1,"LightFire")
TNT1 A 0 A_JumpIfInventory("WilyTeamFlag",1,"WilyFire")
TNT1 A 0 A_JumpIfInventory("CossackTeamFlag",1,"CossackFire")
TNT1 A 0 A_JumpIfInventory("KingTeamFlag",1,"KingFire")
TNT1 A 0 A_JumpIfInventory("IsAkane",1,"Default")
stop
}
}

//Item
Actor ShadowPusher : Inventory{}

actor ShadowPullItem : CustomInventory
{
inventory.amount 1
inventory.maxamount 1
inventory.icon "SHAPULL"
scale 2.0
Tag "Pull of Darkness"
+INVBAR
states
{
Spawn:
SHPL I 1
loop
Use:
TNT1 A 0 A_PlaySoundEx("item/ItemUseMM9","SoundSlot6")
TNT1 A 0 A_JumpIfInventory("ShadowPusher",1,"Delete")
TNT1 A 0 A_GiveInventory("ShadowPusher",1)
fail
Delete:
TNT1 A 0 A_TakeInventory("ShadowPusher",1)
fail
Deny:
TNT1 A 0 A_PlaySoundEx("weapon/noammo","SoundSlot6")
fail
}
}

actor AkaneClassItems : CustomInventory
{
inventory.amount 1
inventory.maxamount 1
States
{
Spawn:
TNT1 A 0
stop
Pickup:
TNT1 A 0
TNT1 A 0 A_GiveInventory("IsAkane")
TNT1 A 0 A_GiveInventory("DarknessWithin1")
TNT1 A 0 A_GiveInventory("DarknessWithin2")
TNT1 A 0 A_GiveInventory("DarknessWithinAmmo", 32)
TNT1 A 0 A_GiveInventory("ShadowPullItem")
TNT1 A 0 A_GiveInventory("CanUseItems")
stop
}
}