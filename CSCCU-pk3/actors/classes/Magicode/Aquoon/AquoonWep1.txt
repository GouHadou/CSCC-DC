Actor AquoonIceAmmo : Ammo {Inventory.MaxAmount 400}

Actor AquoonWeapon1 : MegaBuster
{
+WEAPON.ALT_AMMO_OPTIONAL
+WEAPON.CHEATNOTWEAPON
Tag "Dry Ice Shotgun / Cold Stream"
Inventory.Icon "AQFMA0"
Weapon.SlotNumber 1
Weapon.AmmoType "AquoonIceAmmo"
Obituary "%o was given the cold shoulder by %k."
States
{
Ready:
TNT1 A 0 A_GunFlash
TNT1 A 0 ACS_ExecuteAlways(998,0,789)
GoTo Ready2
Ready2:
AQBS A 1 A_WeaponReady
AQBS A 0 A_JumpIfInventory("ColdStreamFired",1,1)
GoTo Ready2
AQBS A 0 A_JumpIfInventory("User1_Trigger",1,"Detonate")
GoTo Ready2
Detonate:
AQBS E 2
AQBS A 10 A_GiveInventory("ColdStreamAct",1)
AQBS A 0 A_TakeInventory("ColdStreamFired",999)
AQBS A 0 A_TakeInventory("ColdStreamAct",999)
AQBS A 0 A_TakeInventory("User1_Trigger",999)
GoTo Ready2
Fire:
AQBS F 0 A_JumpIfInventory("SmashFlag",1,"PreFS")
AQBS F 0 A_JumpIfInventory("AquoonIceAmmo",80,1)
GoTo Ready2
AQBS F 0 A_TakeInventory("AquoonIceAmmo",80)
AQBS F 0 A_PlaySoundEX("Aquoon/Shotgun","Weapon")
AQBS F 0 A_FireCustomMissile("DryIceShotgunShot",0,1,8,0)
AQBS FFFFFFFFF 0 A_FireCustomMissile("DryIceShotgunShot",Random(-12,12),0,8,0,0,Random(-12,12))
AQBS FG 2
AQBS A 14
GoTo Ready2
AltFire:
AQBS A 0 A_JumpIfInventory("SmashFlag",1,"PreFS")
AQBS A 0 A_JumpIfInventory("ColdStreamFired",7,"Ready2")
AQBS A 0 A_JumpIfInventory("AquoonIceAmmo",40,1)
GoTo Ready2
AQBS F 0 A_TakeInventory("AquoonIceAmmo",40)
AQBS F 0 A_GiveInventory("ColdStreamFired",1)
AQBS F 0 A_PlaySoundEX("misc/waterslide","Weapon")
AQBS F 0 A_FireCustomMissile("ColdStream",0,0,8,0)
AQBS FG 2
AQBS A 4
GoTo Ready2
PreFS:
AQBS A 0 A_TakeInventory("SmashFlag",999)
AQBS A 0 A_PlaySoundEx("weapon/pchargelong","Weapon")
PreFSWait:
AQBS B 1 A_SpawnItemEX("FragmentedSharkFX1",0,0,45,MomX,MomY,MomZ,0,SXF_ABSOLUTEMOMENTUM)
AQBS C 1 A_SpawnItemEX("FragmentedSharkFX2",0,0,45,MomX,MomY,MomZ,0,SXF_ABSOLUTEMOMENTUM)
AQBS D 1 A_SpawnItemEX("FragmentedSharkFX3",0,0,45,MomX,MomY,MomZ,0,SXF_ABSOLUTEMOMENTUM)
AQBS E 1 A_SpawnItemEX("FragmentedSharkFX4",0,0,45,MomX,MomY,MomZ,0,SXF_ABSOLUTEMOMENTUM)
AQBS E 0 A_GiveInventory("CutterFlag",1)
AQBS E 0 A_JumpIfInventory("CutterFlag",14,1)
GoTo PreFSWait
FinalSmash:
AQBS A 0 A_StopSoundEx("Weapon")
AQBS A 0 A_TakeInventory("CutterFlag",999)
AQBS A 0 A_GiveInventory("FragmentedSharkArmor",1)
AQBS A 0 A_GiveInventory("FragmentedSharkSpeed",1)
AQBS A 0 A_ChangeFlag(THRUACTORS,1)
AQBS A 0 SetPlayerProperty(0,1,3)
AQBS A 0 A_GiveInventory("FragmentedSharkAnim",1)
FinalSmashLoop:
FGSK AA 0 A_SpawnItemEX("IceDissolveFX",-40,0,0,Random(-20,20),Random(-20,20),Random(-20,20))
FGSK A 0 A_SpawnItemEX("SharkFragment",-40,0,0,Random(-40,40),Random(-40,40),Random(-40,10))
FGSK A 0 A_SpawnItemEX("FragmentedSharkSpawner",-70,0,24,MomX,MomY,MomZ,0,SXF_ABSOLUTEMOMENTUM)
FGSK A 1 A_GiveInventory("CutterFlag",1)
FGSK A 0 A_JumpIfInventory("CutterFlag",420,1)
GoTo FinalSmashLoop
FinalSmashEnd:
AQBS A 0 SetPlayerProperty(0,0,3)
AQBS A 0 A_ChangeFlag(THRUACTORS,0)
AQBS A 0 A_TakeInventory("FragmentedSharkSpeed",999)
AQBS A 0 A_TakeInventory("CutterFlag",999)
AQBS A 0 A_TakeInventory("FragmentedSharkArmor",999)
GoTo Ready2
Flash:
TNT1 A 0 //A_JumpIfInventory("TheModEmblemItem",1,4)
TNT1 A 1 A_JumpIfInventory("SmashFlag",1,3)
TNT1 A 0 A_GiveInventory("AquoonIceAmmo",1)
TNT1 A 0 A_GiveInventory("AquoonWaterAmmo",1)
GoTo Flash
SmashFlash:
TNT1 A 1 A_SpawnItemEX("FragmentedSharkFX1",0,0,45,MomX,MomY,MomZ,0,SXF_ABSOLUTEMOMENTUM)
TNT1 A 0 A_GiveInventory("AquoonIceAmmo",1)
TNT1 A 0 A_GiveInventory("AquoonWaterAmmo",1)
TNT1 A 0 //A_JumpIfInventory("TheModEmblemItem",1,2)
TNT1 A 0 A_JumpIfInventory("SmashFlag",1,1)
GoTo Flash
TNT1 A 1 A_SpawnItemEX("FragmentedSharkFX2",0,0,45,MomX,MomY,MomZ,0,SXF_ABSOLUTEMOMENTUM)
TNT1 A 0 A_GiveInventory("AquoonIceAmmo",1)
TNT1 A 0 A_GiveInventory("AquoonWaterAmmo",1)
TNT1 A 0 //A_JumpIfInventory("TheModEmblemItem",1,2)
TNT1 A 0 A_JumpIfInventory("SmashFlag",1,1)
GoTo Flash
TNT1 A 1 A_SpawnItemEX("FragmentedSharkFX3",0,0,45,MomX,MomY,MomZ,0,SXF_ABSOLUTEMOMENTUM)
TNT1 A 0 A_GiveInventory("AquoonIceAmmo",1)
TNT1 A 0 A_GiveInventory("AquoonWaterAmmo",1)
TNT1 A 0 //A_JumpIfInventory("TheModEmblemItem",1,2)
TNT1 A 0 A_JumpIfInventory("SmashFlag",1,1)
GoTo Flash
SmashFlash4:
TNT1 A 1 A_SpawnItemEX("FragmentedSharkFX4",0,0,45,MomX,MomY,MomZ,0,SXF_ABSOLUTEMOMENTUM)
TNT1 A 0 A_GiveInventory("AquoonIceAmmo",1)
TNT1 A 0 A_GiveInventory("AquoonWaterAmmo",1)
TNT1 A 0 //A_JumpIfInventory("TheModEmblemItem",1,"SmashFlash")
TNT1 A 0 A_JumpIfInventory("SmashFlag",1,"SmashFlash")
GoTo Flash
}
}