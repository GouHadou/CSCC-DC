actor JohnGunWep : MegaBuster
{
Weapon.AmmoUse 0
Weapon.AmmoGive 100
Weapon.SlotNumber 1
Obituary "%k blasted %o's face off with the multi missile cannon." 
Inventory.Pickupmessage "Power up! Multi Missile!" 
weapon.ammotype "JohnMainAmmo"
inventory.pickupsound "weapon/weaponup"  
+WEAPON.AMMO_OPTIONAL
+WEAPON.CHEATNOTWEAPON 
+WEAPON.NOAUTOAIM
Scale 2.0
Tag "John Weaponry"
States
{
Spawn:
WEA4 H 1
loop
Ready:
JHNH C 0 ACS_ExecuteAlways(998,0,DYE_MULTIMISSILE)
JHNH C 0 A_Jumpifinventory("User1_Trigger",1,"Reload")
JHNH C 1 A_WeaponReady
JHNH C 0 A_JumpIfInventory("JohnMainAmmo",1,"readier")
goto Reload
Readier:
JHNH C 1
Goto Ready+1
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
JHNH C 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
JHNH C 1 A_Raise
Loop
/*Fire:
TNT1 A 0
TNT1 A 0 A_JumpIfInventory("SmashFlag",1,"NapalmShower")
JHNH E 1
JHNH C 0 A_JumpIfInventory("JohnMainAmmo",1,"Gunshot")
JHNH C 0 A_Giveinventory("InputClearer")
goto Reload
Gunshot:
TNT1 A 0
JHNH C 0 A_PlaySoundEx("weapon/bassexebuster","Weapon")
JHNH C 0 A_FireCustomMissile("JohnShot",random(-2,2),0,8,0,0,random(-2,2))
JHNH C 0 A_TakeInventory("JohnMainAmmo",1)
JHNH E 2
JHNH C 0 A_Giveinventory("InputClearer")
Goto Ready+1*/
Fire:
TNT1 A 0
TNT1 A 0 A_GunFlash
JHNH C 1
JHNH C 0 A_JumpIfInventory("JohnMainAmmo",1,"MissileUse")
JHNH C 0 A_Giveinventory("InputClearer")
goto Reload
MissileUse:
TNT1 A 0
JHNH C 0 A_PlaySoundEX("weapon/magnetmissile","Weapon")
JHNH C 0 A_FireCustomMissile("JohnMissile",0,0,8,0)
JHNH C 0 A_TakeInventory("JohnMainAmmo",1)
JHNH DE 3
JHNH C 8
JHNH C 0 A_Giveinventory("InputClearer")
goto Ready+2
/*
FlashBangFire:
TNT1 A 0
TNT1 A 0 A_JumpIfInventory("FlashBangCooldownItem",1,"NoAmmo")
JHNH C 0 A_PlaySoundEX("weapon/BNBombToss","Weapon")
JHNH C 0 A_FireCustomMissile("BlindGrenade",0,0,8,0)
JHNH C 0 A_GiveInventory("JohnGunFlag",1)
JHNH DE 4
JHNH C 0 A_TakeInventory("JohnGunFlag",1)
JHNH C 6
JHNH C 0 A_GiveInventory("FlashBangCooldown")
JHNH C 0 A_Giveinventory("InputClearer")
goto Ready+1 
*/
Altfire:
TNT1 A 0
TNT1 A 0 A_JumpIfInventory("EMPCooldownItem",1,"NoAmmo")
JHNH C 0 A_PlaySoundEX("weapon/magnetmissile","Weapon")
JHNH C 0 A_FireCustomMissile("TacticalEMP",0,0,8,0)
JHNH C 0 A_GiveInventory("JohnGunFlag",1)
JHNH DE 4
JHNH C 0 A_TakeInventory("JohnGunFlag",1)
JHNH C 6
JHNH C 0 A_GiveInventory("EMPCooldown")
JHNH C 0 A_Giveinventory("InputClearer")
goto Ready+1
/*TRifleFire:
TNT1 A 0
TNT1 A 0 A_JumpIfInventory("TRifleCooldownItem",1,"NoAmmo")
JHNH C 0 A_PlaySoundEX("weapon/coilexplode","Weapon")
JHNH C 1 A_FireCustomMissile("TargetShoot",0,0,8,0)
JHNH C 0 A_FireCustomMissile("TargetShoot",0,0,8,0,0,3)
JHNH C 0 A_FireCustomMissile("TargetShoot",357,0,8,0,0,357)
JHNH C 0 A_FireCustomMissile("TargetShoot",3,0,8,0,0,357)
JHNH C 0 A_GiveInventory("JohnGunFlag",1)
JHNH DE 4
JHNH C 0 A_TakeInventory("JohnGunFlag",1)
JHNH C 2
JHNH C 0 A_GiveInventory("TRifleCooldown")
JHNH C 0 A_Giveinventory("InputClearer")
goto Ready+1*/
NoAmmo:
TNT1 A 0
JHNH C 1 ACS_Execute(979,0)
JHNH C 0 A_GiveInventory("InputClearer")
JHNH C 0 A_JumpIfNoAmmo("Reload")
Goto Ready+1
NapalmShower:
AHUD BCDEF 2
TNT1 A 0 A_JumpIfInventory("CutterFlag",10,"EndShower")
TNT1 A 0 A_FireCustomMissile("NapalmShowerSpawner",0,1,0,0)
AHUD F 5 A_GiveInventory("CutterFlag",1)
goto NapalmShower+5
EndShower:
AHUD GH 3
TNT1 A 0 A_TakeInventory("CutterFlag",999)
JHNH A 0 A_TakeInventory("SmashFlag",999)
JHNH C 10
AHUD A 0 A_Refire
Goto Ready+2
Reload:
JHNH C 1 Offset(0,32)
JHNH C 1 Offset(0,46)
JHNH C 1 Offset(0,58)
JHNH C 1 Offset(0,70)
JHNH C 1 Offset(0,82)
JHNH C 1 A_PlaySoundEx("weapon/rmstick","Weapon")
JHNH C 27
JHNH C 1 A_PlaySoundEx("weapon/Crashland","Weapon")
JHNH C 1 Offset(0,82)
JHNH C 1 Offset(0,70)
JHNH C 1 Offset(0,58)
JHNH C 1 Offset(0,46)
JHNH C 1 Offset(0,32)
JHNH C 0 A_Giveinventory("JohnMainAmmo",100)
JHNH C 0 A_TakeInventory("User1_Trigger",999)
Goto Ready+1
}
}

actor JohnMainAmmo : Ammo
{
inventory.amount 1
inventory.maxamount 3
}

actor JohnMissile
{
PROJECTILE
+DONTBLAST
Radius 9
Height 9
scale 5
damage (5) 
damagetype "EMPShock"
Obituary "%k blasted %o's face off with their missiles."
speed 120
Translation "198:198=165:165"
States
{
Spawn:
TNT1 A 0
DIVE AB 1 
loop
Death:
TNT1 A 1 A_SpawnItemEX("JohnBoom1")
stop
}
}

Actor JohnBoom1
{
Projectile
+NOINTERACTION
+NOCLIP
+DONTBLAST
+FORCEXYBILLBOARD
Radius 0
Height 0
scale 6
damagetype "DiveMissile"
Obituary "%k blasted %o's face off with their missiles."
speed 0
States
{
Spawn:
TNT1 A 0
ASEX A 0 A_PlaySoundEx("misc/mm3explosion", "Weapon")
ASEX A 1 A_Explode(25,275,0,0,80)//A_Explode(250,128,0,0,64)
ASEX ABCDEF 2 
stop
}
}

/*
What was done was that the damage was now split between both the rocket and the
Explosion, so direct hits will still do a total of 250 damage, but you would take someone down
with upwards to 5 splash hits depending on how close the missile came. that way you can weaponize the splash
with the map's terrain.
*/

actor BouncingGrenade
{
PROJECTILE
-DONTSPLASH
-NOGRAVITY
+FORCEXYBILLBOARD
+HEXENBOUNCE
+CANBOUNCEWATER
height 14
radius 7
damage (0)
speed 30
scale 1.25
damagetype "FlashBomb"
Obituary "%k caused %o to go \crKABOOM\c-."
reactiontime 35 //as it counts down every frame, 100 is nearly 3 seconds, which feels far too long. 35 results in a 1 sec fuse time
bouncefactor 0.58
wallbouncefactor 0.7
States
{
Spawn:
MBAL C 0
MBAL C 0 Thrustthingz(0,15,0,1) //gives the bomb a slight arc so you don't have to adjust your aim upwards as much.
BOMB A 1 A_CountDown
Goto Spawn+2
Death:
TNT1 A 0 A_ChangeFlag("NOGRAVITY", 1)
TNT1 A 0 A_PlaySoundEx("weapon/crackerexplode", "Weapon")
TNT1 A 0 A_Explode(10, 90, 0, 0, 45)
BOMB BCDEFGHIJKLMNOPQR 1
stop
}
}

/*actor BlindGrenade
{
PROJECTILE
- NOGRAVITY
+HEXENBOUNCE
+CANBOUNCEWATER
+FORCEXYBILLBOARD
height 5
radius 5
damage (0)
speed 30
reactiontime 20
bouncefactor 0.7
scale 2.5
damagetype "FlashStopper"
Obituary "%o was blinded and could never see again, thanks %k."
States
{
Spawn:
FLBA ABCD 2 A_CountDown
loop
Death:
FLBA A 0 A_ChangeFlag("NOGRAVITY", 1)
FLBA A 0 A_PlaySoundEx("weapon/crackerexplode", "Weapon")
FLBA A 0 A_Explode(50, 400, 0)
FLBA A 0 A_JumpIf(ceilingz-z<16,"DeathUp")
NAPA EFGHIJKLMNOPQRS 1
stop
DeathUp:
FLBA A 0
NAPA EFGHIJKLMNOPQRS 1
stop
}
}
*/

actor TacticalEMP
{
PROJECTILE
+DONTBLAST
Radius 7
Height 7
scale 6
damage (0)
damagetype "EMPShock"
Obituary "%o was stunned forever thanks to %k's EMP blast."
speed 50
Translation "198:198=3:3"
States
{
Spawn:
DIVE AB 1 
loop
Death:
ASEX A 0 A_Stop
ASEX A 0 A_playSoundEx("weapon/hyperbomb","Weapon")
ASEX A 0 A_ChangeFlag(NOGRAVITY,1)
ASEX A 0 A_Explode(50,128,0)
ASEX ABCDEF 2
stop
}
}

/*
actor TargetShoot : MageStaffFX2
{
PROJECTILE
+SEEKERMISSILE
-EXTREMEDEATH
Radius 5
Height 5
scale 2.5
damage (12)
damagetype "HomingSniper"
Obituary "%k saw %o's head in the sights of their Targeting Rifle."
speed 100
ReactionTime 85
States
{
Spawn:
TNT1 AA 1 A_MStaffTrack
TNT1 A 0 A_CountDown
loop
Death:
TNT1 A 0
TNT1 A 0 A_PlaySoundEx("misc/BombCount","Voice")
HSNI KKK 2
TNT1 A 0 A_PlaySoundEx("weapon/BNShotHit","SoundSlot5")
TNT1 A 0 A_Explode(125, 64, 0, 0, 1)
BIM1 BCD 2
stop
}
}
*/

actor TargetShoot : Fastprojectile
{
PROJECTILE
+SEEKERMISSILE
+SCREENSEEKER
+THRUACTORS
Radius 5
Height 5
scale 2.5
damage (0)
damagetype "HomingSniper"
Obituary "%k saw %o's head in the sights of their Targeting Rifle."
speed 10
ReactionTime 85
States
{
Spawn:
TNT1 A 0 
TNT1 A 1 A_ScaleVelocity(10.0)
Spawn2:
TNT1 A 0 A_Seekermissile(90,90,SMF_LOOK|SMF_PRECISE,100,4)
TNT1 A 0 A_CountDown
TNT1 A 1 A_JumpiftracerCloser(720,"Tracked")
loop
Tracked:
TNT1 A 0 A_Seekermissile(90,90,SMF_LOOK|SMF_PRECISE,100,4)
TNT1 A 1 A_ScaleVelocity(10.0)
TNT1 A 0 A_JumpiftracerCloser(80,"Targeted")
loop
Targeted:
TNT1 A 0 A_Stop
TNT1 A 0 A_PlaySoundEx("misc/BombCount","Voice")
HSNI K 2  A_Seekermissile(90,90,SMF_LOOK|SMF_PRECISE,100,4)
TNT1 A 0 A_Stop
HSNI K 2  A_Seekermissile(90,90,SMF_LOOK|SMF_PRECISE,100,4)
TNT1 A 0 A_Stop
HSNI K 2  A_Seekermissile(90,90,SMF_LOOK|SMF_PRECISE,100,4)
TNT1 A 0 A_Stop
TNT1 A 0 A_PlaySoundEx("weapon/BNShotHit","SoundSlot5")
TNT1 A 0 A_Explode(10, 64, 0, 0, 64)
TNT1 A 0 //A_Spawnitemex("ImpactPuff")
HSNI KK 5
Death:
TNT1 A 0
stop
}
}


actor MineShocked : PowerupGiver
{
  inventory.maxamount 0
  powerup.duration 17
  powerup.color "00 00 00", 0.0
  powerup.type "PowerShock"
  +INVENTORY.AUTOACTIVATE
  +INVENTORY.ALWAYSPICKUP
  states
  {
  Spawn:
    TNT1 A 6
    loop
  }
}

actor EMPShocked : PowerupGiver
{
  inventory.maxamount 0
  powerup.duration 35
  powerup.color "00 00 00", 0.0
  powerup.type "PowerShock"
  +INVENTORY.AUTOACTIVATE
  +INVENTORY.ALWAYSPICKUP
  states
  {
  Spawn:
    TNT1 A 6
    loop
  }
}


/*
actor FlashBangCooler // Coolers are a type of watcher actor that handle weapon cooldowns
{
+MISSILE
+RIPPER
+NOGRAVITY
+NOINTERACTION
Reactiontime 5
States
{
Spawn:
TNT1 A 0 A_JumpIfInTargetInventory("CutterFlag",999,"DeathTake")
TNT1 A 1
TNT1 A 0 A_TakeFromTarget("FlashBangCooldownItem",1)
TNT1 A 0 A_JumpIfInTargetInventory("FlashBangCooldownItem",1,"Spawn")
Death:
DeathTake:
TNT1 A 0
stop
}
}

actor FlashBangCooldown : CustomInventory
{
inventory.amount 1
Inventory.MaxAmount 100
+AUTOACTIVATE
States
{
Spawn:
TNT1 A 0
stop
Pickup:
TNT1 A 0 A_Giveinventory("FlashBangCooldownItem",210) //6 seconds
TNT1 A 0 A_Spawnitemex("FlashBangCooler")
stop
Nope:
//BUST B 0 A_PlaySoundEx("weapon/heat3","Item")
TNT1 A 0
stop
}
}

actor FlashBangCooldownItem : inventory
{
inventory.amount 1
inventory.maxamount 280
}

*/

actor EMPCooler // Coolers are a type of watcher actor that handle weapon cooldowns
{
+MISSILE
+RIPPER
+NOGRAVITY
+NOINTERACTION
Reactiontime 5
States
{
Spawn:
TNT1 A 0 A_JumpIfInTargetInventory("CutterFlag",999,"DeathTake")
TNT1 A 1
TNT1 A 0 A_TakeFromTarget("EMPCooldownItem",1)
TNT1 A 0 A_JumpIfInTargetInventory("EMPCooldownItem",1,"Spawn")
Death:
DeathTake:
TNT1 A 0
stop
}
}

actor EMPCooldown : CustomInventory
{
inventory.amount 1
Inventory.MaxAmount 100
+AUTOACTIVATE
States
{
Spawn:
TNT1 A 0
stop
Pickup:
TNT1 A 0 A_Giveinventory("EMPCooldownItem",350) //10 seconds
TNT1 A 0 A_Spawnitemex("EMPCooler")
stop
Nope:
//BUST B 0 A_PlaySoundEx("weapon/heat3","Item")
TNT1 A 0
stop
}
}

actor EMPCooldownItem : inventory
{
inventory.amount 1
inventory.maxamount 350
}

actor TRifleCooler // Coolers are a type of watcher actor that handle weapon cooldowns
{
+MISSILE
+RIPPER
+NOGRAVITY
+NOINTERACTION
Reactiontime 5
States
{
Spawn:
TNT1 A 0 A_JumpIfInTargetInventory("CutterFlag",999,"DeathTake")
TNT1 A 1
TNT1 A 0 A_TakeFromTarget("TRifleCooldownItem",1)
TNT1 A 0 A_JumpIfInTargetInventory("TRifleCooldownItem",1,"Spawn")
Death:
DeathTake:
TNT1 A 0
stop
}
}

actor TRifleCooldown : CustomInventory
{
inventory.amount 1
Inventory.MaxAmount 100
+AUTOACTIVATE
States
{
Spawn:
TNT1 A 0
stop
Pickup:
TNT1 A 0 A_Giveinventory("TRifleCooldownItem",315) //9 seconds
TNT1 A 0 A_Spawnitemex("TRifleCooler")
stop
Nope:
//BUST B 0 A_PlaySoundEx("weapon/heat3","Item")
TNT1 A 0
stop
}
}

actor TRifleCooldownItem : inventory
{
inventory.amount 1
inventory.maxamount 315
}

actor NapShower
{
PROJECTILE
+RIPPER
+NOINTERACTION
+DONTBLAST
Damagetype "NapalmBomb"
Obituary "%k's Napalm Shower made %o a pile of ashes."
damage(5)
height 13
radius 13
Scale 2.5
Reactiontime 10
States
{
Spawn:
ASTR B 0
NAPA ABCD 4 A_JumpIf(ceilingz-z>8, "Spawn2")
ASTR B 0 A_JumpIf(momz==0,"Death")
ASTR B 0 A_CountDown
Goto Spawn+2
Spawn2:
ASTR B 0 A_ChangeFlag("RIPPER", 0)
ASTR B 0 A_ChangeFlag("NOINTERACTION",0)
NAPA ABCD 4
ASTR B 0 A_JumpIf(momz==0,"Death")
ASTR B 0 A_CountDown
Goto Spawn2+2
Death:
TNT1 A 0 A_PlaySoundEx("weapon/napalm", "Weapon")
TNT1 A 0 A_ChangeFlag(NOGRAVITY,1)
TNT1 A 0 A_Explode(30,185,0)
NAPA DEFGHIJKLMNOPQRS 2
stop
}
}

actor NapalmShowerSpawner
{
+NOGRAVITY
+MISSILE
+NOINTERACTION
+NOCLIP
//+CEILINGHUGGER
States
{
Spawn:
TNT1 A 0
TNT1 AAAAAAAAAA 0 A_SpawnItemEx("NapShower",random(400,-400),random(400,-400),320,0,0,random(-30,-40))
TNT1 A 1
stop
}
}


Actor JohnShot : FastProjectile
{
PROJECTILE
+DONTBLAST
Obituary "%k made swiss cheese out of %o."
Radius 8
Height 8
Speed 500
Damage(2)
Scale 1.0
Translation "192:192=160:160", "198:198=162:162"
Damagetype "Normal"
States
{
Spawn:
TNT1 A 2
loop
Crash:
XDeath:
TNT1 A 0 A_PlaySoundEx("weapon/BNShotHit","SoundSlot5")
BIM1 BCD 2
stop
Death:
BIM1 BCD 2
stop
}
}

Actor JohnGunFlag : Inventory {Inventory.MaxAmount 1}
