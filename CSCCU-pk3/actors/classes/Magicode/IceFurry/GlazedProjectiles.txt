actor GlaceDJCooldown : powerup {Inventory.amount 1 powerup.duration 150}

//Ammo//
actor GlaceAmmo : Ammo
{
inventory.amount 1
inventory.maxamount 100 //125
}

actor GlaceAmmo2 : Ammo //For Ice Shield
{
inventory.amount 1
inventory.maxamount 50 //50
}

actor IceBombCooldown : Ammo //For Ice Bomb
{
inventory.amount 1
inventory.maxamount 50
}
////////
actor GlaceAttackFollowUp : Once {}
////////

actor FrostSlash
{
PROJECTILE
+LOOKALLAROUND
+SKYEXPLODE
+DONTBLAST
+NOCLIP
+THRUGHOST
+THRUACTORS
Speed 0
renderstyle "translucent" //add
alpha 0.5
Damage (0)
Radius 1
Height 1
scale 2.5
States
{
Spawn:
TNT1 A 0
FCRA DDDEEE 1 A_SpawnItemEx("FrostSlashDamager",0,0,0,0,0,0)
goto Death
Death:
FCRA IJ 2 A_Fadeout(0.1)
stop
}
}

//Make it hit harder, add a powerprotection if the attack is doing more than it should
//Example, melee hit should do at most 100-ish
//If its doing too much, add a protection to reduce anything above 100.
actor FrostSlashDamager
{
PROJECTILE
+LOOKALLAROUND
+SKYEXPLODE
+DONTBLAST
damagetype "IceSlasher"
//Obituary "%k wonders where that fat fuck (%o) floated in from."
Obituary "%o was frozen solid by %k's Frost Slasher."
Damage (2) //30. Adjust this if necessary
Radius 10
Height 10
States
{
Spawn:
TNT1 A 0
TNT1 A 1
stop
/*Crash:
TNT1 D 0 A_GiveToTarget("GlaceAmmo",1)
stop*/
}
}

actor FrostSlasher
{
PROJECTILE
Radius 6
Height 6
scale 2.5
damagetype "IceSlasher"
Obituary "%o was frozen solid by %k's Frost Slasher."
renderstyle "translucent"
translation "71:199=203:203"
alpha 0.85
damage (15)
speed 50
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_PlaySoundEx("weapon/iceslasher","Weapon")
TNT1 A 0 A_ScaleVelocity(1.05)
ICES AB 2 A_SpawnItemEx("FrostSlasherTrail",0,0,0,0,0,0,0)
goto Spawn+2
Death:
TNT1 A 0 A_CheckFloor("Death2")
TNT1 A 0 A_CheckCeiling("Death2")
TNT1 A 0 A_Explode(8,128,0,0,64)
TNT1 A 0 A_SpawnItemEx("SmolIceBombFX")
TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("IceBombFX2",random(-40,40),random(-40,40),random(-40,40),random(-15,15),random(-15,15),random(-15,15),random(-256,256))
stop
Death2:
TNT1 A 0 A_SpawnItemEx("FrostSlasher2",0,0,0,50,0,0,0)
goto Death+2
}
}

actor FrostSlasher2 : FrostSlasher
{
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_ScaleVelocity(1.05)
ICES AB 2 A_SpawnItemEx("FrostSlasherTrail",0,0,0,0,0,0,0)
loop
Death:
TNT1 A 0 A_Explode(8,128,0,0,64)
TNT1 A 0 A_SpawnItemEx("SmolIceBombFX")
TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("IceBombFX2",random(-40,40),random(-40,40),random(-40,40),random(-15,15),random(-15,15),random(-15,15),random(-256,256))
stop
}
}

//
actor SmolIceBombFX : HardKnuckleFX
{
+FORCEXYBILLBOARD
Renderstyle translucent
alpha 0.8
scale 2.5
Damage(0)
States
{
Spawn:
ICEX PQRST 2
stop
}
}
//

actor FrostSlasherTrail : HardKnuckleFX
{
translation "71:199=203:203"
Renderstyle "Add"
alpha 0.8
States
{
Spawn:
TNT1 A 0
ICES A 2
ICES BA 2 A_FadeOut(0.09)
goto Spawn+2
}
}

actor FrostSlasherTrail2 : FrostSlasherTrail
{
scale 7.5
}

actor FrostSlasherTrail3 : FrostSlasherTrail
{
scale 5
}

actor IceShield : HardKnuckleFX
{
States
{
Spawn:
TNT1 A 0
ISHI AABBCCDD 1 A_Warp(AAPTR_TARGET,0,0,20,0,WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION)
stop
}
}

actor IceShieldDamager
{
PROJECTILE
Obituary "%o was run over by %k, turning them into a frozen pancake."
damagetype "IceSlasher"
+DONTBLAST
+DONTREFLECT
+DONTSPLASH
+SKYEXPLODE
+THRUGHOST
+THRUACTORS
+NOINTERACTION
Damage (0)
radius 1
height 1
scale 2.5
States
{
Spawn:
TNT1 A 0
TNT1 A 1 A_Explode(2,68,0,0,68)
stop
}
}

actor IceBomb
{
PROJECTILE
+LOOKALLAROUND
+SKYEXPLODE
+DONTBLAST
-NOGRAVITY
+FORCEXYBILLBOARD
+DONTSPLASH
damagetype "IceNeedle"
Obituary "%o was freezploded by %k's Ice Bomb."
Speed 75
Damage (5)
Radius 7
Height 7
scale 2.5
reactiontime 600
States
{
Spawn:
TNT1 A 0
ICBM O 1 ThrustThingZ(0, 15, 0, 1)
ICBM O 0 //A_CheckFloor("Death2")
ICBM O 0 A_Countdown
ICBM O 1 A_SpawnItemEx("IceBombFX",random(-22,22),random(-22,22),random(-15,30),0,0,0)
Goto Spawn+2
Death:
TNT1 A 0 A_SpawnItemEx("IceBombExplode")
TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("IceBombFX2",random(-40,40),random(-40,40),random(-40,40),random(-15,15),random(-15,15),random(-15,15),random(-256,256))
stop
}
}

actor IceBombExplode
{
+NOGRAVITY
+NOCLIP
+THRUGHOST
+NOINTERACTION
+FORCEXYBILLBOARD
+DONTSPLASH
Obituary "%o was freezploded by %k's Ice Bomb."
scale 5.5
height 1
radius 1
damagetype "IceNeedle" //IceBomb
States
{
Spawn: //Explode damage is 50 for the sake of it being a support attack now.
TNT1 A 0
TNT1 A 0 A_PlaySoundEx("kirby/iceexplode","Voice")
TNT1 A 0 A_Explode(25,164,0,0,164) //>200 damage
ICEX PQRST 2
stop
}
}

Actor IceBombWave : HardKnuckleFX
{
renderstyle "add"
alpha 0.7
Translation "0:255=206:206"
Speed 0
states
{
Spawn:
DUOR T 1 A_FadeOut(0.08)
loop
}
}

actor IceBombFX : HardKnuckleFX
{
+FORCEXYBILLBOARD
Renderstyle translucent
alpha 0.8
Damage(0)
States
{
Spawn:
TNT1 A 0
BLIZ AB 2
BLIZ AB 2 A_FadeOut(0.4)
goto Spawn+2
}
}

actor IceBombFX2 : IceBombFX
{
scale 4.5
reactiontime 20
States
{
Spawn:
TNT1 A 0
BLIZ AB 2
TNT1 A 0 A_Countdown
loop
Death:
BLIZ AB 2 A_Fadeout(0.08)
wait
}
}

actor IceNeedle
{
PROJECTILE
Radius 18
Height 21
alpha 0.95
damagetype "GlaceIceBomb"
Obituary "%k realized %o was the sheriff and had to shoot them."
scale 7.5
damage (25)
speed 200
States
{
Spawn:
TNT1 A 0
ICNE D 1 A_SpawnItemEx("IceNeedleTrail",0,0,0,0,0,0)
TNT1 A 0 A_SpawnItemEx("IceNeedleTrail2",0,0,0,0,0,0)
TNT1 A 0 A_SpawnItemEx("IceSparkle",random(-5,5),random(-5,5),random(-5,5),0,0,0,0)
loop
XDeath:
Crash:
TNT1 A 0
stop
Death:
TNT1 A 0 A_JumpIf(z-floorz<5, "Floor")
TNT1 A 0 A_JumpIf(z-ceilingz==0-6, "Ceiling")
goto Wall
Floor:
TNT1 A 0 A_SpawnItemEx("IceSpike")
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,0)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,30)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,60)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,90)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,120)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,150)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,180)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,210)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,240)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,270)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,300)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,330)
stop
Ceiling:
TNT1 A 0 A_SpawnItemEx("GlaceIceBall",0,0,0,0,0,0)
stop
Wall:
TNT1 A 0 A_SpawnItemEx("GlaceIceBall",0,0,0,4,0,10,180)
stop
}
}

actor IceSpikeSpawner
{
PROJECTILE
+THRUGHOST
+THRUACTORS
+NOINTERACTION
+FLOORHUGGER
Radius 1
Height 1
damage (0)
reactiontime 3
States
{
Spawn:
TNT1 A 0
TNT1 A 1
TNT1 A 1 A_SpawnItemEx("IceSpike",0,0,0,0,0,0)
TNT1 A 0 A_Countdown
goto Spawn+2
}
}

actor IceNeedleTrail : HardKnuckleFX
{
+FORCEXYBILLBOARD
Renderstyle "Add"
alpha 0.4
Damage(0)
scale 7.5
States
{
Spawn:
TNT1 A 0
ICNE D 2 A_FadeOut(0.07)
loop
}
}

actor IceNeedleTrail2 : IceNeedleTrail
{
Renderstyle "translucent"
alpha 0.25
scale 2.5
States
{
Spawn:
TNT1 A 0
ICBM ABCD 2 A_FadeOut(0.04)
loop
}
}

actor GlaceIceBall
{
PROJECTILE
+LOOKALLAROUND
+SKYEXPLODE
+DONTBLAST
-NOGRAVITY
+RIPPER
+HEXENBOUNCE
+DONTBLAST
translation "192:192=4:4", "198:198=197:197"
wallbouncefactor 2
bouncefactor 0
damagetype "IceSlasher"
Obituary "%o didn't realize it was Christmas morning according to %k."
Damage (3)
radius 10
height 10
scale 5
States
{
Spawn:
TNT1 A 0
MRFP B 1 A_CheckFloor("Death")
loop
Death:
TNT1 A 0 A_SpawnItemEx("IceSpike")
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,0)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,30)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,60)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,90)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,120)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,150)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,180)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,210)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,240)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,270)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,300)
TNT1 A 0 A_SpawnItemEx("IceSpikeSpawner",0,0,0,30,0,0,330)
stop
}
}

actor GlaceIceSpike
{
PROJECTILE
+FLOORHUGGER
+THRUGHOST
+THRUACTORS
+DONTBLAST
damagetype "IceSlasher"
Obituary "%o was turned into a popsicle by %k's Ice Spike."
Speed 0
Height 1
Radius 1
scale 2.5
reactiontime 50
States
{
Spawn:
TNT1 A 0
ICEW B 0 A_PlaySoundEx("weapon/icewavespawn","weapon")
ICEW BCD 2 A_Explode(10,40,0,0,20)
ICEW E 1 A_Explode(10,40,0,0,20)
ICEW E 0 A_Countdown
goto Spawn+5
Death:
ICEW EDCB 2
stop
}
}

actor IceSpike2 : GlaceIceSpike
{
+NOGRAVITY
-FLOORHUGGER
scale 3
reactiontime 15
States
{
Spawn:
TNT1 A 0
ICEW B 0 A_PlaySoundEx("weapon/icewavespawn","weapon")
ICEW BCD 1 A_Explode(10,70,0,0,50)
ICEW E 1 A_Explode(10,70,0,0,50)
ICEW E 0 A_Countdown
goto Spawn+5
Death:
ICEW EDCB 1
stop
}
}

Actor GlaceSnowstormFlag : Powerup{powerup.duration -2 powerup.color Cyan 0.2}

Actor GlaceSnowstormArmor : PowerProtection
{
PowerUp.Duration 0x7FFFFFFF
DamageFactor "GSnowstorm", 0.0
}

actor GlaceSnowstormRange
{
PROJECTILE
+THRUGHOST
+THRUACTORS
damagetype "GSnowstorm"
Obituary "%o was frozen by %k's snowstorm."
Scale 2.5
Height 1
Radius 1
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_Explode(15, 256, 0, 0, 256)
stop
}
}

actor GlaceSnowstormRange2 : GlaceSnowstormRange { damagetype "GSnowSlow" }

Actor GlaceSnowstormProtect : PowerProtection
{
PowerUp.Duration 20
DamageFactor "GSnowstorm", 0.0
DamageFactor "GSnowSlow", 0.0
}

Actor GlaceSnowSlowProtect : PowerProtection
{
PowerUp.Duration 20
DamageFactor "GSnowstorm", 0.0
DamageFactor "GSnowSlow", 1.0
}

actor GlaceSnowstormFX : HardKnuckleFX
{
scale 1
States
{
Spawn:
TNT1 A 0
BLIZ ABC 5 A_Fadeout
loop
}
}

actor IcePillar
{
PROJECTILE
+FLOORHUGGER
+RIPPER
+DONTBLAST
damagetype "IceSlasher"
Obituary "%o was freezploded by %k's Ice Bomb."
Speed 0
Damage (2)
Height 48
Radius 10
scale 2.5
States
{
Spawn:
TNT1 A 0
ICEW B 0 A_PlaySoundEx("weapon/icewavespawn","weapon")
ICEW BCDE 3
Death:
ICEW EDCB 2
stop
}
}

actor IceNeedleI : IceNeedle
{
Obituary "%k found the Caveman (%o) and shot them with the two-million year old Ice Needle."
damage (20)
speed 45
States
{
Death:
TNT1 A 0 A_JumpIf(z-floorz<5, "Floor")
TNT1 A 0 A_JumpIf(z-ceilingz==0-6, "Ceiling")
goto Wall
Floor:
TNT1 A 0 A_SpawnItemEx("IceSpikeI",0,0,0,0,0,0)
TNT1 A 0 A_SpawnItemEx("IceSpikeI",30,0,0,0,0,0)
TNT1 A 0 A_SpawnItemEx("IceSpikeI",-30,0,0,0,0,0)
TNT1 A 0 A_SpawnItemEx("IceSpikeI",0,30,0,0,0,0)
TNT1 A 0 A_SpawnItemEx("IceSpikeI",0,-30,0,0,0,0)
stop
Ceiling:
TNT1 A 0 A_SpawnItemEx("IceBall2",0,0,0,0,0,0)
stop
Wall:
TNT1 A 0 A_SpawnItemEx("IceBall2",0,0,0,4,0,10,180)
stop
}
}

actor IceSpikeI : GlaceIceSpike { Obituary "%o reminded %k that ChillSpikeWep doesn't exist yet, but they didn't listen." }

actor IceBall2 : GlaceIceBall { Obituary "%k tossed %o their lost Ice Ball back, knocking them out cold." }