actor CrescentArsenalWepI : MegaBuster 
{
Weapon.AmmoUse 0
Weapon.AmmoGive 100
Weapon.AmmoUse2 0
Weapon.AmmoGive2 200
Weapon.SlotNumber 1
Inventory.Pickupmessage "Requiesce in pace.."
Obituary "%o didn't like %k." //Filler
weapon.ammotype "CrescentEnergyAmmo"
weapon.ammotype2 "LunarEnergyAmmo"
inventory.pickupsound "weapon/weaponup"
+WEAPON.AMMO_OPTIONAL
+WEAPON.CHEATNOTWEAPON
//inventory.icon "SHADI"
Scale 2.0
States
{
Spawn:
WEAP A 1
loop
Ready:
LUB1 A 0 ACS_ExecuteAlways(998,0,DYE_LUNACRESCENT)
LUB1 A 0 A_GiveInventory("IsLunaFlag",1)
LUB1 A 0 A_GiveInventory("HasCrescentFanFlag",1)
LUB1 A 0 A_GunFlash
LUB1 A 0 A_GiveInventory("CrescentAbilityA",1)
Goto Ready2
Ready2:
LUB1 A 0 A_JumpIfInventory("CrescentFlagC",1,"NieceInheritage")
LUB1 A 0 A_JumpIfInventory("CrescentFlagB",1,"CounterSlash")
LUB1 A 0 A_JumpIfInventory("CrescentFlagA",1,"Countering")
LUB1 A 10 A_WeaponReady
LUB1 A 0 A_GiveInventory("CrescentStars",1)
LUB1 A 0 A_JumpIfInventory("CrescentFlagC",1,"NieceInheritage")
LUB1 A 0 A_JumpIfInventory("CrescentFlagB",1,"CounterSlash")
LUB1 A 0 A_JumpIfInventory("CrescentFlagA",1,"Countering")
//LUB1 A 0 A_GiveInventory("CrescentEnergyAmmo",1)
//LUB1 A 0 A_GiveInventory("LunarEnergyAmmo",1)
Goto Ready2
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
LUB1 A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
LUB1 A 1 A_Raise
Loop
Flash:
TNT1 A 0
TNT1 A 0 A_GiveInventory("CrescentEnergyAmmo",2)
TNT1 A 6 A_GiveInventory("LunarEnergyAmmo",3) //10 tics
loop
Fire:
LUB1 A 0 A_JumpIfInventory("HasCrescentFanFlag",1,"SouretFire")
LUB1 A 0 A_JumpIfInventory("CrescentStars",1,"CrescentFire")
LUB1 A 1
Goto Ready2
SouretFire:
LUB1 A 0 A_TakeInventory("HasCrescentFanFlag",1)
LUB1 A 0 A_PlaySoundEx("weapon/magiccard","Weapon")
LUB1 A 0 A_FireCustomMissile("CrescentFan",0,1,8,0)
LUB1 BC 1
LUB1 A 0 A_JumpIfInventory("CrescentFlagC",1,"NieceInheritage")
LUB1 A 0 A_JumpIfInventory("CrescentFlagB",1,"CounterSlash")
LUB1 A 8 A_JumpIfInventory("CrescentFlagA",1,"Countering")
LUB1 A 0 A_Refire
Goto Ready2
CrescentFire:
LUB1 A 0 A_JumpIfInventory("CrescentFlagC",1,"NieceInheritage")
LUB1 A 0 A_JumpIfInventory("CrescentFlagA",1,"Countering")
LUB1 A 0 A_JumpIfInventory("CrescentFlagB",1,"CounterSlash")
LUB1 A 0 A_JumpIfInventory("StarBufferFlags",1,"CrescentFireEX")
LUB1 A 0 A_TakeInventory("CrescentStars",1)
LUB1 A 0 A_PlaySoundEx("weapon/mirrordeflect","Weapon")
LUB1 A 0 A_FireCustomMissile("LunarCrescentStar",0,0,8,0)
LUB1 BC 2
LUB1 A 0 A_JumpIfInventory("CrescentFlagC",1,"NieceInheritage")
LUB1 A 0 A_JumpIfInventory("CrescentFlagB",1,"CounterSlash")
LUB1 A 10 A_JumpIfInventory("CrescentFlagA",1,"Countering")
LUB1 A 8 A_Refire
Goto Ready2
CrescentFireEX:
LUB1 A 0 A_TakeInventory("StarBufferFlags",1)
LUB1 A 0 A_TakeInventory("CrescentStars",1)
LUB1 A 0 A_PlaySoundEx("weapon/mirrordeflect2","Weapon")
LUB1 A 0 A_FireCustomMissile("LunarCrescentStarEX",0,0,8,0)
LUB1 BC 1
LUB1 A 6
LUB1 A 0 A_Refire
Goto Ready2

AltFire:
LUB1 A 0 A_JumpIfInventory("CrescentEnergyAmmo",100,"NoticeMeSampi")
Goto Ready2
NoticeMeSampi:
LUB1 A 0 A_PlaySoundEx("weapon/mirrorabsorb","Weapon")
LUB1 A 0 A_ChangeVelocity(50*cos(pitch),0,20*-sin(pitch),3) //30 ~ 100
KISSME:
LUB1 C 0 A_Recoil(-2)
LUB1 C 1 A_SpawnItemEX("CrescentSlash",0,0,-8,momx,momy,momz,0,SXF_ABSOLUTEMOMENTUM,0) //-48 z offset
LUB1 CC 0 A_SpawnItemEx("CrescentStarFX", random(-5,0), random(-20,20), random(0,70),0,0,0,0,32)
LUB1 C 0 A_TakeInventory ("CrescentEnergyAmmo",5) //10 use?
LUB1 C 0 A_JumpIfInventory ("CrescentEnergyAmmo",5,"KISSME")
Goto BAAKAAA
BAAKAAA:
LUB1 A 0 A_JumpIfInventory("CrescentFlagC",1,"NieceInheritage")
LUB1 A 0 A_JumpIfInventory("CrescentFlagB",1,"CounterSlash")
LUB1 A 0 A_JumpIfInventory("CrescentFlagA",1,"Countering")
LUB1 B 15 A_ScaleVelocity(0.85)
LUB1 A 0 A_Refire
Goto Ready2

//DESP Move//
NieceInheritage: //Unlike her uncle. This is limited.
LUB1 A 0 A_TakeInventory("CrescentFlagC",999)
LUB1 B 0 A_Stop
LUB1 B 0 A_ChangeFlag("NOGRAVITY", 1)
LUB1 B 3 ThrustThingZ(0,45,0,0)
LUB1 B 0 SetPlayerProperty(0,1,4)
LUB1 A 0 SetPlayerProperty(0,1,16)
LUB1 B 0 A_Stop
LUB1 B 2 A_SpawnItemEx("CBreakThunderEffect1",4,0,48)
LUB1 B 2 A_SpawnItemEx("CBreakThunderEffect2",4,0,48)
LUB1 CCC 1
LUB1 B 0 A_PlaySoundEx("weapon/lightningbolt","Weapon")
LUB1 EEEEEE 6 A_FireCustomMissile("CresThunderBreakAttack3",random(-90,90),0,0,0) //360
LUB1 BBB 2
LUB1 B 0 A_ChangeFlag("NOGRAVITY", 0)
LUB1 B 0 SetPlayerProperty(0,0,4)
LUB1 A 0 SetPlayerProperty(0,0,16)
LUB1 BA 8
LUB1 A 0 A_Refire
Goto Ready2

Countering:
LUB1 A 0 SetPlayerProperty(0,1,0)
LUB1 A 0 SetPlayerProperty(0,1,16)
LUB1 A 0 A_PlaySoundEx("weapon/crackermine", "Weapon")
LUB1 CCCCCCC 5 A_JumpIfInventory("CrescentFlagB",1,"CounterSlash") //Other states have this to trigger it either way.
LUB1 A 0 SetPlayerProperty(0,0,0)
LUB1 A 0 SetPlayerProperty(0,0,16)
LUB1 A 0 A_TakeInventory("CrescentFlagA",999)
LUB1 B 0 A_TakeInventory("CrescentFlagB",999)
LUB1 CB 2
LUB1 A 15
Goto Ready2
CounterSlash:
LUB1 A 0 A_TakeInventory("CrescentFlagB",999)
LUB1 A 0 A_TakeInventory("CrescentFlagA",999)
LUB1 A 0 A_ChangeFlag("SHOOTABLE",0)
LUB1 A 0 A_ChangeFlag("NOGRAVITY",1)
LUB1 A 0 A_ChangeFlag("THRUACTORS",1)
LUB1 A 0 SetPlayerProperty(0,0,16)
LUB1 AAAAAAA 0 A_SpawnItemEx("CrescentStarFX",0,0,8,random(-20,20),random(-20,20),random(0,20),0,0,0)
LUB1 A 0 A_PlaySoundEx("weapon/centaurflash","Body")
LUB1 B 5 A_Stop
LUB1 B 0 A_PlaySoundEx("weapon/tengudash","Weapon")
LUB1 B 0 A_ChangeVelocity(cos(pitch)*120,0,-sin(pitch)*120,CVF_RELATIVE|CVF_REPLACE)
LUB1 BBBBBBBBBBBBBB 1 A_SpawnItemEx("CrescentSlashEX",0,0,16,momx,momy,momz,0,SXF_ABSOLUTEMOMENTUM,0)
LUB1 B 0 A_ScaleVelocity(0.65)
LUB1 A 0 SetPlayerProperty(0,0,0)
LUB1 B 0 A_ChangeFlag("NOGRAVITY",0)
LUB1 B 0 A_ChangeFlag("THRUACTORS",0)
LUB1 B 0 A_ChangeFlag("SHOOTABLE",1)
LUB1 CB 2
LUB1 A 15
Goto Ready2
}
}

//Inventory Stuff//

actor CrescentEnergyAmmo : Ammo
{
inventory.amount 1
inventory.maxamount 100
+INVENTORY.IGNORESKILL
}

actor LunarEnergyAmmo : Ammo
{
inventory.amount 1
inventory.maxamount 200
+INVENTORY.IGNORESKILL
}

actor HasCrescentFanFlag : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor CrescentStars : Inventory
{
inventory.amount 1
inventory.maxamount 50
}

actor StarBufferFlags : Inventory
{
inventory.amount 1
inventory.maxamount 10
}

actor IsLunaFlag : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor CrescentFlagA : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor CrescentFlagB : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

actor CrescentFlagC : Inventory
{
inventory.amount 1
inventory.maxamount 1
}

//Items//

actor CrescentAbilityA : CustomInventory //Endurance - Counter
{
inventory.amount 1
inventory.maxamount 1
inventory.icon "LUNACNTR"
+COUNTITEM
+INVBAR
scale 2.0
states
{
Spawn:
CSTR B 6
loop
Use:
TNT1 A 0 A_JumpIfInventory("LunarEnergyAmmo",200,"Jump")
fail
Jump:
TNT1 A 0 A_TakeInventory("LunarEnergyAmmo",200)
TNT1 A 1 A_GiveInventory("CrescentFlagA",1)
TNT1 A 0
}
}

actor CrescentAbilityB : CustomInventory //Evasion - Diversion
{
inventory.amount 3
inventory.maxamount 3
inventory.icon "LUNAFBNG"
+COUNTITEM
+INVBAR
scale 2.0
states
{
Spawn:
CSTR C 6
loop
Use:
TNT1 A 0 A_FireCustomMissile("LunaCrescentFlashBang",0,0,0,0)
stop
}
}

actor CrescentAbilityC : CustomInventory //Healing - Full Restore
{
inventory.amount 1
inventory.maxamount 1
inventory.icon "LUNAHEAL"
+INVBAR
+COUNTITEM
scale 2.0
States
{
Spawn:
CSTR D 6 
loop
Use: //Works Regardless. Heals and boosts.
//TNT1 A 0 A_JumpIfHealthLower(1000,"Success")
//fail
//Success:
TNT1 A 0 A_PlaySound("item/energyup")
TNT1 A 0 A_PlaySoundEx("item/refill","Voice")
TNT1 A 0 HealThing(1000)
TNT1 A 0 A_GiveInventory("CrescentEnergyAmmo",100)
TNT1 A 0 A_GiveInventory("LunarEnergyAmmo",200)
TNT1 A 0 A_TakeInventory("CrescentAbilityC",1)
fail
Death:
TNT1 A 0
stop
}
}

actor CrescentAbilityD : CustomInventory //Attack Buff - Power 
{
inventory.amount 1
inventory.maxamount 5
inventory.icon "LUNABUFF"
+INVBAR
+COUNTITEM
scale 2.0
States
{
Spawn:
CSTR E 6 
loop
Use:
TNT1 A 0 A_PlaySound("item/energyup")
TNT1 A 0 A_PlaySoundEx("item/refill","Voice")
TNT1 A 0 A_GiveInventory("StarBufferFlags",2)
TNT1 A 0 A_TakeInventory("CrescentAbilityD",1)
fail
Death:
TNT1 A 0
stop
}
}

actor CrescentAbilityE : CustomInventory //"Desperation Move" - Super Move
{
inventory.amount 1
inventory.maxamount 1
inventory.icon "LUNATNDR"
+INVBAR
+COUNTITEM
scale 2.0
States
{
Spawn:
CSTR F 6 
loop
Use:
TNT1 A 0 A_GiveInventory("CrescentFlagC",1)
TNT1 A 0 A_TakeInventory("CrescentAbilityE",1)
fail
Death:
TNT1 A 0
stop
}
}

//Item Attacks//

actor LunaCrescentFlashBang
{
PROJECTILE
Obituary "%o died from humiliation via %k's \cuFlashbang\c-."
Translation "214:215=5:5"
-NOGRAVITY
+DONTBLAST
+HEXENBOUNCE
+CANBOUNCEWATER
damagetype "FlashStopper"
Speed 32
Damage (10)
radius 3
height 3
scale 1.5
bouncecount 4
bouncefactor 0.6
reactiontime 30
States
{
Spawn:
BASB A 2 A_CountDown
loop
Crash:
XDeath:
Death:
TNT1 A 0 A_PlaySoundEx("weapon/centuarflash","Weapon")
TNT1 A 0 A_Explode(5, 500,0) //500 ~ 1000 range?
MMFX BCDE 2
stop
}
}

//Lunar Stars//

actor LunarCrescentStar
{
PROJECTILE
Translation "210:210=3:3", "247:247=5:5"
Speed 56 //50
Damage (7) //(random(70, 125))
damagetype "LunaDamage"
Obituary "%o wasn't capable of surviving %k's \cuCrescent Star\c-." //Filler
//+RIPPER - Reasons.
+DONTBLAST
Radius 7 //8
Height 7 //8
scale 2.5 //3
States
{
Spawn:
SBLA AB 2 A_SpawnItemEx("CrescentStarFX", -6, Random(-14, 14), random(4, -4))
loop
Death:
TNT1 A 1
stop
}
}

actor CrescentStarFX
{
Translation "200:203=3:3"
+CLIENTSIDEONLY
+DONTSPLASH
+NOINTERACTION
+DONTBLAST
+NOGRAVITY
scale 2.5
height 1
radius 1
States
{
Spawn:
FCRA I 2
FCRA J 8
Goto Death
Death:
FCRA J 1 A_Fadeout
loop
}
}

//Lunar Stars EX//

actor LunarCrescentStarEX
{
PROJECTILE
Translation "210:210=5:5", "247:247=8:8"
Speed 62
Damage (12) //(random(175, 250))
damagetype "LunaDamageX" //LunaDamage
Obituary "%o's soul no longer existed due to %k's \cuCrescent Star \cfEX\c-." //Filler
+RIPPER
+DONTBLAST
+PIERCEARMOR
+HEXENBOUNCE
Bouncefactor 0.7
Bouncecount 6
Reactiontime 50
Radius 8
Height 8
scale 3
States
{
Spawn:
SBLA AB 1 A_SpawnItemEx("CrescentStarFXX")
SBLA A 0 A_Countdown
loop
Death:
TNT1 A 1
stop
}
}

actor CrescentStarFXX
{
Translation "210:210=5:5", "247:247=8:8"
+CLIENTSIDEONLY
+DONTSPLASH
+NOINTERACTION
+DONTBLAST
+NOGRAVITY
scale 3
height 1
radius 1
States
{
Spawn:
SBLA AB 1 A_Fadeout(0.08)
loop
}
}

//Crescent Slash//

actor CrescentSlash
{
Obituary "%o's body was cut up by %k's \cuCrescent Slash\c-."
PROJECTILE
-CLIENTSIDEONLY
+NOGRAVITY
+GHOST
+THRUGHOST
damagetype "LunaDamage" //LunaDamageX
Radius 42 //60
Height 72 //168
scale 2.5 
Damage (15) //(random(95, 145))
States
{
Spawn:
TNT1 AAA 1
stop
XDeath:
Crash:
TNT1 A 0 A_GiveToTarget("CrescentSlashPuff",1)
TNT1 A 1
Stop
Death:
TNT1 A 0
Stop
}
}

actor CrescentSlashPuff : CustomInventory
{
+INVENTORY.AUTOACTIVATE
states
{
Pickup:
TNT1 A 0 A_Stop
TNT1 A 0 ThrustThingZ(0,25,0,0)
TNT1 A 0 A_Recoil(25)
TNT1 A 0  A_PlaySoundEx("weapon/mirrordeflect2","SoundSlot5")
TNT1 A 0 A_TakeInventory ("CrescentEnergyAmmo",999)
stop
}
}

//Crescent Slash EX//

actor CrescentSlashEX
{
damagetype "LunaDamageX"
Obituary "%o's soul was sliced in half by %k's \cuCrescent Slash \cfEX\c-."
+DONTBLAST
+NOGRAVITY
+MISSILE
+SKYEXPLODE
+NOINTERACTION
+DONTSPLASH
+THRUGHOST
+PIERCEARMOR
height 1
radius 1
-SOLID
Damage(0)
states
{
Spawn:
TNT1 A 0
TNT1 A 1 A_Explode(16,110,0) //125 ~ 205 Damage
stop
}
}

actor CrescentSlashParticle
{
Translation "210:210=200:200", "105:105=206:206"
renderstyle "Translucent"
alpha 0.95
+FORCEXYBILLBOARD
+CLIENTSIDEONLY
+DONTBLAST
+NOGRAVITY
height 5
radius 5
scale 2.5 
States
{
Spawn:
SCLA HIJKL 2 A_Fadeout(0.05) 
stop
}
}

//Niece's inheritage - Crescent Break / Luna T.Break variant//

actor CBreakThunderEffect1
{
Translation "229:229=5:5", "210:210=3:3"
+NOINTERACTION
-SOLID
+NOGRAVITY
+NONETID
Scale 2.5
States
{
Spawn:
LBFX BCD 3
stop
}
}

actor CBreakThunderEffect2 : CBreakThunderEffect1
{
States
{
Spawn:
LBFX EFGHIJ 3
stop
}
}

actor CresThunderBreakAttack1 : LightningBoltTracer2
{
Radius 20
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_ChangeFlag("FLOORHUGGER", 1)
TNT1 A 0 A_Changeflag("NOCLIP", 0)
TNT1 A 20
Death:
TNT1 A 0
TNT1 A 0 A_SpawnItemEx("CresThunderBreakAttackDamage")
stop
XDeath:
Crash:
TNT1 A 0
TNT1 A 0 A_SpawnItemEx("CresThunderBreakAttackDamage")
stop
}
}

actor CresThunderBreakAttack2 : LightningBoltTracer2
{
Radius 20
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_ChangeFlag("FLOORHUGGER", 1)
TNT1 A 0 A_Changeflag("NOCLIP", 0)
TNT1 A 12
Death:
TNT1 A 0
TNT1 A 0 A_SpawnItemEx("CresThunderBreakAttackDamage")
stop
XDeath:
Crash:
TNT1 A 0
TNT1 A 0 A_SpawnItemEx("CresThunderBreakAttackDamage")
stop
}
}

actor CresThunderBreakAttack3 : LightningBoltTracer2
{
Radius 20
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_ChangeFlag("FLOORHUGGER", 1)
TNT1 A 0 A_Changeflag("NOCLIP", 0)
TNT1 A 6
Death:
TNT1 A 0
TNT1 A 0 A_SpawnItemEx("CresThunderBreakAttackDamage")
stop
XDeath:
Crash:
TNT1 A 0
TNT1 A 0 A_SpawnItemEx("CresThunderBreakAttackDamage")
stop
}
}

actor CresThunderBreakAttackDamage : LightningBolt
{
Damage (13)
Translation "229:229=5:5", "210:210=3:3"
scale 4.5 //2.5
damagetype "LunaCresBreak"
Obituary "%o didn't stand a chance against %k's \cuCrescent Break\c-."
States
{
Spawn:
LIBO G 0
LIBO G 1 A_SpawnItemEx("CresThunderBreakAttackExtend", 0, 0, 355)
LIBO G 0 A_PlaySoundEx("weapon/lightningbolt","Weapon")
LIBO G 0 A_Explode(36, 85, 0)
LIBO G 0 A_SpawnItemEx("CresShockwaveLunaSpawner")
LIBO G 0 Radius_Quake(6,35,0,50,0)
LIBO GGGGGGGGG 0 A_SpawnItemEx("CresBreakParticleFX",random(-2,2),random(-2,2),32,random(-66,66),random(-66,66),random(-6,24))
LIBO HIJK 2 //1
Stop
}
}

actor CresThunderBreakAttackExtend : LightningExtend
{
Translation "229:229=5:5", "210:210=3:3"
States
{
Spawn:
LIBO L 0 
LIBO L 0 A_JumpIf(ceilingz-z <= 32, "Death")
LIBO L 0 A_SpawnItemEx("CresThunderBreakAttackExtend", 0, 0, 160)
LIBO LLMN 1
stop
}
}

actor CresShockwaveLunaSpawner
{
PROJECTILE
+PIERCEARMOR
damagetype "LunaCresBreak"
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_Explode(15,128,0)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,0)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,15)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,30)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,45)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,60)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,75)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,90)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,105)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,120)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,135)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,150)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,165)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,180)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,195)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,210)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,225)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,240)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,255)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,270)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,285)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,300)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,315)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,330)
TNT1 A 0 A_SpawnItemEx("CresShockwaveLunaAttack",0,0,0,3,0,0,345)
stop
}
}

actor CresShockwaveLunaAttack
{
PROJECTILE
Scale 2.0
+FLOORHUGGER
+RIPPER
+PIERCEARMOR
Translation "192:192=5:5"
damagetype "LunaCresBreak"
Speed 5
Damage (6)
Radius 32
Height 32
States
{
Spawn:
DUOR T 10
DUOR T 5 A_ScaleVelocity(1.8)
DUOR T 4 A_ScaleVelocity(2.2)
DUOR T 3 A_ScaleVelocity(3.0)
KeepGoing:
DUOR T 1 A_FadeOut
loop
}
}

actor CresBreakParticleFX
{
+NOINTERACTION
+CLIENTSIDEONLY
Radius 3
Height 3
Scale 3.5
+NOGRAVITY
Translation "210:231=5:5", "209:248=3:3"
renderstyle "Add"
alpha 1.0
-SOLID
States
{
Spawn:
MMFX BCDCBCDE 2 A_FadeOut(0.04)
stop
}
}

//Crescent Fan - Lunar Fan

actor CrescentFan
{
PROJECTILE
Translation "192:192=208:208", "198:198=3:3", "247:247=5:5"
+NOCLIP
+DONTBLAST //Optional?
+NOINTERACTION
+THRUGHOST
Radius 6 //5
Height 6 //5
scale 3.5 //2.5 ~ 3.5
damage (0)
meleerange 12
speed 64
States
{
Spawn:
LCFN A 0
LCFN AA 1 A_SpawnItemEx("CrescentFanDamager",0,0,0,2,0,0)
LCFN BBCCDDAA 1 A_SpawnItemEx("CrescentFanDamager",0,0,0,2,0,0)
LCFN D 0 A_ScaleVelocity(0.85) //0,5
LCFN BB 1 A_SpawnItemEx("CrescentFanDamager",0,0,0,2,0,0)
LCFN D 0 A_ScaleVelocity(0.6) //0.5
LCFN CC 1 A_SpawnItemEx("CrescentFanDamager",0,0,0,2,0,0)
LCFN D 0 A_ScaleVelocity(0.0)
LCFN DDAABBCCDDAABBCC 1 A_SpawnItemEx("CrescentFanDamager",0,0,0,2,0,0)
LCFN A 0 A_CustomMissile("ReturningCrescentFan",0,0,0,0)
stop
}
}

actor ReturningCrescentFan : CrescentFan
{
speed 32 //30
States
{
Spawn:
LCFN A 0
LCFN A 0 A_JumpIfCloser(64,"Death")
LCFN DD 1 A_SpawnItemEx("CrescentFanDamager",0,0,0,2,0,0)
LCFN B 0 A_JumpIfCloser(64,"Death")
LCFN AA 1 A_SpawnItemEx("CrescentFanDamager",0,0,0,2,0,0)
LCFN C 0 A_JumpIfCloser(64,"Death")
LCFN BB 1 A_SpawnItemEx("CrescentFanDamager",0,0,0,2,0,0)
LCFN D 0 A_JumpIfCloser(64,"Death")
LCFN CC 1 A_SpawnItemEx("CrescentFanDamager",0,0,0,2,0,0)
LCFN A 0 A_JumpIfCloser(64,"Death")
LCFN A 0 A_CustomMissile("ReturningCrescentFan",0,0,0,0)
stop
Death:
LCFN A 0 A_PlaySoundEx("weapon/adapterreturn","Weapon")
LCFN A 0 A_GiveToTarget("HasCrescentFanFlag",1)
Stop
}
}

actor CrescentFanDamager
{
PROJECTILE
+DONTSPLASH
+DONTBLAST
+THRUGHOST
+PICKUP
Damagetype "LunaFanDamage" 
Obituary "%o was caught by %k's \cuCrescent Fan\c-." 
radius 20 //16
height 10 //8
Damage (6)//80 ~ 120
States
{
Spawn:
TNT1 A 2
stop
}
}