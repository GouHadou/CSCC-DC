actor DarkPower : MegaBuster
{
Weapon.AmmoUse 1
Weapon.AmmoGive 0
Weapon.SlotNumber 2
inventory.pickupmessage "\cmMay your heart be tainted..."
inventory.pickupsound "weapon/weaponup"
Obituary "%o was consumed by the darkness of %k."
weapon.ammotype "DarkEnergy"
+WEAPON.AMMO_OPTIONAL
+INVENTORY.UNDROPPABLE
+WEAPON.CHEATNOTWEAPON
Tag "Dark Form (Shadow Beam/Dark Pulse/Feint Attack)"
inventory.icon "FATKA0"
Scale 2.0
States
{
Spawn:
WEAP X 1
loop
Ready:
SHUD A 0 A_JumpIfInventory("StarActive",1,1)
SHUD A 0 ACS_ExecuteAlways(998,0,504)
SHUD A 0 A_GunFlash
SHUD A 10 A_WeaponReady
SHUD AA 1 A_WeaponReady
//SHUD A 0 A_JumpIfInventory("User1_Trigger",1,"AmmoCheck")
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
Goto Ready+4
Deselect:
TNT1 A 0 A_TakeInventory("SBCharge",999)
TNT1 A 0 A_TakeInventory("User1_Trigger",999)
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
SHUD A 1 A_Lower
goto Deselect+2
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
SHUD A 1 A_Raise
Loop
Flash:
TNT1 A 0 A_GiveInventory("SalHPChecker",1)
TNT1 A 0 A_JumpIfInventory("IsDead",1,"FlashStop")
TNT1 AAA 1 A_JumpIfInventory("SalCarryFlag",1,"CarryFlash")
//TNT1 A 0 A_GiveInventory("FeintAttackEnergy",2)
loop
CarryFlash:
SHUD A 0 A_GiveInventory("SalHPChecker",1)
SHUD A 0 A_JumpIfInventory("IsDead",1,"FlashStop")
SPSY HHI 1 
//SHUD A 0 A_GiveInventory("FeintAttackEnergy",2)
SHUD A 0 A_JumpIfInventory("SalCarryFlag",1,1)
goto CarryStop
SHUD A 0 A_GiveInventory("SalHPChecker",1)
SHUD A 0 A_JumpIfInventory("IsDead",1,"FlashStop")
SPSY IJJ 1 
//SHUD A 0 A_GiveInventory("FeintAttackEnergy",2)
SHUD A 0 A_JumpIfInventory("SalCarryFlag",1,"CarryFlash")
goto CarryStop
CarryStop:
SHUD A 0 A_JumpIfInventory("IsDead",1,"FlashStop")
SHUD A 0 A_GiveInventory("SalHPChecker",1)
//SPSY A 0 A_GiveInventory("FeintAttackEnergy",2)
SPSY BCD 1
SHUD A 0 A_JumpIfInventory("IsDead",1,"FlashStop")
SHUD A 0 A_GiveInventory("SalHPChecker",1)
//SPSY A 0 A_GiveInventory("FeintAttackEnergy",2)
SPSY EFG 1
goto Flash
FlashStop:
TNT1 A 1
stop
Fire:
SHUD A 0 A_JumpIfInventory("UpgradeSphereFlag",1,"UpgradeFire2StateCheck")
SHUD A 0 A_JumpIfInventory("ShadowBallComboTimer",1,"SBallCombo")
SHUD A 0 A_JumpIfInventory("SmashFlag",1,"VoidFall")
SHUD A 0 A_JumpIfInventory("ShadowBeamEnergy",224,"RailLevelMax")
SHUD A 0 A_JumpIfInventory("ShadowBeamEnergy",168,"RailLevel4")
SHUD A 0 A_JumpIfInventory("ShadowBeamEnergy",112,"RailLevel3")
SHUD A 0 A_JumpIfInventory("ShadowBeamEnergy",56,"RailLevel2")
SHUD A 0 A_TakeInventory("ShadowBeamEnergy",224)
SHUD B 2 A_PlaySoundEx("turretfire","Weapon")
SHUD B 0 A_JumpIfInventory("UpgradeFire2",2,"RailLevel1X")
SHUD B 0 A_RailAttack(18,8,0,"FF 12 FF","Black",RGF_FULLBRIGHT|RGF_SILENT)
SPNT AAAAAAAAAA 3 A_GiveInventory("DarkDualEnergyPack",1) //reduced energy rate for both ammos.
SHUD B 3 A_GiveInventory("DarkDualEnergyPack",1)
goto Ready+4
SBallCombo:
SHUD B 3
SHUD C 0 A_GiveInventory("DarkDualEnergyPack",1)
SHUD C 0 A_PlaySoundEx("misc/shadowball","Weapon")
SHUD C 3 A_FireCustomMissile("ShadowBall1",0,0,8,0)
SHUD C 0 A_GiveInventory("DarkDualEnergyPack",1)
SHUD C 0 A_PlaySoundEx("misc/shadowball","Weapon")
SHUD C 3 A_FireCustomMissile("ShadowBall1",5,0,8,0)
SHUD C 0 A_GiveInventory("DarkDualEnergyPack",1)
SHUD C 0 A_PlaySoundEx("misc/shadowball","Weapon")
SHUD C 3 A_FireCustomMissile("ShadowBall1",10,0,8,0)
SHUD C 0 A_GiveInventory("DarkDualEnergyPack",1)
SHUD C 0 A_PlaySoundEx("misc/shadowball","Weapon")
SHUD C 3 A_FireCustomMissile("ShadowBall1",5,0,8,0)
SHUD C 0 A_GiveInventory("DarkDualEnergyPack",1)
SHUD C 0 A_PlaySoundEx("misc/shadowball","Weapon")
SHUD C 3 A_FireCustomMissile("ShadowBall1",0,0,8,0)
SHUD C 0 A_GiveInventory("DarkDualEnergyPack",1)
SHUD C 0 A_PlaySoundEx("misc/shadowball","Weapon")
SHUD C 3 A_FireCustomMissile("ShadowBall1",-5,0,8,0)
SHUD C 0 A_GiveInventory("DarkDualEnergyPack",1)
SHUD C 0 A_PlaySoundEx("misc/shadowball","Weapon")
SHUD C 3 A_FireCustomMissile("ShadowBall1",-10,0,8,0)
SHUD C 0 A_GiveInventory("DarkDualEnergyPack",1)
SHUD C 0 A_PlaySoundEx("misc/shadowball","Weapon")
SHUD C 3 A_FireCustomMissile("ShadowBall1",-5,0,8,0)
SHUD C 0 A_GiveInventory("DarkDualEnergyPack",1)
SHUD C 0 A_PlaySoundEx("misc/shadowball","Weapon")
SHUD C 3 A_FireCustomMissile("ShadowBall2",0,0,8,0)
SHUD C 0 A_TakeInventory("ShadowBallComboTimer",999)
SHUD CB 3 A_GiveInventory("DarkDualEnergyPack",1)
goto Ready+4
RailLevel1X:
SHUD B 0 A_RailAttack(18,8,0,"FF 12 FF","Black",RGF_FULLBRIGHT|RGF_SILENT)
SHUD B 0 A_GiveInventory("ShadowBallComboTimer",1)
SPNT AAA 3 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SHUD B 3 A_GiveInventory("DarkDualEnergyPack",1)
goto Ready+4
RailLevel2:
SHUD A 0 A_TakeInventory("ShadowBeamEnergy",224)
SHUD B 2 A_PlaySoundEx("turretfire","Weapon")
SHUD B 0 A_JumpIfInventory("UpgradeFire2",2,"RailLevel2X")
SHUD B 0 A_RailAttack(25,8,0,"FF 12 FF","Green",RGF_FULLBRIGHT|RGF_SILENT)
SPNT AAAAAAAAAA 3 A_GiveInventory("DarkDualEnergyPack",1) //reduced energy rate for both ammos.
SHUD B 3 A_GiveInventory("DarkDualEnergyPack",1)
goto Ready+4
RailLevel2X:
SHUD B 0 A_RailAttack(25,8,0,"FF 12 FF","Green",RGF_FULLBRIGHT|RGF_SILENT)
SHUD B 0 A_GiveInventory("ShadowBallComboTimer",1)
SPNT AAA 3 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SHUD B 3 A_GiveInventory("DarkDualEnergyPack",1)
goto Ready+4
RailLevel3:
SHUD A 0 A_TakeInventory("ShadowBeamEnergy",224)
SHUD B 2 A_PlaySoundEx("turretfire","Weapon")
SHUD B 0 A_JumpIfInventory("UpgradeFire2",2,"RailLevel3X")
SHUD B 0 A_RailAttack(35,8,0,"FF 12 FF","Yellow",RGF_FULLBRIGHT|RGF_SILENT)
SPNT AAAAAAAAAA 3 A_GiveInventory("DarkDualEnergyPack",1) //reduced energy rate for both ammos.
SHUD B 3 A_GiveInventory("DarkDualEnergyPack",1)
goto Ready+4
RailLevel3X:
SHUD B 0 A_RailAttack(35,8,0,"FF 12 FF","Yellow",RGF_FULLBRIGHT|RGF_SILENT)
SHUD B 0 A_GiveInventory("ShadowBallComboTimer",1)
SPNT AAA 3 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SHUD B 3 A_GiveInventory("DarkDualEnergyPack",1)
goto Ready+4
RailLevel4:
SHUD A 0 A_TakeInventory("ShadowBeamEnergy",224)
SHUD B 2 A_PlaySoundEx("turretfire","Weapon")
SHUD B 0 A_JumpIfInventory("UpgradeFire2",2,"RailLevel4X")
SHUD B 0 A_RailAttack(48,8,0,"FF 12 FF","Orange",RGF_FULLBRIGHT|RGF_SILENT)
SPNT AAAAAAAAAA 3 A_GiveInventory("DarkDualEnergyPack",1) //reduced energy rate for both ammos.
SHUD B 3 A_GiveInventory("DarkDualEnergyPack",1)
goto Ready+4
RailLevel4X:
SHUD B 0 A_RailAttack(48,8,0,"FF 12 FF","Orange",RGF_FULLBRIGHT|RGF_SILENT)
SHUD B 0 A_GiveInventory("ShadowBallComboTimer",1)
SPNT AAA 3 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SHUD B 3 A_GiveInventory("DarkDualEnergyPack",1)
goto Ready+4
RailLevelMax:
SHUD A 0 A_TakeInventory("ShadowBeamEnergy",224)
SHUD B 2 A_PlaySoundEx("turretfire","Weapon")
SHUD B 0 A_JumpIfInventory("UpgradeFire2",2,"RailLevelMaxX")
SHUD B 0 A_RailAttack(60,8,0,"FF 12 FF","Red",RGF_FULLBRIGHT|RGF_SILENT)
SPNT AAAAAAAAAA 3 A_GiveInventory("DarkDualEnergyPack",1) //reduced energy rate for both ammos.
SHUD B 3 A_GiveInventory("DarkDualEnergyPack",1)
goto Ready+4
RailLevelMaxX:
SHUD B 0 A_RailAttack(60,8,0,"FF 12 FF","Red",RGF_FULLBRIGHT|RGF_SILENT)
SHUD B 0 A_GiveInventory("ShadowBallComboTimer",1)
SPNT AAA 3 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SPNT A 0 A_GiveInventory("DarkDualEnergyPack",1)
SPNT A 3 A_WeaponReady(WRF_NOSWITCH|WRF_NOSECONDARY)
SHUD B 3 A_GiveInventory("DarkDualEnergyPack",1)
goto Ready+4
UpgradeFire2StateCheck:
SHUD A 0 A_JumpIfInventory("UpgradeFire2",2,"UpgradeFire2Redirect")
goto UpgradeFire2State
UpgradeFire2Redirect:
goto Fire+1
UpgradeFire2State:
SHUD A 0 A_JumpIfInventory("UpgradeFire2",3,"NoAmmo")
SHUD A 0 A_JumpIfInventory("UpgradeFire2",1,"UpgradeFire2State2")
SHUD B 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD A 0 A_SpawnItemEx("ShadowBeamAmmoBooster",0,0,28)
SHUD B 0 A_GiveInventory("UpgradeFire2",1)
SHUD B 0 A_TakeInventory("UpgradeSphereFlag",999)
SHUD B 0 A_PlaySoundEx("FORMUP","Weapon")
SHUD B 0 ACS_ExecuteAlways(736,0,7)
SHUD F 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD I 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD L 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD F 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD I 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD L 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
goto Ready+4
UpgradeFire2State2:
SHUD B 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD A 0 A_SpawnItemEx("ShadowBeamAmmoBooster",0,0,28)
SHUD B 0 A_GiveInventory("UpgradeFire2",1)
SHUD B 0 A_TakeInventory("UpgradeSphereFlag",999)
SHUD B 0 A_PlaySoundEx("FORMUP","Weapon")
SHUD B 0 ACS_ExecuteAlways(736,0,8)
SHUD F 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD I 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD L 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD F 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD I 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD L 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
goto Ready+4
Altfire:
SHUD A 0 A_JumpIfInventory("UpgradeSphereFlag",1,"UpgradeAlt2StateCheck")
SHUD A 0 A_JumpIfInventory("DarkEnergy",240,"DarkPulse")
goto NoAmmo
DarkPulse:
SHUD A 0 A_TakeInventory("DarkEnergy",240)
SHUD B 3
SHUD A 0 A_JumpIfInventory("UpgradeAlt2",2,"DarkPulseXX")
SHUD A 0 A_JumpIfInventory("UpgradeAlt2",1,"DarkPulseX")
SHUD A 0 A_PlaySoundEx("weapon/pharaoh2","Weapon")
SHUD C 25 A_FireCustomMissile("DarkPulseMain",0,0,0,0)
SHUD B 3
Goto Ready+4
DarkPulseX:
SHUD A 0 A_PlaySoundEx("weapon/pharaoh2","Weapon")
SHUD C 25 A_FireCustomMissile("DarkPulseMainX",0,0,0,0)
SHUD B 3
Goto Ready+4
DarkPulseXX:
SHUD A 0 A_PlaySoundEx("weapon/pharaoh2","Weapon")
SHUD C 25 A_FireCustomMissile("DarkPulseMainXX",0,0,0,0)
SHUD B 3
Goto Ready+4
UpgradeAlt2StateCheck:
SHUD A 0 A_JumpIfInventory("UpgradeAlt2",2,"UpgradeAlt2Redirect")
goto UpgradeAlt2State
UpgradeAlt2Redirect:
goto Altfire+1
UpgradeAlt2State:
SHUD A 0 A_JumpIfInventory("UpgradeAlt2",3,"NoAmmo")
SHUD A 0 A_JumpIfInventory("UpgradeAlt2",1,"UpgradeAlt2State2")
SHUD B 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD B 0 A_GiveInventory("UpgradeAlt2",1)
SHUD B 0 A_TakeInventory("UpgradeSphereFlag",999)
SHUD B 0 A_PlaySoundEx("FORMUP","Weapon")
SHUD B 0 ACS_ExecuteAlways(736,0,10)
SHUD F 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD I 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD L 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD F 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD I 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD L 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
goto Ready+4
UpgradeAlt2State2:
SHUD A 0 A_JumpIfInventory("UpgradeAlt2",3,"NoAmmo")
SHUD B 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD B 0 A_GiveInventory("UpgradeAlt2",1)
SHUD B 0 A_TakeInventory("UpgradeSphereFlag",999)
SHUD B 0 A_PlaySoundEx("FORMUP","Weapon")
SHUD B 0 ACS_ExecuteAlways(736,0,11)
SHUD F 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD I 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD L 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD F 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD I 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
SHUD L 2
SHUD A 0 A_GiveInventory("PsychicEnergy",2)
SHUD A 0 A_GiveInventory("ShadowBeamEnergy",1)
SHUD A 0 A_GiveInventory("DarkEnergy",3)
goto Ready+4
FAttack:
//SHUD A 0 A_TakeInventory("FeintAttackEnergy",999)
//SHUD A 0 SetPlayerProperty(0,1,0)
//SHUD A 0 A_ChangeFlag("SHOOTABLE",0)
SHUD A 0 A_PlaySoundEx("pokemon/feintattack","Weapon")
SHUD A 1 A_SetTranslucent(0.8)
SHUD A 1 A_SetTranslucent(0.6)
SHUD A 1 A_SetTranslucent(0.4)
SHUD A 1 A_SetTranslucent(0.2)
SHUD A 1 A_SetTranslucent(0.0)
SHUD A 0 ACS_NamedExecuteAlways("core_flyplayer",0,0,1)
SHUD BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB 0 A_SpawnItemEx("SBallDeathFX",0,0,16,random(-10,10),random(-10,10),random(-10,10))
SHUD B 0 A_SpawnItemEx("FeintAttackDamager",0,0,16)
SHUD B 2 A_ChangeVelocity(cos(pitch)*15,0,-sin(pitch)*15,CVF_RELATIVE)
SHUD B 0 A_SpawnItemEx("FeintAttackDamager",0,0,16)
SHUD B 2 A_ChangeVelocity(cos(pitch)*15,0,-sin(pitch)*15,CVF_RELATIVE)
SHUD B 0 A_SpawnItemEx("FeintAttackDamager",0,0,16)
SHUD B 2 A_ChangeVelocity(cos(pitch)*15,0,-sin(pitch)*15,CVF_RELATIVE)
SHUD B 0 A_SpawnItemEx("FeintAttackDamager",0,0,16)
SHUD B 2 A_ChangeVelocity(cos(pitch)*15,0,-sin(pitch)*15,CVF_RELATIVE)
SHUD B 0 A_SpawnItemEx("FeintAttackDamager",0,0,16)
SHUD B 2 A_ChangeVelocity(cos(pitch)*15,0,-sin(pitch)*15,CVF_RELATIVE)
SHUD B 0 A_SpawnItemEx("FeintAttackDamager",0,0,16)
SHUD B 2 A_ChangeVelocity(cos(pitch)*15,0,-sin(pitch)*15,CVF_RELATIVE)
SHUD B 0 A_SpawnItemEx("FeintAttackDamager",0,0,16)
SHUD B 2 A_ChangeVelocity(cos(pitch)*15,0,-sin(pitch)*15,CVF_RELATIVE)
SHUD B 0 A_SpawnItemEx("FeintAttackDamager",0,0,16)
SHUD B 2 A_ChangeVelocity(cos(pitch)*15,0,-sin(pitch)*15,CVF_RELATIVE)
SHUD B 0 A_SpawnItemEx("FeintAttackDamager",0,0,16)
SHUD B 2 A_ChangeVelocity(cos(pitch)*15,0,-sin(pitch)*15,CVF_RELATIVE)
SHUD B 0 A_SpawnItemEx("FeintAttackDamager",0,0,16)
SHUD B 2 A_ChangeVelocity(cos(pitch)*15,0,-sin(pitch)*15,CVF_RELATIVE)
SHUD BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB 0 A_SpawnItemEx("SBallDeathFX",0,0,16,random(-10,10),random(-10,10),random(-10,10))
SHUD B 0 A_PlaySoundEx("misc/mm3explosion","Weapon")
SHUD B 1 A_SetTranslucent(0.2)
SHUD B 1 A_SetTranslucent(0.4)
SHUD B 1 A_SetTranslucent(0.6)
SHUD B 1 A_SetTranslucent(0.8)
SHUD B 1 A_SetTranslucent(1.0)
SHUD B 0 A_Stop
SHUD B 0 A_SpawnItemEx("FeintAttackBigDamager",0,0,16)
//SHUD B 0 SetPlayerProperty(0,0,0)
SHUD B 0 ACS_NamedExecuteAlways("core_flyplayer",0,0,0)
SHUD B 10 A_TakeInventory("User1_Trigger",999)
goto Ready+4
NoAmmo:
SHUD A 1 ACS_Execute(979,0)
Goto Ready+4
VoidFall:
SHUD A 0 A_TakeInventory("SmashFlag",999)
//SHUD A 0 SetPlayerProperty(0,1,0)
//SHUD A 0 SetPlayerProperty(0,2,5)
SHUD A 0 A_SpawnItemEx("StarFallSpawner",0,0,40,0,0,70)
SHUD A 25 A_PlaySoundEx("misc/elementsfx","Weapon") 
SHUD JK 3
SHUD L 20
SHUD K 3
SHUD J 25
SHUD KL 3
SHUD L 60 A_FireCustomMissile("VoidStormSpawner",0,0,8,0)
SHUD C 3 SetPlayerProperty(0,0,0)
SHUD B 3 SetPlayerProperty(0,0,4)
SHUD A 5
goto Ready+4
}
}

Actor SBCharge : Inventory{inventory.amount 1 inventory.maxamount 999}

actor DarkEnergy : Ammo
{
inventory.amount 1
inventory.maxamount 240
}

Actor ShadowBeamEnergy : Ammo{inventory.amount 1 inventory.maxamount 224 +INVENTORY.IGNORESKILL}

Actor ShadowBeamAmmoBooster
{
+NOINTERACTION
+NOCLIP
-SOLID
+NOTARGETSWITCH
+MISSILE
radius 1
height 1
+NOGRAVITY
+DONTBLAST
Scale 1.0
States
{
Spawn:
TNT1 A 0
TNT1 A 2 A_JumpIfInTargetInventory("IsDead",1,"Death")
TNT1 A 0 A_GiveToTarget("ShadowBeamEnergy",1)
goto Spawn+1
Death:
TNT1 A 0
stop
}
}

actor ShadowBallAmmo : Ammo
{
inventory.amount 1
inventory.maxamount 28
}

Actor DarkDualEnergyPack : CustomInventory
{
States
{
Pickup:
TNT1 A 0 A_GiveInventory("ShadowBeamEnergy",1)
TNT1 A 0 A_GiveInventory("DarkEnergy",1)
stop
}
}

actor ShadowBall1
{
PROJECTILE
Obituary "%k sent %o to the Shadow Realm with a small dose of their shadow energy."
Radius 8 //12
Height 8 //12
Damage(5)
Damagetype "GhostTypeX1"
Speed 30
scale 1.0
States
{
Spawn:
SDB2 AB 4
loop
Death:
TNT1 A 0
stop
}
}

Actor WhackAttack
{
PROJECTILE
+DONTBLAST
+THRUGHOST
+HITTRACER
Obituary "%o was deleted by %k's Whack spell."
Speed 18
Radius 14
Height 14
Scale 2.0
Damage(3)
States
{
Spawn:
SDB2 A 0
SDB2 A 0 A_PlaySoundEx("weapon/pharaoh2","Voice")
SDB2 AAABBB 1 A_SpawnItemEx("SBallDeathFX",-6,0,0,random(-1,-5),0,random(-1,-5),random(-60,60))
goto Spawn+2
Crash:
TNT1 A 0 A_ChangeFlag("NOCLIP",1)
TNT1 A 5 A_GiveInventory("WhackChanceFactor",1,AAPTR_TRACER)
TNT1 A 0 A_JumpIfInventory("WhackCheckerSuccess",1,"Chance",AAPTR_TRACER)
stop
Chance:
TNT1 A 0 A_Jump(128,"Instakill")
stop
Instakill:
TNT1 A 1 A_Warp(AAPTR_TRACER,0,0,24,0,0)
TNT1 A 0 A_Warp(AAPTR_TRACER,0,0,24,0,0)
TNT1 A 0 A_PlaySoundEx("undertale/death","SoundSlot6")
TNT1 A 0 A_Explode(200,28,0,0,28) //needs separate explosion projectile for fitting obit
TNT1 AAAAAAAAAAAAAAA 0 A_SpawnItemEx("ShadowBallFXX",0,0,28,random(-13,13),0,random(-10,10),random(0,359))
TNT1 A 1
stop
}
}

Actor WhackChanceFactor : CustomInventory
{
States
{
Pickup:
TNT1 A 0 A_JumpIfHealthLower(980,"Whack1")
stop
Whack1:
TNT1 A 0 A_GiveInventory("WhackCheckerSuccess",1)
stop
}
}

Actor WhackCheckerSuccess : Powerup{powerup.duration 15}

actor ShadowBall2 : ShadowBall1
{
Radius 16 //20
Height 16 //20
Damage(19)
damagetype "GhostTypeX2"
Renderstyle "Translucent"
Alpha 0.8
Obituary "%k sent %o to the Shadow Realm with a moderate dose of their shadow energy."
Speed 40
Scale 2.0
States
{
Spawn:
SDB2 C 0
SDB2 C 1 A_SpawnItemEx("ShadowBallFX",-8,0,0)
SDB2 C 0 A_ScaleVelocity(1.05) 
SDB2 C 1 A_SpawnItemEx("ShadowBallFX",-8,0,0)
SDB2 D 1 A_SpawnItemEx("ShadowBallFX",-8,0,0)
SDB2 D 0 A_ScaleVelocity(1.05) 
SDB2 D 1 A_SpawnItemEx("ShadowBallFX",-8,0,0)
goto Spawn+1
Death:
TNT1 AAAAAAAAAA 0 A_SpawnItemEx("SBallDeathFX",0,0,4,random(-13,13),random(-13,13),random(-10,10),0,0,0)
stop
}
}

actor ShadowBall3 : ShadowBall1
{
Translation "209:215=6:6", "208:208=63:63", "4:4=63:63"
Radius 28
Height 28 
Damage(25)
damagetype "GhostTypeX3"
Obituary "%k sent %o to the Shadow Realm with a \crYOU DIE \c-dose of their shadow energy."
Scale 3.5
Speed 60
States
{
Spawn:
SDB1 A 0
SDB1 AABB 1 A_SpawnItemEx("ShadowBallFX") 
loop
Death:
BOMB AAAAAAAAAA 0 A_SpawnItemEx("ShadowBallFXX",0,0,8,random(-10,10),random(-10,10),random(5,15),0,0,0)
BOMB AAAA 0 A_SpawnItemEx("SBallDeathFX",0,0,4,random(-13,13),random(-13,13),random(5,15),0,0,0)
BOMB A 0 A_PlaySoundEx("weapon/hyperbomb","Weapon")
BOMB A 0 A_Explode(10,100,0)
ASEX AB 3
BOMB AAAAAAAAAA 0 A_SpawnItemEx("ShadowBallFXX",0,0,8,random(-10,10),random(-10,10),random(5,15),0,0,0)
BOMB AAAAAA 0 A_SpawnItemEx("SBallDeathFX",0,0,4,random(-13,13),random(-13,13),random(5,15),0,0,0)
BOMB A 0 A_PlaySoundEx("weapon/hyperbomb","Weapon")
BOMB A 0 A_Explode(13,125,0)
ASEX CD 3
BOMB AAAAAAAAAA 0 A_SpawnItemEx("ShadowBallFXX",0,0,8,random(-10,10),random(-10,10),random(5,15),0,0,0)
BOMB AAAAAAAA 0 A_SpawnItemEx("SBallDeathFX",0,0,4,random(-13,13),random(-13,13),random(5,15),0,0,0)
BOMB A 0 A_PlaySoundEx("weapon/hyperbomb","Weapon")
BOMB A 0 A_Explode(15,150,0,0,25)
ASEX EF 3 
stop
}
}

actor ShadowBallFX
{
+NOINTERACTION
+CLIENTSIDEONLY
Renderstyle "Add"
Alpha 0.85
Scale 1.75
States
{
Spawn:
SDB2 A 0
SDB2 CDB 1 A_FadeOut(0.09)
stop
}
}

actor ShadowBallFXX
{
+NOINTERACTION
+CLIENTSIDEONLY
Radius 3
Height 3
+NOGRAVITY
Translation "209:215=6:6", "208:208=63:63", "4:4=63:63"
renderstyle "Add"
alpha 0.95
-SOLID
Scale 3.5 //2.5
States
{
Spawn:
MMFX A 0
MMFX BCDCBCDE 2 A_FadeOut(0.02) //1 tic
stop
}
}

Actor DarkPulseMain
{
PROJECTILE
+NOTARGETSWITCH //I have to put this in just in case
//+SKYEXPLODE
Radius 20
Height 20
scale 3
Renderstyle "Translucent"
Alpha 0.8
Damage(15)
Translation "209:248=6:6", "208:208=63:63", "4:4=63:63", "168:168=63:63", "4:4=63:63"
Damagetype "DarkPulse"
Obituary "Well, at least %o didn't have to put up with %k's Dark Pulse Danmaku."
speed 40
States
{
Spawn:
GAMA U 0
GAMA UUVVWW 1 A_SpawnItemEx("DarkPulseTrail",-8,0,0) 
goto Spawn+1
Death:
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,0)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,36)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,72)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,108)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,144)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,180)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,216)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,252)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,288)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,324)
BOMB AAAAAAAAAA 0 A_SpawnItemEx("ShadowBallFXX",0,0,8,random(-10,10),random(-10,10),random(5,15),0,0,0)
BOMB AAAA 0 A_SpawnItemEx("SBallDeathFX",0,0,4,random(-13,13),random(-13,13),random(5,15),0,0,0)
BOMB A 0 A_PlaySoundEx("weapon/hyperbomb","Weapon")
BOMB A 0 A_Explode(10,100,0)
ASEX AB 3
BOMB AAAAAAAAAA 0 A_SpawnItemEx("ShadowBallFXX",0,0,8,random(-10,10),random(-10,10),random(5,15),0,0,0)
BOMB AAAAAA 0 A_SpawnItemEx("SBallDeathFX",0,0,4,random(-13,13),random(-13,13),random(5,15),0,0,0)
BOMB A 0 A_PlaySoundEx("weapon/hyperbomb","Weapon")
BOMB A 0 A_Explode(13,125,0)
ASEX CD 3
BOMB AAAAAAAAAA 0 A_SpawnItemEx("ShadowBallFXX",0,0,8,random(-10,10),random(-10,10),random(5,15),0,0,0)
BOMB AAAAAAAA 0 A_SpawnItemEx("SBallDeathFX",0,0,4,random(-13,13),random(-13,13),random(5,15),0,0,0)
BOMB A 0 A_PlaySoundEx("weapon/hyperbomb","Weapon")
BOMB A 0 A_Explode(15,150,0,0,25)
ASEX EF 3
stop
}
}

Actor DarkPulseMainX : DarkPulseMain
{
Damage(25)
States
{
Death:
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,0)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,36)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,72)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,108)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,144)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,180)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,216)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,252)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,288)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,324)
BOMB AAAAAAAAAA 0 A_SpawnItemEx("ShadowBallFXX",0,0,8,random(-10,10),random(-10,10),random(5,15),0,0,0)
BOMB AAAA 0 A_SpawnItemEx("SBallDeathFX",0,0,4,random(-13,13),random(-13,13),random(5,15),0,0,0)
BOMB A 0 A_PlaySoundEx("weapon/hyperbomb","Weapon")
BOMB A 0 A_Explode(10,100,0)
ASEX AB 3
BOMB AAAAAAAAAA 0 A_SpawnItemEx("ShadowBallFXX",0,0,8,random(-10,10),random(-10,10),random(5,15),0,0,0)
BOMB AAAAAA 0 A_SpawnItemEx("SBallDeathFX",0,0,4,random(-13,13),random(-13,13),random(5,15),0,0,0)
BOMB A 0 A_PlaySoundEx("weapon/hyperbomb","Weapon")
BOMB A 0 A_Explode(13,125,0)
ASEX CD 3
BOMB AAAAAAAAAA 0 A_SpawnItemEx("ShadowBallFXX",0,0,8,random(-10,10),random(-10,10),random(5,15),0,0,0)
BOMB AAAAAAAA 0 A_SpawnItemEx("SBallDeathFX",0,0,4,random(-13,13),random(-13,13),random(5,15),0,0,0)
BOMB A 0 A_PlaySoundEx("weapon/hyperbomb","Weapon")
BOMB A 0 A_Explode(15,150,0,0,25)
ASEX EF 3
ASEX FEDCBABCDEFEDCBABCDEFEDCBABCDEFEDCBABCDEFEDCBABCDEF 2 bright A_Explode(4,200,0,0,40)
stop
}
}

Actor DarkPulseMainXX : DarkPulseMain
{
Damage(38)
States
{
Death:
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,0)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,30)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,60)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,90)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,120)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,150)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,180)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,210)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,240)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,270)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,300)
TNT1 A 0 A_SpawnItemEx("LingeringDarkness",0,0,5,15,0,0,330)
BOMB AAAAAAAAAA 0 A_SpawnItemEx("ShadowBallFXX",0,0,8,random(-10,10),random(-10,10),random(5,15),0,0,0)
BOMB AAAA 0 A_SpawnItemEx("SBallDeathFX",0,0,4,random(-13,13),random(-13,13),random(5,15),0,0,0)
BOMB A 0 A_PlaySoundEx("weapon/hyperbomb","Weapon")
BOMB A 0 A_Explode(10,100,0)
ASEX AB 3
BOMB AAAAAAAAAA 0 A_SpawnItemEx("ShadowBallFXX",0,0,8,random(-10,10),random(-10,10),random(5,15),0,0,0)
BOMB AAAAAA 0 A_SpawnItemEx("SBallDeathFX",0,0,4,random(-13,13),random(-13,13),random(5,15),0,0,0)
BOMB A 0 A_PlaySoundEx("weapon/hyperbomb","Weapon")
BOMB A 0 A_Explode(13,125,0)
ASEX CD 3
BOMB AAAAAAAAAA 0 A_SpawnItemEx("ShadowBallFXX",0,0,8,random(-10,10),random(-10,10),random(5,15),0,0,0)
BOMB AAAAAAAA 0 A_SpawnItemEx("SBallDeathFX",0,0,4,random(-13,13),random(-13,13),random(5,15),0,0,0)
BOMB A 0 A_PlaySoundEx("weapon/hyperbomb","Weapon")
BOMB A 0 A_Explode(15,150,0,0,25)
ASEX EF 3
ASEX A 0 A_JumpIf(z-floorz==0,"Waves")
goto DeathContinue
Waves:
ASEX A 0 A_SpawnItemEx("DarkPulseEnergyWave",0,0,4,10,0,0,random(0,359))
ASEX FEDCBA 2 bright A_Explode(5,250,0,0,50)
ASEX A 0 A_SpawnItemEx("DarkPulseEnergyWave",0,0,4,10,0,0,random(0,359))
ASEX BCDEF 2 bright A_Explode(5,250,0,0,50)
ASEX A 0 A_SpawnItemEx("DarkPulseEnergyWave",0,0,4,10,0,0,random(0,359))
ASEX EDCBA 2 bright A_Explode(5,250,0,0,50)
ASEX A 0 A_SpawnItemEx("DarkPulseEnergyWave",0,0,4,10,0,0,random(0,359))
ASEX BCDEF 2 bright A_Explode(5,250,0,0,50)
ASEX A 0 A_SpawnItemEx("DarkPulseEnergyWave",0,0,4,10,0,0,random(0,359))
ASEX EDCBA 2 bright A_Explode(5,250,0,0,50)
ASEX A 0 A_SpawnItemEx("DarkPulseEnergyWave",0,0,4,10,0,0,random(0,359))
ASEX BCDEF 2 bright A_Explode(5,250,0,0,50)
ASEX A 0 A_SpawnItemEx("DarkPulseEnergyWave",0,0,4,10,0,0,random(0,359))
ASEX EDCBA 2 bright A_Explode(5,250,0,0,50)
ASEX A 0 A_SpawnItemEx("DarkPulseEnergyWave",0,0,4,10,0,0,random(0,359))
ASEX BCDEF 2 bright A_Explode(5,250,0,0,50)
ASEX A 0 A_SpawnItemEx("DarkPulseEnergyWave",0,0,4,10,0,0,random(0,359))
ASEX EDCBA 2 bright A_Explode(5,250,0,0,50)
ASEX A 0 A_SpawnItemEx("DarkPulseEnergyWave",0,0,4,10,0,0,random(0,359))
ASEX BCDEF 2 bright A_Explode(5,250,0,0,50)
stop
DeathContinue:
ASEX FEDCBABCDEFEDCBABCDEFEDCBABCDEFEDCBABCDEFEDCBABCDEF 2 bright A_Explode(5,250,0,0,50)
stop
}
}

Actor DarkPulseEnergyWave
{
PROJECTILE
+DONTBLAST
+RIPPER
+BRIGHT
+VISIBILITYPULSE
+FLOORHUGGER
+NOEXPLODEFLOOR
-NOGRAVITY
Damagetype "DPEnergyWave"
Damage(4)
Radius 44
Height 28
Scale 3.0
Speed 7
Translation "192:192=63:63", "198:198=79:79", "4:4=5:5", "168:168=5:5"
Obituary "%o was swallowed by %k's Dark Pulse energy wave."
States
{
Spawn:
OZRK A 0
OZRK AAAAA 0 A_SpawnItemEx("SBallDeathFX",random(-5,5),random(-20,20),4,0,random(-3,3),random(35,45),0)
OZRK A 3
Spawn2:
OZRK B 0 A_PlaySoundEx("darkile/burstloop","Voice")
OZRK BBBBB 0 A_SpawnItemEx("SBallDeathFX",random(-5,5),random(-20,20),4,momx,momy,random(5,10),0,SXF_NOCHECKPOSITION|SXF_ABSOLUTEMOMENTUM)
OZRK B 3
OZRK CCCCC 0 A_SpawnItemEx("SBallDeathFX",random(-5,5),random(-20,20),4,momx,momy,random(5,10),0,SXF_NOCHECKPOSITION|SXF_ABSOLUTEMOMENTUM)
OZRK C 3
OZRK DDDDD 0 A_SpawnItemEx("SBallDeathFX",random(-5,5),random(-20,20),4,momx,momy,random(5,10),0,SXF_NOCHECKPOSITION|SXF_ABSOLUTEMOMENTUM)
OZRK D 3
OZRK BBBBB 0 A_SpawnItemEx("SBallDeathFX",random(-5,5),random(-20,20),4,momx,momy,random(5,10),0,SXF_NOCHECKPOSITION|SXF_ABSOLUTEMOMENTUM)
OZRK B 3
OZRK CCCCC 0 A_SpawnItemEx("SBallDeathFX",random(-5,5),random(-20,20),4,momx,momy,random(5,10),0,SXF_NOCHECKPOSITION|SXF_ABSOLUTEMOMENTUM)
OZRK C 3
OZRK DDDDD 0 A_SpawnItemEx("SBallDeathFX",random(-5,5),random(-20,20),4,momx,momy,random(5,10),0,SXF_NOCHECKPOSITION|SXF_ABSOLUTEMOMENTUM)
OZRK D 3
loop
Death:
TNT1 A 0 A_PlaySoundEx("darkile/burstboom","SoundSlot6")
TNT1 AAAAAAAAAA 0 A_SpawnItemEx("ShadowBallFXX",0,0,8,random(-10,10),random(-10,10),random(5,15),0)
TNT1 A 1
stop
}
}

actor DarkPulseTrail
{
Translation "209:248=6:6", "208:208=63:63", "4:4=63:63", "168:168=63:63", "4:4=63:63"
+NOINTERACTION
+CLIENTSIDEONLY
+NONETID
Scale 2.0
States
{
Spawn:
GAMA VW 2 A_FadeOut(0.2)
wait
}
}

actor LingeringDarkness
{
PROJECTILE
+HEXENBOUNCE
-BOUNCEONACTORS
+BOUNCEONCEILINGS
Obituary "%o was dispersed into the darkness by %k's Dark Pulse attack."
Radius 12
Height 12
Damage(3)
Damagetype "DarkType"
Translation "209:248=6:6", "208:208=63:63", "4:4=63:63", "168:168=63:63", "4:4=63:63"
WallBounceFactor 0.95
BounceFactor 0.95
Bouncecount 5
ReactionTime 15
scale 2.5
States
{
Spawn:
GAMA U 0
GAMA UV 2
GAMA U 0 A_Jump(192,"CountingDown")
GAMA W 2
goto Spawn+1
CountingDown:
GAMA W 2 A_Countdown
goto Spawn+1
Death:
TNT1 A 0
TNT1 A 0 A_PlaySoundEx("weapon/rminestick","Weapon")
TNT1 A 0 A_Explode(3,75,0)
MMFX BCDE 2
stop 
}
}

actor SwiftDarkMagicStarFX
{
Translation "220:223=6:6", "209:215=63:63"
+NOINTERACTION
+CLIENTSIDEONLY
Radius 4
Height 4
+NOGRAVITY
Scale 2.0
renderstyle "Translucent"
alpha 0.95
-SOLID
States
{
Spawn:
KIRC ABCDABCD 1 A_FadeOut(0.08)
stop
}
}

actor FeintAttackDamager
{
PROJECTILE
+DONTBLAST
+DONTSPLASH
+THRUGHOST
+DONTREFLECT
+RIPPER
-SOLID
height 16
radius 16
damage (0)
Damagetype "BNNormal"
Obituary "%o didn't avoid %k's Feint Attack in time."
States
{
Spawn:
TNT1 A 0
TNT1 A 1 A_Explode(9,175,0,0,25)
stop
}
}

actor FeintAttackBigDamager : FeintAttackDamager
{
height 24
radius 24
States
{
Spawn:
TNT1 A 0
TNT1 A 1 A_Explode(20,250,0,0,50)
stop
}
}

actor StolenEnergy : Ammo
{
inventory.amount 1
inventory.maxamount 525
+INVENTORY.IGNORESKILL
}

actor SBallDeathFX2 : SBallDeathFX
{
-NOINTERACTION
Alpha 1.0
scale 1.0
States
{
Spawn:
FSWD D 0
FSWD D 2 bright A_ScaleVelocity(0.85)
FSWD D 0 A_SetTranslucent(0.8)
FSWD E 2 bright A_ScaleVelocity(0.85)
FSWD D 0 A_SetTranslucent(0.6)
FSWD F 2 bright A_ScaleVelocity(0.85)
FSWD D 0 A_SetTranslucent(0.4)
FSWD D 2 bright A_ScaleVelocity(0.85)
FSWD D 0 A_SetTranslucent(0.2)
FSWD E 2 bright A_ScaleVelocity(0.85)
FSWD D 0 A_SetTranslucent(0.4)
FSWD F 2 bright A_ScaleVelocity(0.85)
FSWD D 0 A_SetTranslucent(0.6)
FSWD D 2 bright A_ScaleVelocity(0.85)
FSWD D 0 A_SetTranslucent(0.8)
FSWD E 2 bright A_ScaleVelocity(0.85)
FSWD D 0 A_SetTranslucent(1.0)
FSWD F 2 bright A_ScaleVelocity(0.85)
stop
}
}