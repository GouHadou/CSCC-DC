actor Sal : ClassBaseCSCC
{
Health 100
player.maxhealth 100
player.displayname "Sal"
player.soundclass "ESPEON"
player.damagescreencolor "black"
player.startitem "PsychicPower"
player.startitem "DarkPower"
//player.startitem "PsychicEnergy",90 //No alt on spawn
player.startitem "DarkEnergy",0 //No alt on spawn
player.startitem "ShadowBallAmmo", 28
//player.startitem "ShadowBeamEnergy", 224
player.startItem "CanUseItems"
player.startitem "IsSal"
player.startitem "NoHealthBar"
player.startitem "Over50Percent", 1
player.startitem "NoIcons", 1
Player.ForwardMove 0.98, 0.98 //0.9 ~ 1.0
Player.SideMove 0.9, 0.9 //0.9 ~ 1.0
player.jumpz 13 //12 ~ 14
+NODAMAGETHRUST
player.colorrange 0 0
mass 9999
gravity 0.8
scale 2.5
States
{
Spawn: 
ESAL A 0
ESAL B 1
ESAL A 1 A_JumpIfInventory("SmashFlag",1,"FSpawn")
ESAL A 0 A_JumpIfInventory("FiringBeamFlag",1,"FiringBeamAnim")
GoTo Spawn+2
FSpawn:
ESAL A 4 A_SpawnItemEx("SmashFXS",random(-64,64),random(-64,64),random(16,32),momx,momy,momz,0,SXF_NOCHECKPOSITION|SXF_ABSOLUTEMOMENTUM)
goto Spawn+2
See:
ESAL B 0 //A_GiveInventory("UltCheck")
ESAL B 5 A_JumpIfInventory("SmashFlag",1,"FSee")
ESAL C 0 //A_GiveInventory("UltCheck")
ESAL C 5 A_JumpIfInventory("SmashFlag",1,"FSee")
ESAL D 0 //A_GiveInventory("UltCheck")
ESAL D 5 A_JumpIfInventory("SmashFlag",1,"FSee")
ESAL E 0 //A_GiveInventory("UltCheck")
ESAL E 5 A_JumpIfInventory("SmashFlag",1,"FSee")
GoTo Spawn+1
FSee:
ESAL B 0 //A_GiveInventory("UltCheck")
ESAL B 5 A_SpawnItemEx("SmashFXS",random(-64,64),random(-64,64),random(16,32),momx,momy,momz,0,SXF_NOCHECKPOSITION|SXF_ABSOLUTEMOMENTUM)
ESAL C 0 //A_GiveInventory("UltCheck")
ESAL C 5 A_SpawnItemEx("SmashFXS",random(-64,64),random(-64,64),random(16,32),momx,momy,momz,0,SXF_NOCHECKPOSITION|SXF_ABSOLUTEMOMENTUM)
ESAL D 0 //A_GiveInventory("UltCheck")
ESAL D 5 A_SpawnItemEx("SmashFXS",random(-64,64),random(-64,64),random(16,32),momx,momy,momz,0,SXF_NOCHECKPOSITION|SXF_ABSOLUTEMOMENTUM)
ESAL E 0 //A_GiveInventory("UltCheck")
ESAL E 5 A_SpawnItemEx("SmashFXS",random(-64,64),random(-64,64),random(16,32),momx,momy,momz,0,SXF_NOCHECKPOSITION|SXF_ABSOLUTEMOMENTUM)
goto Spawn+1
Missile:
ESAL F 0 A_JumpIfInventory("WeaponCharge",55,"FullyCharged")
ESAL FFFFF 1 
ESAL GGGG 1
goto Spawn+2
FullyCharged:
ESAL FFFFF 1 A_SpawnItemEx("SwiftDarkMagicStarFX",random(-42,42),random(-42,42),0,momx,momy,14,0,SXF_ABSOLUTEMOMENTUM)
ESAL GGGG 1
goto Spawn+2
FiringBeamAnim:
ESAL FF 2
ESAL GGGGGGGGGGGGGGGGGGGGGGG 2
goto Spawn+2


ClassDeath:
ESAL H 0 A_SpawnItemEx("RandomSalWepDropper",0,0,16)
ESAL H 0 A_Jump(32,"DFDeath","OrbDeath")
goto NormalDeath
NormalDeath:
ESAL H 0 A_GiveInventory("IsDead",1)
ESAL H 0 SetPlayerProperty(0, 0, 4)
ESAL H 0 A_TakeInventory("WeaponCharge",999)   
ESAL H 0 A_NoBlocking
ESAL H 0 A_GiveInventory("CutterFlag",999)
ESAL H 1 A_GiveToTarget("KilledMe",1)
ESAL H 19 ACS_ExecuteAlways(999,0,0)
ESAL H 0 SetPlayerProperty(0, 0, 4)
ESAL HHHHHHHHHH 0 //A_SpawnItemEx("CoinDecider",0,0,0)
ESAL H 0 A_SpawnItemEx("FakeSalBody",0,0,4,0,0,12,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
TNT1 A 1
GoTo MegamanErase
OrbDeath:
ESAL H 0 SetPlayerProperty(0,0,4)
ESAL H 0 A_TakeInventory("WeaponCharge",999)   
ESAL H 0 A_NoBlocking
ESAL H 0 A_GiveInventory("CutterFlag",999)
ESAL H 1 A_GiveToTarget("KilledMe",1)
ESAL H 15 ACS_ExecuteAlways(999,0,0)
ESAL H 0 A_GiveInventory("IsDead",1)
ESAL H 0 A_PlaySoundEx("misc/fadedeath","Voice")
ESAL H 0 A_CustomMissile("EnergyOrb1",28,0,0,2,0)
ESAL H 0 A_CustomMissile("EnergyOrb2",28,0,120,2,0)
ESAL H 0 A_CustomMissile("EnergyOrb3",28,0,-120,2,0)
ESAL H 1 A_SetTranslucent(0.80, 0)
ESAL H 1 A_SetTranslucent(0.60, 0)
ESAL H 1 A_SetTranslucent(0.40, 0)
ESAL H 1 A_SetTranslucent(0.20, 0)
ESAL HHHHHHHHHH 1 //A_SpawnItemEx("CoinDecider",0,0,0)
goto MegamanErase
DFDeath:
ESAL H 0 A_GiveInventory("IsDead",1)
ESAL H 0 SetPlayerProperty(0,0,4)
ESAL H 0 A_TakeInventory("WeaponCharge",999)   
ESAL H 0 A_NoBlocking
ESAL H 0 A_GiveInventory("CutterFlag",999)
ESAL H 1 A_GiveToTarget("KilledMe",1)
ESAL H 0 ACS_ExecuteAlways(999,0,0)
ESAL H 0 A_PlaySoundEx("misc/quicktrap","SoundSlot7")
ESAL HHHHHHHHHHHHHHHHHHHHHHHHHHHHHH 1 A_SpawnItemEx("PsybeamChargeFXSpawner",0,0,48)
ESAL H 0 A_PlayerScream
ESAL H 1 A_SetTranslucent(0.8)
ESAL H 1 A_SetTranslucent(0.6)
ESAL H 1 A_SetTranslucent(0.4)
ESAL H 1 A_SetTranslucent(0.2)
ESAL HHHHHHHHHH 0 //A_SpawnItemEx("CoinDecider",0,0,0)
ESAL H 1 A_SpawnItemEx("DarkFlareExplosionSpawner",0,0,32,0,0,0,0,SXF_NOCHECKPOSITION)
goto MegamanErase
}
}

actor IsSal : Inventory{inventory.amount 1 inventory.maxamount 1}

actor LightModeFX
{
+NOINTERACTION
-SOLID
+NOGRAVITY
Scale 2.5
Speed 0
Radius 1
Height 1
States
{
Spawn:
FLAS ABA 3
stop
}
}

Actor FakeSalBody //You should call your mom sometime.
{
+CLIENTSIDEONLY
-SOLID
+NOINTERACTION
Radius 4
Height 4
Scale 2.5
Speed 0
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_PlaySoundEx("misc/saldeath","Voice")
ESAL A 5 A_SetAngle(angle+60.0)
ESAL A 0 A_Fadeout(0.09)
goto Spawn+2
Death:
TNT1 A 0
stop
}
}

//Should be added to Base.
/*
Pain.SalPsychic://Alternative Psychic Damagetype
ESAL HHHH 0 A_SpawnItemEx("SwiftMagicStarFX", random(-5,0), random(-20,20), random(0,70),0,0,0,0,32)
ESAL H 0 ThrustThing(random(0,127),35,1,0)
ESAL H 0 ThrustThingZ(0,50,0,0)
ESAL H 0 A_Jump(256,"Pain")
GoTo Pain+1
*/

//Should be added to Base.
/*
Pain.PsychicType2:
ESAL HHHHHHHH 0 A_SpawnItemEx("SwiftMagicStarFX",random(-2,2),random(-2,2),32,random(-10,10),random(-10,10),random(-5,12))
ESAL H 0 ThrustThing(random(0,255),10,0,0)
ESAL H 0 ThrustThingZ(0,40,0,0)
ESAL H 0 A_SetAngle(angle-random(60,240))
goto Pain+1
*/

Actor SmashFXS
{
Translation "4:4=253:253", "168:168=253:253", "208:208=253:253"
-SOLID
+NOINTERACTION
+CLIENTSIDEONLY
Radius 4
Height 4
Scale 2.0
Alpha 0.75
Renderstyle "Translucent"
States
{
Spawn:
TBOL I 0
TBOL IKI 2 Bright
stop
}
}

actor EnergyOrb1
{
PROJECTILE
+DONTBLAST
+RIPPER
+HEXENBOUNCE
+BOUNCEONCEILINGS
+DONTSPLASH
Translation "214:215=208:208"
Renderstyle "Translucent"
Bouncecount 8
Bouncefactor 1.0
WallBounceFactor 1.0
Obituary "%o was cleansed by %k's Light Orb."
Damage(60)
Alpha 0.8
Height 12
Radius 12
scale 2.5
Reactiontime 10
Speed 40
States
{
Spawn:
MMFX D 0
MMFX D 3 A_SpawnItemEx("EnergyOrbMini",0,0,0,35,0,0,0)
MMFX D 3 A_SpawnItemEx("EnergyOrbMini",0,0,0,35,0,0,120)
MMFX D 3 A_SpawnItemEx("EnergyOrbMini",0,0,0,35,0,0,240)
MMFX D 0 A_CountDown
goto Spawn+1
Death:
TNT1 A 0
stop
}
}

Actor EnergyOrbMini : EnergyOrb1
{
-RIPPER
Translation "214:215=208:208"
Renderstyle "Add"
Bouncecount 6
Obituary "%o was cleansed by %k's Mini Light Orb."
Damage(30)
Height 8
Radius 8
scale 1.5
Speed 35
States
{
Spawn:
MMFX D 1
loop
Death:
TNT1 A 0
stop
}
}

Actor EnergyOrb2 : EnergyOrb1
{
-RIPPER
-HEXENBOUNCE
-BOUNCEONCEILINGS
+SEEKERMISSILE
+LOOKALLAROUND
Translation "208:213=63:63", "214:215=63:63"
Obituary "%o met %k's Purple Orb."
Damage(60)
Height 12
Radius 12
scale 2.0
Reactiontime 50
Speed 25
States
{
Spawn:
MMFX D 0
MMFX D 1 A_SeekerMissile(15,15,SMF_LOOK|SMF_PRECISE,192,12)
MMFX D 0 A_SpawnItemEx("PureEnergyOrb2")
MMFX D 0 A_CountDown
goto Spawn+1
Death:
TNT1 A 0
stop
Crash:
XDeath:
TNT1 A 0 A_SpawnItemEx("EnergyOrbMini2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
TNT1 A 0 A_SpawnItemEx("EnergyOrbMini2",0,0,0,0,0,0,45,SXF_NOCHECKPOSITION)
TNT1 A 0 A_SpawnItemEx("EnergyOrbMini2",0,0,0,0,0,0,90,SXF_NOCHECKPOSITION)
TNT1 A 0 A_SpawnItemEx("EnergyOrbMini2",0,0,0,0,0,0,135,SXF_NOCHECKPOSITION)
TNT1 A 0 A_SpawnItemEx("EnergyOrbMini2",0,0,0,0,0,0,180,SXF_NOCHECKPOSITION)
TNT1 A 0 A_SpawnItemEx("EnergyOrbMini2",0,0,0,0,0,0,225,SXF_NOCHECKPOSITION)
TNT1 A 0 A_SpawnItemEx("EnergyOrbMini2",0,0,0,0,0,0,270,SXF_NOCHECKPOSITION)
TNT1 A 1 A_SpawnItemEx("EnergyOrbMini2",0,0,0,0,0,0,315,SXF_NOCHECKPOSITION)
stop
}
}

Actor EnergyOrbMini2 : EnergyOrb1
{
-HEXENBOUNCE
-BOUNCEONCEILINGS
Renderstyle "Translucent"
Translation "208:213=63:63", "214:215=63:63"
Obituary "%o was wisped away by %k's Mini Purple Orb."
Damage(15)
Height 9
Radius 9
Reactiontime 13
scale 1.75
States
{
Spawn:
MMFX D 0
MMFX D 2 bright A_ChangeVelocity(40,0,0,CVF_RELATIVE|CVF_REPLACE)
MMFX D 0 A_SetAngle(angle+40.0)
MMFX D 0 A_SpawnItemEx("PureEnergyOrb2")
MMFX D 0 A_Countdown
goto Spawn+1
}
}

Actor EnergyOrb3 : EnergyOrb1
{
-RIPPER
-HEXENBOUNCE
-BOUNCEONCEILINGS
Translation "208:213=180:180", "214:215=180:180"
Obituary "%o was destroyed by %k's Red Orb."
Damage(100)
Height 16
Radius 16
scale 2.0
Speed 40
States
{
Spawn:
MMFX D 0
MMFX D 1 A_SpawnItemEx("PureEnergyOrb3")
goto Spawn+1
Death:
TNT1 A 0 A_Stop
TNT1 A 0 A_Explode(75,125,0)
NAPA EFGHIJKLMNOPQRS 1
stop
}
}

Actor DarkFlareExplosionSpawner
{
PROJECTILE
+NOINTERACTION
+NOCLIP
-SOLID
+RIPPER
Radius 1
Height 1
Scale 1.0
Damage(0)
Speed 0
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_JumpIfInventory("CutterFlag",10,"Death")
TNT1 A 3 A_SpawnItemEx("DarkFlareExplosion",random(-400,400),random(-400,400),random(-75,75))
TNT1 A 0 A_GiveInventory("CutterFlag",1)
goto Spawn+1
Death:
TNT1 A 0
stop
}
}

Actor DarkFlareExplosion : BasicExplosion//TestExplosion
{
Obituary "%o disappeared forever after the catastrophe that is %k's Dark Flare."
Translation "208:213=187:187", "214:215=3:3"
Damage(0)
Scale 3.0
States
{
Spawn:
ASEX A 0
ASEX A 0 A_PlaySoundEx("misc/mm3explosion","Weapon")
ASEX A 0 A_Explode(75,200,0,0,40)
ASEX AAA 0 A_SpawnItemEx("DarkFlareExplosionPart",0,0,5,random(-15,15),random(-15,15),10,random(0,359),SXF_NOCHECKPOSITION)
ASEX ABCDEF 2
stop
}
}

Actor DarkFlareExplosionPart
{
PROJECTILE
-NOGRAVITY
+DONTBLAST
Obituary "%o disappeared forever after the catastrophe that is %k's Dark Flare."
Translation "220:227=184:184", "228:229=189:189"
Damage(40)
Radius 8
Height 8
Scale 1.5
States
{
Spawn:
FIRE A 0
FIRE ABC 2
loop
Death:
TNT1 A 0 A_Stop
TNT1 A 0 A_SetGravity(0.0)
TNT1 A 0 A_Explode(30,75,0)
NAPA EFGHIJKLMNOPQRS 1
stop
}
}

Actor RandomSalWepDropper : RandomItem
{
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_Jump(96,"Death")
TNT1 A 1 A_Jump(256,"Psychic","Dark")
goto Psychic
Psychic:
TNT1 A 1 //A_SpawnItemEx("PsyBusterGiver")
stop
Dark:
TNT1 A 1 //A_SpawnItemEx("DarknessBusterGiver")
stop
Death:
TNT1 A 1
stop
}
}

actor SBallDeathFX
{
Translation "248:248=254:254", "41:41=0:0"
+FORCEXYBILLBOARD
+CLIENTSIDEONLY
+DONTBLAST
+NOGRAVITY
+NOINTERACTION
Renderstyle "Translucent"
Alpha 0.65
height 1
radius 1
scale 1.5
States
{
Spawn:
FSWD DEFDEFDEF 2 bright A_ScaleVelocity(0.8)
stop
}
}

Actor SBallDeathFXSpawner
{
PROJECTILE
+FORCEXYBILLBOARD
+DONTBLAST
+NOGRAVITY
+RIPPER
Obituary "%o had a long, moist night that they'll never forget."
Height 1
Radius 1
Damage(0)
Speed 0
Scale 1.5
States
{
Spawn:
TNT1 A 0
TNT1 A 0 A_Explode(150,256,0)
TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("SBallDeathFX",0,0,0,random(-10,10),random(-10,10),random(-10,10))
TNT1 A 1
Stop
}
}

actor FeintAttackFlag : Inventory{inventory.amount 1 inventory.maxamount 1}
actor PsybeamFlag : Inventory{inventory.amount 1 inventory.maxamount 1}
actor Over50Percent : Once{}
actor Over25Percent : Once{}
actor Under25Percent : Once{}

Actor SalHPChecker : CustomInventory
{
States
{
Pickup:
TNT1 A 0 A_JumpIf(Health>500,"Over50Percent")
TNT1 A 0 A_JumpIf(Health>250,"Over25Percent")
TNT1 A 0 A_JumpIf(Health<251,"Under25Percent")
goto Over50Percent
Under25Percent:
TNT1 A 0 A_GiveInventory("Under25Percent",1)
TNT1 A 0 A_TakeInventory("Over25Percent",99)
TNT1 A 0 A_TakeInventory("Over50Percent",99)
stop
Over25Percent:
TNT1 A 0 A_GiveInventory("Over25Percent",1)
TNT1 A 0 A_TakeInventory("Under25Percent",99)
TNT1 A 0 A_TakeInventory("Over50Percent",99)
stop
Over50Percent:
TNT1 A 0 A_GiveInventory("Over50Percent",1)
TNT1 A 0 A_TakeInventory("Under25Percent",99)
TNT1 A 0 A_TakeInventory("Over25Percent",99)
stop
}
}