actor DiamondIceWep : BaseCSCCWep 
{
//$Category MM8BDM-Weapons
Weapon.AmmoUse 1
Weapon.AmmoGive 28
Weapon.SlotNumber 1
Obituary "%o was pinned down by %k's Diamond Icecicles."
Inventory.Pickupmessage "...Huh.... Getting a bit chilly in here..."
weapon.ammotype "DiamondIceManAmmo"
inventory.pickupsound "weapon/weaponup"
DropItem "FlashFreezeWep" 255 1
+WEAPON.AMMO_OPTIONAL
Scale 2.0
States
{
Spawn:
WEAP P 0
stop
Ready:
CICH A 0 ACS_ExecuteAlways(998,0,1)
CICH A 4 A_WeaponReady
CICH A 0 A_GiveInventory("DiamondIceManAmmo",1)
Goto Ready+1
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
CICH A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
CICH A 1 A_Raise
Loop
Fire:
CICH A 0 A_JumpIfInventory("DocToadHealthBar",1,"SnipeFire")
CICH A 0 A_JumpIfNoAmmo("NoAmmo")
CICH A 0 A_PlaySoundEx("weapon/IceSlasher","Weapon")
CICH A 0 A_FireCustomMissile("DiamondIcecicle",random2(5),1,9,0)
CICH BCD 1//1
CICH D 0 A_Refire
Goto Ready+1
SnipeFire:
CICH D 0 A_JumpIfNoAmmo("SnipeMode2")
CICH D 0 A_TakeInventory("FlashFreezeCharge",5)
CICH D 0 A_PlaySoundEx("weapon/IceSlasher","Weapon")
CICH D 0 A_JumpIfInventory("FlashFreezeCharge",25,"SnipeFire6")
CICH D 0 A_JumpIfInventory("FlashFreezeCharge",20,"SnipeFire5")
CICH D 0 A_JumpIfInventory("FlashFreezeCharge",15,"SnipeFire4")
CICH D 0 A_JumpIfInventory("FlashFreezeCharge",10,"SnipeFire3")
CICH D 0 A_JumpIfInventory("FlashFreezeCharge",5,"SnipeFire2")
CICH D 0 A_FireCustomMissile("DiamondIcecicleSnipeEdition",0,1,9,0)
goto SnipeEnd
SnipeFire2:
CICH D 0 A_FireCustomMissile("DiamondIcecicleSnipeEdition2",0,1,9,0)
goto SnipeEnd
SnipeFire3:
CICH D 0 A_FireCustomMissile("DiamondIcecicleSnipeEdition3",0,1,9,0)
goto SnipeEnd
SnipeFire4:
CICH D 0 A_FireCustomMissile("DiamondIcecicleSnipeEdition4",0,1,9,0)
goto SnipeEnd
SnipeFire5:
CICH D 0 A_FireCustomMissile("DiamondIcecicleSnipeEdition5",0,1,9,0)
goto SnipeEnd
SnipeFire6:
CICH D 0 A_FireCustomMissile("DiamondIcecicleSnipeEdition6",0,1,9,0)
goto SnipeEnd
SnipeEnd:
CICH GGGHHHIII 1 A_ChangeVelocity(0,0,0,CVF_REPLACE)
Goto SnipeMode2
Altfire:
CICH D 0
CICH D 0 A_JumpIfInventory("DocToadHealthBar",1,"NormalMode")
CICH D 0 A_CheckFloor("SnipeMode")
goto NoAmmo
SnipeMode:
CICH AEF 2 A_ChangeVelocity(0,0,0,CVF_REPLACE)
CICH D 0 A_GiveInventory("DocToadHealthBar",1)
CICH D 0 A_Gunflash
SnipeMode2:
CICH D 0 A_JumpIfInventory("FlashFreezeCharge",5,"SnipeMode3")
CICH D 0 A_GiveInventory("FreezeProtect")
CICH D 0 A_WeaponReady
CICH FFFF 1 A_ChangeVelocity(0,0,0,CVF_REPLACE)
CICH D 0 A_GiveInventory("DiamondIceManAmmo",1)
goto SnipeMode2 
SnipeMode3:
CICH D 0 A_JumpIfInventory("FlashFreezeCharge",14,"SnipeMode4")
CICH D 0 A_GiveInventory("FreezeProtect")
CICH D 0 A_WeaponReady
CICH JJJJ 1 A_ChangeVelocity(0,0,0,CVF_REPLACE)
CICH D 0 A_GiveInventory("DiamondIceManAmmo",1)
goto SnipeMode2 
SnipeMode4:
CICH D 0 A_JumpIfInventory("FlashFreezeCharge",28,"SnipeMode5")
CICH D 0 A_GiveInventory("FreezeProtect")
CICH D 0 A_WeaponReady
CICH KKKK 1 A_ChangeVelocity(0,0,0,CVF_REPLACE)
CICH D 0 A_GiveInventory("DiamondIceManAmmo",1)
goto SnipeMode2 
SnipeMode5:
CICH D 0 A_GiveInventory("FreezeProtect")
CICH D 0 A_WeaponReady
CICH LLLL 1 A_ChangeVelocity(0,0,0,CVF_REPLACE)
CICH D 0 A_GiveInventory("DiamondIceManAmmo",1)
goto SnipeMode2 
NormalMode:
CICH D 0 A_JumpIfInventory("FlashFreezeCharge",28,"Freezie")
CICH D 0 A_SpawnItemEX("FlashFreezeNoDamage")
CICH E 5 A_TakeInventory("DocToadHealthBar",1)
CICH A 5 A_TakeInventory("FlashFreezeCharge",999)
goto Ready+1
Freezie:
CICH D 0 ACS_ExecuteAlways(976,0)
CICH D 0 A_SpawnItemEX("FlashFreeze")
CICH E 5 A_TakeInventory("DocToadHealthBar",1)
CICH A 5 A_TakeInventory("FlashFreezeCharge",999)
goto Ready+1
Flash:
CICH D 0 A_JumpIfInventory("DocToadHealthBar",1,1)
stop
TNT1 A 0 A_JumpIfInventory("FlashFreezeCharge",28,5)
TNT1 A 1 A_SpawnItemEx("DiamondFreezeLock", 0, 0, 0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
TNT1 A 0 A_GiveInventory("FlashFreezeCharge",1)
TNT1 A 1 A_SpawnItemEx("DiamondFreezeLock", 0, 0, 0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
TNT1 A 1 A_SpawnItemEx("DiamondFreezeLock", 0, 0, 0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
goto Flash
TNT1 A 1 A_SpawnItemEx("DiamondFreezeLock", 0, 0, 0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
TNT1 A 0 A_GiveInventory("FlashFreezeGiver")
TNT1 A 1 A_SpawnItemEx("DiamondFreezeLock", 0, 0, 0, momx, momy, momz, 0, SXF_ABSOLUTEMOMENTUM, 0)
goto Flash
NoAmmo:
CICH A 1 ACS_Execute(979,0)
Goto Ready+1
}
}

actor PowerFreezeProtect : PowerProtection
{
  DamageFactor "Normal", 0.75
}

ACTOR FreezeProtect : PowerupGiver
{
  Inventory.MaxAmount 0
  Inventory.UseSound "pickups/slowmo"
  Powerup.Type "PowerFreezeProtect"
  Powerup.Duration -1
  +INVENTORY.AUTOACTIVATE
  +INVENTORY.FANCYPICKUPSOUND
  States
  {
  Spawn:
    MEGA ABCD 4 Bright
    Loop
  }
}

actor DiamondIceManAmmo : Ammo
{
+INVENTORY.IGNORESKILL
inventory.amount 1
inventory.maxamount 28
}

actor FlashFreezeCounter : Inventory
{
inventory.amount 1
inventory.maxamount 28
}


actor FlashFreezeCharge : Inventory
{
inventory.amount 1
inventory.maxamount 28
}

actor FlashFreeze
{
Obituary "%o came to a chilling conclusion by %k's Flash Freeze."
Projectile
damagetype "FlashFreeze"
States
{
Spawn:
TNT1 A 0 
CENF A 0 A_PlaySoundEx("weapon/centaurflash","Weapon")
TNT1 A 0 A_Explode(5,600,0)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,36)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,72)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,108)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,144)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,180)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,216)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,252)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,288)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,324)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,360)
stop
}
}

actor FlashFreezeNoDamage : FlashFreeze
{
States
{
Spawn:
TNT1 A 0 
CENF A 0 A_PlaySoundEx("weapon/centaurflash","Weapon")
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,36)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,72)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,108)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,144)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,180)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,216)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,252)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,288)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,324)
TNT1 A 0 A_SpawnItemEX("DiamondDustFreeze",0,0,0,20,0,0,360)
stop
}
}

actor DiamondIcecicle
{
PROJECTILE
Radius 5
Height 5
scale 2.5
damagetype "DiamondIcecicle"
damage (9)//9
speed 40
States
{
Spawn:
CICL G 0
CICL G 0 A_JumpIfInventory("CutterFlag",15,"Fall")
CICL G 3 A_SpawnItemEx("DiamondDust")
CICL G 0 A_ScaleVelocity(0.75)
CICL G 0 A_GiveInventory("CutterFlag",1)
loop
Fall:
CICL K 3
CICL L 1 A_ChangeFlag("NoGravity",0)
goto Fall+1
}
}

actor DiamondIcecicleSnipeEdition : FastProjectile
{
PROJECTILE
Radius 5
Height 5
scale 2.5
damagetype "DiamondIcecicle"
damage (5)//20
speed 80
States
{
Spawn:
CICL G 2 A_SpawnItemEx("DiamondDust")
loop
}
}

actor DiamondIcecicleSnipeEdition2 : DiamondIcecicleSnipeEdition
{
damage (10)//25
}

actor DiamondIcecicleSnipeEdition3 : DiamondIcecicleSnipeEdition
{
damage (15)//30
}

actor DiamondIcecicleSnipeEdition4 : DiamondIcecicleSnipeEdition
{
damage (20)//35
}

actor DiamondIcecicleSnipeEdition5 : DiamondIcecicleSnipeEdition
{
damage (25)//40
}

actor DiamondIcecicleSnipeEdition6 : DiamondIcecicleSnipeEdition
{
damage (30)//45
}



actor DiamondDust : GeminiTrail
{
States
{
Spawn:
CICL H 0
CICL H 0 A_Jump(128,"Spawn2","Spawn3")
CICL HIJHIJ 2
stop
Spawn2:
CICL H 0
CICL H 0 A_Jump(128,"Spawn2","Spawn3")
CICL IJHIJH 2
stop
Spawn3:
CICL H 0
CICL H 0 A_Jump(128,"Spawn2","Spawn3")
CICL JHIJHI 2
stop
}
}

actor DiamondDustFreeze : DiamondDust
{
States
{
Spawn:
CICL H 0
CICL H 0 A_ChangeVelocity(30,0,0,CVF_RELATIVE|CVF_REPLACE)
CICL H 0 A_Jump(128,"Spawn2","Spawn3")
CICL HIJHIJ 2
stop
Spawn2:
CICL H 0
CICL H 0 A_Jump(128,"Spawn2","Spawn3")
CICL IJHIJH 2
stop
Spawn3:
CICL H 0
CICL H 0 A_Jump(128,"Spawn2","Spawn3")
CICL JHIJHI 2
stop
}
}


actor DiamondFreezeLock : GeminiTrail
{
-FORCEXYBILLBOARD
States
{
Spawn:
CICL E 2
stop
}
}