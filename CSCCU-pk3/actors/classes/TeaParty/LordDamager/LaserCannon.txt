actor LaserCannonWep : MissilePunchWep
{
Weapon.AmmoUse 1
Weapon.SlotNumber 2
Obituary "\ct%k left a darkened hole in %o's heart."
Inventory.Pickupmessage "Power up! Dark Laser Cannon!"
weapon.ammotype "LaserCannonAmmo"
inventory.icon "LWEPB0"
Tag "DarkLaser Cannon"
damagetype "DarkLaser"
dropitem "SteelPunchWepCDropped"
States
{
Spawn:
LWEP B 1
Loop
Ready:
MSPN A 0 ACS_ExecuteAlways(998,0,DYE_LORDDAMAGERCOL)
MSPN A 10 A_WeaponReady
MSPN A 0 A_GiveInventory("LaserCannonAmmo",6)
MSPN A 0 A_GiveInventory("LDRamEnergy",1)
MSPN A 0 A_JumpIfInventory("LDRamming",1,"PreRamming")
goto Ready+1

Fire:
MSPN A 0 SetPlayerProperty(0,0,0)
MSPN A 0 A_TakeInventory("LDRamEarlyEnd",1)
MSPN A 0 A_JumpIfNoAmmo("NoAmmo")
MSPN DE 2 A_GiveInventory("BeamAmmoBuffer")
//MSPN DE 2
Fire2:
TNT1 A 0 SetPlayerProperty(0,1,0)
MSPN A 0 A_JumpIfNoAmmo("NoAmmo")
MSPN A 0 A_PlaySoundEx("weapon/pcharge","Weapon")
MSPN E 22
Fire2Loop:
MSPN A 0 A_JumpIfNoAmmo("NoAmmo")
MSPN A 0 A_PlaySoundEx("weapon/gemini","Weapon")
MSPN A 0 //A_GiveInventory("BeamAmmoBuffer")
MSPN E 1 A_RailAttack( (2), -3, 5, "purple", "purple", RGF_NOPIERCING|RGF_SILENT, 0, "DarkLaser", 0, 0, 600, 10, 5, 0, "DarkLaser", 1)
//MSPN E 1 A_RailAttack( (5), -3, 5, "purple", "purple", RGF_NOPIERCING|RGF_SILENT, 0, "DarkLaser", 0, 0, 600, 10, 5, 0, "DarkLaser", 1)
//MSPN E 2 A_RailAttack( (4), -3, 5, "purple", "purple", RGF_NOPIERCING|RGF_SILENT, 0, "DarkLaser", 0, 0, 600, 10, 5, 0, "DarkLaser", 1)
MSPN A 0 A_Refire("Fire2Loop")
MSPN D 2 SetPlayerProperty(0,0,0)
goto Ready+1

AltFire:
MSPN A 0 SetPlayerProperty(0,0,0)
MSPN A 0 A_TakeInventory("LDRamEarlyEnd",1)
MSPN A 2
MSPN A 0 A_PlaySoundEx("Weapon/napalm","Weapon")
MSPN A 0 A_FireCustomMissile("MissilePunch",0,0,-2,-8)
MSPN A 0 A_GiveInventory("MissilePunchFXColors")
MSPN BCCCCCBAAAAA 2 A_WeaponReady(WRF_NOSWITCH|WRF_NOPRIMARY|WRF_NOSECONDARY)
goto Ready+1

NoAmmo:
MSPN A 1 SetPlayerProperty(0, 0, 0)
MSPN A 1 ACS_Execute(979,0)
goto Ready+1
}
}

Actor DarkLaserBuffer : PowerProtection
{
powerup.duration 3
DamageFactor "DarkLaser", 0.0
}

actor DarkLaser
{
PROJECTILE
+RIPPER
Radius 1
Height 1
damage (0)
damagetype "DarkLaser"
scale 1.0
States
{
Spawn:
LDLS A 3
Death:
TNT1 A 1
stop
}
}

actor LaserCannonAmmo : Ammo
{
+INVENTORY.IGNORESKILL
inventory.amount 1
inventory.maxamount 150
}

//Thank fuck Kiseki exists.