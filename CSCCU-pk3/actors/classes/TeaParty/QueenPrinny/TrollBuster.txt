actor TrollBuster : Base8BDMWeapon
{
Weapon.AmmoUse 1
Weapon.AmmoGive 3
Weapon.SlotNumber 1
scale 2.0
Obituary "%o was Trolled to death by %k's Troll Buster!"
Inventory.Pickupmessage "You got the Troll Buster!"
weapon.ammotype "BusterAmmo"
inventory.pickupsound "weapon/weaponup"
+WEAPON.AMMO_OPTIONAL
+WEAPON.DONTBOB
+INVENTORY.UNDROPPABLE
DropItem "WaterBalloonWep"
States
{
Spawn:
PQKB A 1
stop
Ready:
PQKB A 0 ACS_ExecuteAlways(998,0,425)
PQKB A 0 A_JumpIfInventory("Once",1,"Ready2")
PQKB A 0 A_GiveInventory("Once",1)
Goto Ready2+1
Ready2:
PQKB A 0 ACS_ExecuteAlways(998,0,209)
PQKB A 1 A_WeaponReady(WRF_NOSWITCH)
Goto Ready2+1
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
PQKB A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
PQKB A 1 A_Raise
Loop
Fire:
Hold:
PQKB B 0 //SetPlayerProperty(0,1,0)
PQKB B 0 A_PlaySoundEx("weapon/mbuster","Weapon")
PQKB B 3 A_FireCustomMissile("KnockbackShot",0,0,8,0)
PQKB B 0 A_PlaySoundEx("weapon/mbuster","Weapon")
PQKB C 3 A_FireCustomMissile("KnockbackShot",random(-5,5),0,8,0,0,random(-3,3))
PQKB B 0 A_Refire
goto Ready2+1
AltFire:
PQKB B 0 A_PlaySoundEx("weapon/pshot","Weapon")
PQKB B 0 A_FireCustomMissile("KnockbackShot2",0,0,8,0)
PQKB BBCB 6
PQKB B 0 A_Refire("Altfire")
goto Ready2+1
}
}


actor KnockbackShot
{
Obituary "%o was Trolled to death by %k's Troll Buster!"
PROJECTILE
+SKYEXPLODE
+DONTBLAST
+FORCEXYBILLBOARD
Damagetype "TrollBuster"
//seesound "weapon/mbuster"
Speed 60
Damage(3)
radius 6
height 8
scale 2.5
States
{
Spawn:
PQKS A 2
Loop
Death:
TNT1 A 0
stop
}
}

actor KnockbackShot2 : KnockbackShot
{
damagetype "TrollBuster2"
Speed 50
Damage(5)
radius 12
height 16
scale 3.0
States
{
Spawn:
PQBS AB 2
loop
Death:
MMFX B 0 A_Explode(10,64,0)
MMFX BCD 2
stop
}
}