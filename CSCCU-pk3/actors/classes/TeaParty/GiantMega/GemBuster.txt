actor GemBuster : BaseMM8BDMWep
{
Weapon.AmmoUse 1
Weapon.AmmoGive 3
Weapon.SlotNumber 1
scale 2.0
Obituary "%o was Shredded into pieces by %k's Gem Buster!"
Inventory.Pickupmessage "You got the Gem Buster!"
weapon.ammotype "BusterAmmo"
inventory.pickupsound "weapon/weaponup"
+WEAPON.AMMO_OPTIONAL
+WEAPON.DONTBOB
+INVENTORY.UNDROPPABLE
+WEAPON.CHEATNOTWEAPON
DropItem "QuickBoomerangWep"
States
{
Spawn:
GMBS A 1
stop
Ready:
GMBS A 0 ACS_ExecuteAlways(998,0,426)
GMBS A 0 A_JumpIfInventory("Once",1,"Ready2")
GMBS A 0 A_GiveInventory("Once",1)
Goto Ready2+1
Ready2:
GMBS A 0 ACS_ExecuteAlways(998,0,211)
GMBS A 1 A_WeaponReady//(WRF_NOSWITCH)
Goto Ready2+1
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
GMBS A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
GMBS A 1 A_Raise
Loop
Fire:
GMBS B 0 //SetPlayerProperty(0,1,0)
GMBS B 0 A_PlaySoundEx("weapon/freezecracker","Weapon")
GMBS B 0 A_FireCustomMissile("GemShot",random(-3,3),0,8,0)
GMBS BC 1
GMBS B 1
GMBS B 0 A_Refire
GMBS B 0 //SetPlayerProperty(0,0,0)
goto Ready2+1
AltFire: 
GMBS B 0 A_PlaySoundEx("weapon/freezecracker","Weapon") 
GMBS B 0 A_FireCustomMissile("GemSpikeShot",random(0,59),1,8,0,0,random(0,12))
GMBS B 0 A_FireCustomMissile("GemSpikeShot",random(60,119),0,8,0,0,random(0,12))
GMBS B 0 A_FireCustomMissile("GemSpikeShot",random(120,179),0,8,0,0,random(0,12))
GMBS B 0 A_FireCustomMissile("GemSpikeShot",random(180,239),0,8,0,0,random(0,12))
GMBS B 0 A_FireCustomMissile("GemSpikeShot",random(240,299),0,8,0,0,random(0,12))
GMBS B 0 A_FireCustomMissile("GemSpikeShot",random(300,359),0,8,0,0,random(0,12))
GMBS BC 4 
GMBS B 35 
GMBS B 0 A_Refire 
Goto Ready2+1
}
}

actor GemShot
{
Obituary "%o was Shredded into pieces by %k's Gem Buster!"
PROJECTILE
damagetype "GemBuster"
scale 2.5
Speed 64
Radius 5
Height 5
Damage (6)//4
+DONTBLAST
//+RIPPER
States
{
Spawn:
GMSH AB 1
GMSH AB 1
GMSH AB 1 A_Recoil(10)
GMSH AB 1 A_Recoil(10)
GMSH AB 1 A_Recoil(10)
GMSH AB 0 A_Stop
Goto Death
Death:
TNT1 A 1
stop
}
}

actor GemSpikeShot
{
Obituary "%o was Shredded into pieces by %k's Gem Buster!"
PROJECTILE 
Radius 16 
Height 10 
scale 2.5 
damage (2)
-NOGRAVITY
+NOCLIP  
damagetype "GemBuster"
speed 20 
gravity 1
States
{
Spawn: 
GMSH A 0 ThrustThingZ(0,70,0,0)
GMSH A 0
GMSH A 1 A_Jumpifinventory("GemSpikeCounter",1,5)
GMSH AB 1 
GMSH AB 0 A_GiveInventory("GemSpikeCounter",1)
GMSH AB 1 A_ChangeFlag("NOCLIP", 0)
goto Spawn+2
Death:
GMSH AB 1 A_SpawnItemEx("GemSpikeSpawner",-10,0,0,-10,0,10)
GMSH AB 0 A_TakeInventory("GemSpikeCounter",999)
stop 
}
}

actor GemSpikeSpawner
{
Obituary "%o was Shredded into pieces by %k's Gem Buster!"
PROJECTILE 
-Missile
-NOGRAVITY
+NOCLIP
Radius 16
Height 10
scale 2.5
Gravity 1 
damage (0) 
+Ripper  
States
{
Spawn:
GMSH AB 1 A_JumpIf(z-floorz==0,"GemSpikeSpawn") 
GMSH AB 1 A_ChangeFlag("NoClip",0)
loop
GemSpikeSpawn:
GMSH AB 0 A_ChangeFlag("Missile",1)
GMSH AB 1 A_SpawnItemEx("GemSpike",0,0,0,0,0,0)
stop 
}
}

actor GemSpike
{
Obituary "%o was Shredded into pieces by %k's Gem Buster!"
PROJECTILE
-NoGravity
Radius 16 
Height 20 
scale 2.5 
damage (5) 
+NoExplodeFloor
+DontBlast
damagetype "GemSpike"
reactiontime 40
States
{
Spawn:
GMSH C 0 A_JumpIfInventory("GemSpikeCounter",1,4)
GMSH C 0 A_PlaySoundEx("weapon/freezecracker","Weapon")
GMSH CD 3 
GMSH C 1 A_GiveInventory("GemSpikeCounter",1)
GMSH C 1 A_CountDown
GMSH C 1 A_JumpIf(z-floorz==0,"StopWhenGrounded")
loop
Stopwhengrounded:
GMSH CD 0 A_Stop
goto Spawn 
Death:
GMSH D 5
stop
}
}

actor GemSpikeCounter : Inventory
{
Inventory.amount 1
Inventory.Maxamount 999
}





actor GemSniper : BaseMM8BDMWep
{
Weapon.AmmoUse 2
Weapon.AmmoGive 0
Weapon.AmmoUse2 24
Weapon.AmmoGive2 0
Weapon.SlotNumber 2
scale 2.0
Obituary "%o was Shredded into pieces by %k's Gem Buster!"
Inventory.Pickupmessage "You got the Gem Buster!"
weapon.ammotype "GemSniperAmmo"
weapon.ammotype2 "GemSniperAmmo"
inventory.pickupsound "weapon/weaponup"
+WEAPON.AMMO_OPTIONAL
+WEAPON.DONTBOB
+INVENTORY.UNDROPPABLE
+WEAPON.CHEATNOTWEAPON
DropItem "QuickBoomerangWep"
States
{
Spawn:
GMBS A 1
stop
Ready:
GMBS A 0 ACS_ExecuteAlways(998,0,426)
GMBS A 0 A_JumpIfInventory("Once",1,"Ready2")
GMBS A 0 A_GiveInventory("Once",1)
Goto Ready2+1
Ready2:
GMBS A 0 ACS_ExecuteAlways(998,0,426)
GMBS A 32 A_WeaponReady
GMBS A 0 A_GiveInventory("GemSniperAmmo",1)
GMBS A 4 A_WeaponReady
GMBS A 0 A_GiveInventory("GemSniperAmmo",1)
Goto Ready2+3
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
GMBS A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
GMBS A 1 A_Raise
Loop
Fire:
GMBS B 0 A_JumpIfNoAmmo("NoAmmo")
GMBS B 0 A_PlaySoundEx("weapon/freezecracker","Weapon")
GMBS B 2 A_FireCustomMissile("GemSniperShot",random(-1,1),1,8,0)
GMBS BC 3
GMBS B 8
GMBS B 0 A_Refire
GMBS B 0 //SetPlayerProperty(0,0,0)
goto Ready2+1
AltFire: 
GMBS B 0 A_JumpIfNoAmmo("NoAmmo")
GMBS B 0 A_PlaySoundEx("weapon/freezecracker","Weapon") 
GMBS B 0 A_FireCustomMissile("GemSniperSpread",0,1,8,0,0,3)
GMBS B 0 A_FireCustomMissile("GemSniperSpread",12,0,8,0,0,3)
GMBS B 0 A_FireCustomMissile("GemSniperSpread",-12,0,8,0,0,3)
GMBS B 0 A_FireCustomMissile("GemSniperSpread",20,0,8,0,0,3)
GMBS B 0 A_FireCustomMissile("GemSniperSpread",-20,0,8,0,0,3)
GMBS BC 4 
GMBS B 35 
GMBS B 0 A_Refire 
Goto Ready2+1
NoAmmo:
GMBS B 0 ACS_Execute(979,0)
GMBS B 4 
GMBS B 0 A_Refire
Goto Ready2+1
}
}



actor GemSniperShot
{
PROJECTILE
+RIPPER
-NOGRAVITY
Radius 5
Height 5
Speed 64
Damage (2)
damagetype "Buster"
Gravity 1.5
scale 2.5
States
{
Spawn:
GMSH AB 1
loop
Death:
FCRA B 0 A_JumpIf(z-ceilingz>-10,"DeathUp")
FCRA B 0 A_JumpIf(z-floorz<=0,"Death2")
FCRA B 0 A_Explode(16,48,0)
stop
Death2:
FCRA B 0
FCRA B 0 A_Explode(16,48,0)
FCRA B 0 A_SpawnItemEx("GemSpikeFloor",0,0,0,0,0,0,0)
stop
DeathUp:
FCRA B 0
FCRA B 0 A_Explode(16,48,0)
FCRA B 0 A_SpawnItemEx("GemSpikeCeiling",0,0,-1,0,0,0,0)
stop
XDeath:
FCRA B 0 A_Explode(16,48,0)
stop
}
}

actor GemSpikeFloor
{
+SOLID
+NODAMAGETHRUST
+FORCEYBILLBOARD
+THRUGHOST
+DONTBLAST
+DONTREFLECT
+NOGRAVITY
+RIPPER
mass 99999
Radius 16
Height 80
Damage 1
Damagetype "GemSpike"
Scale 2.5
States
{
Spawn:
GEMI B 0
GEMI B 0 A_PlaySoundEx("weapon/icewavespawn","weapon")
GEMI BCDEEEEEEEEEEEEEEEEEEEEEEEEE 3
GEMI F 0 A_ChangeFlag("SOLID", 0)
GEMI F 0 A_SpawnItemEx("GemIceBreak",0,0,12,0,0,0,0)
stop
}
}

actor GemSpikeCeiling
{
+SOLID
+NODAMAGETHRUST
+FORCEYBILLBOARD
+THRUGHOST
+DONTBLAST
+DONTREFLECT
+NOGRAVITY
+RIPPER
-FLOORHUGGER
+CEILINGHUGGER
mass 99999
Radius 16
Height 80
Damage 1
Damagetype "GemSpike"
Scale 2.5
States
{
Spawn:
GEMI I 0
GEMI I 0 A_PlaySoundEx("weapon/icewavespawn","weapon")
GEMI IJKLLLLLLLLLLLLLLLLLLLLLLLL 3
GEMI L 0 A_ChangeFlag("SOLID", 0)
GEMI L 0 A_SpawnItemEx("GemIceBreak",0,0,-12,0,0,0,0)
stop
}
}

actor GemIceBreak
{
+NOCLIP
+CLIENTSIDEONLY
+RANDOMIZE
Height 16
Radius 16
Scale 2.5
States
{
Spawn:
GEMI FGH 2 
stop
}
}

actor GemSniperSpread
{
PROJECTILE
+RIPPER
-NOGRAVITY
Radius 5
Height 5
Speed 64
Damage (2)
damagetype "Buster"
Gravity 1.5
scale 2.5
States
{
Spawn:
GMSH AB 1
loop
Death:
FCRA B 0 A_JumpIf(z-ceilingz>-10,"DeathUp")
FCRA B 0 A_JumpIf(z-floorz<=0,"Death2")
FCRA B 0 A_Explode(10,48,0)
stop
Death2:
FCRA B 0
FCRA B 0 A_Explode(10,48,0)
FCRA B 0 A_SpawnItemEx("GemSpikeFloor",0,0,0,0,0,0,0)
FCRA B 0 A_SpawnItemEx("GemSpikeShot",0,0,-1,random(8,12),0,random(4,12),random(0,59))
FCRA B 0 A_SpawnItemEx("GemSpikeShot",0,0,-1,random(8,12),0,random(4,12),random(60,119))
FCRA B 0 A_SpawnItemEx("GemSpikeShot",0,0,-1,random(8,12),0,random(4,12),random(120,179))
//FCRA B 0 A_SpawnItemEx("GemSpikeShot",0,0,-1,random(8,12),0,random(4,12),random(180,239))
//FCRA B 0 A_SpawnItemEx("GemSpikeShot",0,0,-1,random(8,12),0,random(4,12),random(240,299))
//FCRA B 0 A_SpawnItemEx("GemSpikeShot",0,0,-1,random(8,12),0,random(4,12),random(300,359))
stop
DeathUp:
FCRA B 0
FCRA B 0 A_Explode(10,48,0)
FCRA B 0 A_SpawnItemEx("GemSpikeCeiling",0,0,-1,0,0,0,0)
FCRA B 0 A_SpawnItemEx("GemSpikeShot",0,0,-1,random(8,12),0,random(-12,-4),random(0,59))
FCRA B 0 A_SpawnItemEx("GemSpikeShot",0,0,-1,random(8,12),0,random(-12,-4),random(60,119))
FCRA B 0 A_SpawnItemEx("GemSpikeShot",0,0,-1,random(8,12),0,random(-12,-4),random(120,179))
//FCRA B 0 A_SpawnItemEx("GemSpikeShot",0,0,-1,random(8,12),0,random(-12,-4),random(180,239))
//FCRA B 0 A_SpawnItemEx("GemSpikeShot",0,0,-1,random(8,12),0,random(-12,-4),random(240,299))
//FCRA B 0 A_SpawnItemEx("GemSpikeShot",0,0,-1,random(8,12),0,random(-12,-4),random(300,359))
stop
XDeath:
FCRA B 0 A_Explode(10,48,0)
stop
}
}

actor GemSniperAmmo : Ammo
{
+INVENTORY.IGNORESKILL
Inventory.amount 1
Inventory.Maxamount 28
}