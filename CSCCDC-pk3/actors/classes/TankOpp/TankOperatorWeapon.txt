actor BulkTankActivatorPickup : TankActivatorPickup
{
States{Use:
TNT1 A 0
TNT1 A 0 A_JumpIfInventory("TankRepairAmmo",350,"Check2")
fail
Check2:
TNT1 A 0 A_CheckFloor("Yes")
fail
Yes:
TNT1 A 0 A_SpawnItemEx("TankyTank_BodySpr_Bulk",0,0,0,0,0,0,0,1,0,tid+2500)
TNT1 A 0 A_SpawnItemEx("TankyTank_Body_Bulk",0,0,0,0,0,0,0,1,0,tid+3000)
TNT1 A 0 A_GiveInventory("BulkTankDeActivatorPickup")
TNT1 A 0 A_GiveInventory("TanktivatorCooldown")
TNT1 A 0 A_TakeInventory("Tank_OnFootWeakness")
TNT1 A 0 A_GiveInventory("Tank_NotOnFoot",1)
stop
No:
TNT1 A 0
fail
}
}

actor BulkTankDeActivatorPickup : TankDeActivatorPickup {
States{Use:
TNT1 A 0 A_JumpIfInventory("TanktivatorCooldown",1,"No")
TNT1 A 0 A_GiveInventory("TankyTankPickupEnd")
TNT1 A 0 A_GiveInventory("BulkTankActivatorPickup")
TNT1 A 0 A_GiveInventory("TanktivatorCooldown")
TNT1 A 0 A_GiveInventory("DeactivateTank",1)
TNT1 A 0 A_TakeInventory("TankRepairAmmo",10000)
TNT1 A 0 A_GiveInventory("Tank_OnFootWeakness")
TNT1 A 0 A_TakeInventory("Tank_NotOnFoot",1)
stop
UseX:
TNT1 A 0 A_GiveInventory("TankyTankPickupEnd")
TNT1 A 0 A_GiveInventory("BulkTankActivatorPickup")
TNT1 A 0 A_GiveInventory("TanktivatorCooldown")
TNT1 A 0 A_GiveInventory("DeactivateTank",1)
TNT1 A 0 A_TakeInventory("TankRepairAmmo",10000)
TNT1 A 0 A_GiveInventory("Tank_OnFootWeakness")
TNT1 A 0 A_TakeInventory("Tank_NotOnFoot",1)
stop
No:
TNT1 A 0 
fail
}}

actor BulkTankDeActivatorPickupAuto : BulkTankDeActivatorPickup {States{Pickup:Use:
TNT1 A 0
TNT1 A 0 A_Jump(256,"UseX") goto UseX}}

actor ClassicTankWeapon : Weapon
{
Weapon.SlotNumber 2
Inventory.Pickupmessage "Pootis"
Weapon.AmmoType "TankOpAmmo"
Weapon.AmmoType2 "TankOpAmmo"
Weapon.AmmoUse 1
Weapon.AmmoUse2 15
dropitem ""
Obituary "%o < [ Cannon shot ] < %k"
+WEAPON.AMMO_OPTIONAL
+WEAPON.ALT_AMMO_OPTIONAL
+WEAPON.ALT_USES_BOTH
+WEAPON.DONTBOB
+WEAPON.ALLOW_WITH_RESPAWN_INVUL
States
{
Spawn:
WEA2 K 1
stop

Ready:
TNT1 A 0
T1BS A 1 ACS_ExecuteAlways(998,0,DYE_TANKOP)
TNT1 A 0 A_GunFlash
Goto Ready2
Deselect:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
TNT1 A 1 A_Lower
Loop
Select:
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
TNT1 A 1 A_Raise
Loop

Ready2:
T1BS A 0 A_JumpIfInventory("TankyTankFlag",1,"Ready3")
T1BS A 1
T1BS A 0 A_WeaponReady
loop
Ready3:
TNT1 A 1 A_WeaponReady
TNT1 A 0 A_JumpIfInventory("TankyTankFlag",1,"Ready3")
goto Ready2

Flash:
TNT1 A 0 A_JumpIfInventory("IsDead",1,"NoFlash")
TNT1 A 1
TNT1 A 0 A_GiveInventory("TankRepairAmmo")
loop
NoFlash:
TNT1 A 0
stop

Fire:
TNT1 A 0 A_JumpIfInventory("TankyTankFlag",1,"TankFire")
MainFireFire:
T1BS A 0 A_JumpIfNoAmmo("ReloadX")
T1BS A 0 A_PlaySoundEx("weapon/mbuster","Weapon")
T1BS A 0 A_GiveInventory("TankOperator_FootMPickup",1)//A_FireCustomMissile("TankOperatorMachinegunShot",random(-2,2),1,8,0,0,random(-1,1))
T1BS ABCB 1
T1BS A 0 A_Refire
T1BS A 10
Goto Ready2

TankFire:
TNT1 A 0 A_PlaySoundEx("weapon/napalm","Weapon")
TNT1 A 0 A_SpawnItemEx("TankShootingFX",48,0,48)
TNT1 A 0 A_GiveInventory("TankOperator_TankMPickup",1)//A_FireCustomMissile("ClassicTankShot",0,0,0,30)
TNT1 A 50
TNT1 A 0 A_PlaySoundEx("misc/gravitywarn","Weapon")
TNT1 A 20
goto Ready2

AltFire:
TNT1 A 0 A_JumpIfInventory("TankyTankFlag",1,"TankAltFire")
AltFireFoot:
TNT1 A 0 A_JumpIfNoAmmo("ReloadX")
TNT1 A 0 A_PlaySoundEx("weapon/pshot","Weapon")
TNT1 AAAAAAAAAAA 0 A_GiveInventory("TankOperator_FootAPickup",1)//A_FireCustomMissile("TankOperatorShotGunBullet",random(-6,6),0,8,0,0,random(-4,4))
TNT1 A 0 A_TakeInventory("TankOpAmmo",15)
T1BS ABCCCCBBAA 2
TNT1 A 0 A_Refire("AltFireFoot")
T1BS A 1
Goto Ready2

TankAltFire:
TNT1 A 0 A_PlaySoundEx("weapon/HardBuster1","Weapon")
TNT1 A 0 A_GiveInventory("TankOperator_TankAPickup",1)//A_FireCustomMissile("ClassicTankMachinegunShot",0,0,0,24)
TNT1 A 5
TNT1 A 0 A_Refire
TNT1 A 35
TNT1 A 0 A_PlaySoundEx("misc/gravitywarn","Weapon")
TNT1 A 10
goto Ready2

ReloadX:
T1BS A 2 Offset(0,36)
T1BS A 2 Offset(0,39)
T1BS A 2 Offset(0,44)
T1BS A 2 Offset(0,48)
T1BS A 10
T1BS A 0 A_PlaySoundEx("weapon/crashland","Weapon")
T1BS A 0 A_GiveInventory("TankOpAmmo",70)
T1BS A 2 Offset(0,47)
T1BS A 2 Offset(0,42)
T1BS A 2 Offset(0,36)
T1BS A 2 Offset(0,32)
goto Ready2
}
}

actor TankRepairAmmo : Ammo {
inventory.maxamount 350
inventory.amount 1
+INVENTORY.IGNORESKILL}

actor TankOpAmmo : Ammo
{
inventory.maxamount 60
inventory.amount 1
+INVENTORY.IGNORESKILL
}

actor TankyTank_BodySpr_Bulk : TankyTank_BodySprite {}
actor TankyTank_Body_Bulk : TankyTank_Body {}

actor ClassicTankShot : FastProjectile
{
PROJECTILE
Translation "4:214=86:86", "215:215=95:95"
Obituary "%o was blown up by %k's cannon shot."
Missiletype "TankShotFX"
Speed 100
Radius 14
Height 14
+MTHRUSPECIES
Damage (20)
Scale 2.5
+THRUSPECIES
Species "TankyTankSpecies"
States
{
Spawn:
TNT1 A 0
TNT1 A 0 ThrustThingZ(0,30,0,1)
SpawnX:
TNT1 AAA 1 A_ChangeVelocity(0,0,-2,CVF_RELATIVE)
loop
Death:
TNT1 A 0 A_PlaySoundEx("weapon/drillexplode", "Weapon")
TNT1 A 0 A_SetScale(3.5)
TNT1 A 0 A_Explode(35,128,0,0,96)
TNT1 A 0 A_Quake(12,35,0,312)
TNT1 A 0 //ACS_NamedExecuteAlways("BlastKnockback",0,25,25,140)
ASEX ABCDEF 1
TNT1 A 20
stop
}
}

actor ClassicTankShotL : ClassicTankShot {Translation "4:214=205:205", "215:215=74:74" MissileType "TankShotFXL"}
actor ClassicTankShotR : ClassicTankShot {Translation "4:214=171:171", "215:215=41:41" MissileType "TankShotFXR"}
actor ClassicTankShotC : ClassicTankShot {Translation "4:214=104:104", "215:215=128:128" MissileType "TankShotFXC"}
actor ClassicTankShotK : ClassicTankShot {Translation "4:214=229:229", "215:215=232:232" MissileType "TankShotFXK"}

actor TankShotFX : BasicClientside
{
Scale 2.5
RenderStyle Translucent
Alpha 0.6
States
{
Spawn:
TNT1 A 0
MMFX CCCCCCCCCC 1 A_SetScale(ScaleX - 0.25)
stop
}
}

actor TankShotFXL : TankShotFX {Translation "4:214=205:205", "215:215=74:74"}
actor TankShotFXR : TankShotFX {Translation "4:214=171:171", "215:215=41:41"}
actor TankShotFXC : TankShotFX {Translation "4:214=104:104", "215:215=128:128"}
actor TankShotFXK : TankShotFX {Translation "4:214=229:229", "215:215=232:232"}

 
actor ClassicTankMachinegunShot : FastProjectile
{
PROJECTILE
Obituary "%o was pelted down by %k's tank machinegun."
+MTHRUSPECIES
Speed 80
Radius 4
Height 4
MissileType "TankMachinegunShotFX"
Damage (6)
MissileHeight 8
States
{
Spawn:
TNT1 A 0
TNT1 A 1
wait
}
}

actor ClassicTankMachinegunShotL : ClassicTankMachinegunShot {MissileType "TankMachinegunShotFXL"}
actor ClassicTankMachinegunShotR : ClassicTankMachinegunShot {MissileType "TankMachinegunShotFXR"}
actor ClassicTankMachinegunShotC : ClassicTankMachinegunShot {MissileType "TankMachinegunShotFXC"}
actor ClassicTankMachinegunShotK : ClassicTankMachinegunShot {MissileType "TankMachinegunShotFXK"}

actor TankMachinegunShotFX : BasicClientside
{
Scale 1.5
RenderStyle Add
Alpha 0.6
States
{
Spawn:
TNT1 A 0
BASB A 2
stop
}
}

actor TankMachinegunShotFXL : TankMachinegunShotFX {Translation "215:215=74:74"}
actor TankMachinegunShotFXR : TankMachinegunShotFX {Translation "215:215=41:41"}
actor TankMachinegunShotFXC : TankMachinegunShotFX {Translation "215:215=128:128"}
actor TankMachinegunShotFXK : TankMachinegunShotFX {Translation "215:215=232:232"}


actor TankOperatorMachinegunShot : ClassicTankMachinegunShot {
Damage (4) 
Speed 75
Obituary "%o tried to stand against %k's machinegun but failed."
}

actor TankOperatorMachinegunShotL : TankOperatorMachinegunShot {MissileType "TankMachinegunShotFXL"}
actor TankOperatorMachinegunShotR : TankOperatorMachinegunShot {MissileType "TankMachinegunShotFXR"}
actor TankOperatorMachinegunShotC : TankOperatorMachinegunShot {MissileType "TankMachinegunShotFXC"}
actor TankOperatorMachinegunShotK : TankOperatorMachinegunShot {MissileType "TankMachinegunShotFXK"}


actor TankOperatorShotGunBullet : ClassicTankMachinegunShot
{
Obituary "%o tried to stand against %k's shotgun but failed."
Damage (3)
Speed 70
States
{
Spawn:
TNT1 A 0
BASB AAAA 2
goto Death
Death:
MMFX BCDE 1
stop
}
}

actor TankOperatorShotGunBulletL : TankOperatorShotGunBullet {Translation "4:214=205:205", "215:215=74:74" MissileType "TankMachinegunShotFXL"}
actor TankOperatorShotGunBulletR : TankOperatorShotGunBullet {Translation "4:214=171:171", "215:215=41:41" MissileType "TankMachinegunShotFXR"}
actor TankOperatorShotGunBulletC : TankOperatorShotGunBullet {Translation "4:214=104:104", "215:215=128:128" MissileType "TankMachinegunShotFXC"}
actor TankOperatorShotGunBulletK : TankOperatorShotGunBullet {Translation "4:214=229:229", "215:215=232:232" MissileType "TankMachinegunShotFXK"}

actor TankOperator_FootMPickup : CustomInventory
{
States
{
Pickup:
TNT1 A 0
TNT1 A 0 A_JumpIfInventory("LightTeamFlag",1,"LightFire")
TNT1 A 0 A_JumpIfInventory("WilyTeamFlag",1,"WilyFire")
TNT1 A 0 A_JumpIfInventory("CossackTeamFlag",1,"CossackFire")
TNT1 A 0 A_JumpIfInventory("KingTeamFlag",1,"KingFire")
TNT1 A 0 A_Jump(256,"Default")
goto Default
Default:
TNT1 A 0 A_FireCustomMissile("TankOperatorMachinegunShot",random(-2,2),1,8,0,0,random(-1,1))
stop
LightFire:
TNT1 A 0 A_FireCustomMissile("TankOperatorMachinegunShotL",random(-2,2),1,8,0,0,random(-1,1))
stop
WilyFire:
TNT1 A 0 A_FireCustomMissile("TankOperatorMachinegunShotR",random(-2,2),1,8,0,0,random(-1,1))
stop
CossackFire:
TNT1 A 0 A_FireCustomMissile("TankOperatorMachinegunShotC",random(-2,2),1,8,0,0,random(-1,1))
stop
KingFire:
TNT1 A 0 A_FireCustomMissile("TankOperatorMachinegunShotK",random(-2,2),1,8,0,0,random(-1,1))
stop
}
}

actor TankOperator_FootAPickup : TankOperator_FootMPickup
{
States
{
Default:
TNT1 A 0 A_FireCustomMissile("TankOperatorShotGunBullet",random(-6,6),0,8,0,0,random(-4,4))
stop
LightFire:
TNT1 A 0 A_FireCustomMissile("TankOperatorShotGunBulletL",random(-6,6),0,8,0,0,random(-4,4))
stop
WilyFire:
TNT1 A 0 A_FireCustomMissile("TankOperatorShotGunBulletR",random(-6,6),0,8,0,0,random(-4,4))
stop
CossackFire:
TNT1 A 0 A_FireCustomMissile("TankOperatorShotGunBulletC",random(-6,6),0,8,0,0,random(-4,4))
stop
KingFire:
TNT1 A 0 A_FireCustomMissile("TankOperatorShotGunBulletK",random(-6,6),0,8,0,0,random(-4,4))
stop
}
}

actor TankOperator_TankMPickup : TankOperator_FootMPickup
{
States
{
Default:
TNT1 A 0 A_FireCustomMissile("ClassicTankShot",0,0,0,30)
stop
LightFire:
TNT1 A 0 A_FireCustomMissile("ClassicTankShotL",0,0,0,30)
stop
WilyFire:
TNT1 A 0 A_FireCustomMissile("ClassicTankShotR",0,0,0,30)
stop
CossackFire:
TNT1 A 0 A_FireCustomMissile("ClassicTankShotC",0,0,0,30)
stop
KingFire:
TNT1 A 0 A_FireCustomMissile("ClassicTankShotK",0,0,0,30)
stop
}
}

actor TankOperator_TankAPickup : TankOperator_FootMPickup
{
States
{
Default:
TNT1 A 0 A_FireCustomMissile("ClassicTankMachinegunShot",0,0,0,24)
stop
LightFire:
TNT1 A 0 A_FireCustomMissile("ClassicTankMachinegunShotL",0,0,0,24)
stop
WilyFire:
TNT1 A 0 A_FireCustomMissile("ClassicTankMachinegunShotR",0,0,0,24)
stop
CossackFire:
TNT1 A 0 A_FireCustomMissile("ClassicTankMachinegunShotC",0,0,0,24)
stop
KingFire:
TNT1 A 0 A_FireCustomMissile("ClassicTankMachinegunShotK",0,0,0,24)
stop
}
}
