actor NatureStaffStraightWep : CSCCWepBase 
{
Weapon.AmmoGive 28 
Weapon.AmmoUse 4 
Weapon.AmmoUse2 7
Weapon.AmmoGive2 28
Weapon.SlotNumber 1  
Obituary "$OB_CRYSTALWALL"
Inventory.Pickupmessage "$PU_NATURESTAFF"
Tag "$TAG_NATURESTAFFSTRAIGHT"
weapon.ammotype "NatureStaffAmmo" 
weapon.ammotype2 "NatureStaffAmmo" 
inventory.icon "LineForm" 
inventory.pickupsound "weapon/weaponup" 
DropItem "CrystalWallWep" 256 1
+WEAPON.AMMO_OPTIONAL
+WEAPON.ALT_AMMO_OPTIONAL
+WEAPON.CHEATNOTWEAPON 
+INVENTORY.UNDROPPABLE
+WEAPON.NOAUTOAIM
Scale 2.0
States
{
Spawn: 
TNT1 A 0
stop
Ready:
NATU A 0 ACS_ExecuteAlways(998,0,654) 
NATU AB 4 A_WeaponReady
NATU A 0 A_GiveInventory("NatureStaffAmmo",1)
NATU AC 4 A_WeaponReady
NATU A 0 A_GiveInventory("NatureStaffAmmo",1)
goto Ready+1
Deselect: 
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
NATU A 1 A_Lower
Loop
Select: 
TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Raise
NATU A 1 A_Raise
Loop
Fire:
NATU A 0 A_JumpIfNoAmmo("NoAmmo")
NATU A 1
NATU DE 2
NATU F 2  A_FireCustomMissile("CrystalWallStart",0,0,0,0) 
NATU F 12
NATU ED 2
NATU A 20
goto Ready+1
Altfire:
HUNT B 0 A_JumpIfNoAmmo("NoAmmo") 
HUNT B 0 A_FireCustomMissile("CrystalMissileTarget",0,0) 
NATU J 3
HUNT B 0 A_FireCustomMissile("CrystalMissileTarget",0,0) 
NATU K 3
HUNT B 0 A_FireCustomMissile("CrystalMissileTarget",0,0) 
NATU L 3
HUNT B 0 A_FireCustomMissile("CrystalMissileTarget",0,0) 
NATU K 3
HUNT B 0 A_Refire
HUNT B 0 A_GiveInventory("CrystalMissileCounter",1)
NATU DE 2
NATU F 2 
HUNT B 0 A_PlaySoundEx("weapon/MagnetMissile","Weapon")
HUNT B 0 A_TakeInventory("CrystalMissileCounter",1)
NATU F 12
NATU ED 2
NATU A 2
Goto Ready+1 
NoAmmo: 
NATU A 1 
Goto Ready+1
}
}

actor NatureStaffHorizontalWep : NatureStaffStraightWep 
{
Weapon.SlotNumber 2
Tag "$TAG_NATURESTAFFHORIZONTAL"
inventory.icon "HoriForm" 
States
{
Fire:
NATU A 0 A_JumpIfNoAmmo("NoAmmo")
NATU MN 2
NATU O 2  A_FireCustomMissile("CrystalWallHorizontalStart",0,0,0,0) 
NATU O 2
NATU OO 2
NATU ABACABACABAC 2
goto Ready+1
}
}

actor NatureStaffAllAroundWep : NatureStaffStraightWep 
{
Weapon.SlotNumber 3
Tag "$TAG_NATURESTAFFALLAROUND"
inventory.icon "AllForm" 
States
{
Fire:
NATU A 0 A_JumpIfNoAmmo("NoAmmo")
AllAroundWall:
NATU GH 2 
NATU K 0 A_TakeInventory("NatureStaffAmmo",4)
NATU I 2 A_SpawnItemEx("CrystalWallAroundStart",0,100,0,0,0,-1,0) 
NATU D 0 A_SpawnItemEx("CrystalWallAroundStart",0,-100,0,0,0,-1,0) 
NATU D 0 A_SpawnItemEx("CrystalWallAroundStart",100,0,0,0,0,-1,0) 
NATU D 0 A_SpawnItemEx("CrystalWallAroundStart",-100,0,0,0,0,-1,0)
NATU I 12
NATU HG 2
NATU A 20
goto Ready+1
}
}


actor NatureStaffAmmo : Ammo 
{
+INVENTORY.IGNORESKILL
inventory.amount 1
inventory.maxamount 28
}

actor CrystalWallStart 
{ 
Projectile
+Ripper
+DontBlast
Radius 29
Height 5
speed 10
States
{
Spawn:
TNT1 A 1 
TNT1 A 0 A_SpawnItemEx("CrystalWallSpawner",0,0,0,20,0,0)
Stop
}
}

actor CrystalWallHorizontalStart : CrystalWallStart
{
States
{
Spawn:
TNT1 A 1 
TNT1 A 0 A_SpawnItemEx("CrystalWallHorizontalSpawner",50,-60,0,0,20,0)
TNT1 A 0 A_SpawnItemEx("CrystalWallHorizontalSpawner",50,60,0,0,-20,0)
Stop
}
}

actor CrystalWallAroundStart : CrystalWallStart
{
+FloorHugger
States
{
Spawn:
TNT1 A 1 
TNT1 A 0 A_SpawnItemEx("CrystalWallAroundSpawner",0,0,0,1,0,0)
Stop
}
}

actor CrystalTimerFlag : Inventory
{
inventory.amount 1
inventory.maxamount 4
}

actor CrystalWallSpawner 
{ 
Projectile
Radius 29 
Height 5
speed 10
+FloorHugger
+Ripper
+NoTargetSwitch
+THRUSPECIES
Species Prism
States
{
Spawn:
TNT1 A 1 
TNT1 A 0 A_JumpIfInventory("CrystalTimerFlag",4,"Death")
TNT1 A 0 A_JumpIfInTargetInventory("LightTeamFlag",1,"SpawnB")
TNT1 A 0 A_JumpIfInTargetInventory("WilyTeamFlag",1,"SpawnR")
TNT1 A 0 A_JumpIfInTargetInventory("CossackTeamFlag",1,"SpawnG")
TNT1 A 0 A_JumpIfInTargetInventory("KingTeamFlag",1,"SpawnY")
TNT1 A 0 A_SpawnItemEx("CrystalWall",0,0,0,0,0,0)
TNT1 A 4 A_TakeFromTarget("NatureStaffAmmo",1)
TNT1 A 0 A_TakeFromTarget("CrystalWallAmmo",1)
TNT1 A 0 A_GiveInventory("CrystalTimerFlag",1)
loop
SpawnB: 
TNT1 A 0 A_JumpIfInventory("CrystalTimerFlag",4,"Death")
TNT1 A 0 A_SpawnItemEx("CrystalWallB",0,0,0,0,0,0)
TNT1 A 4 A_TakeFromTarget("NatureStaffAmmo",1)
TNT1 A 0 A_TakeFromTarget("CrystalWallAmmo",1)
TNT1 A 0 A_GiveInventory("CrystalTimerFlag",1)
loop
SpawnR:
TNT1 A 0 A_JumpIfInventory("CrystalTimerFlag",4,"Death")
TNT1 A 0 A_SpawnItemEx("CrystalWallR",0,0,0,0,0,0)
TNT1 A 4 A_TakeFromTarget("NatureStaffAmmo",1)
TNT1 A 0 A_TakeFromTarget("CrystalWallAmmo",1)
TNT1 A 0 A_GiveInventory("CrystalTimerFlag",1)
loop
SpawnG:
TNT1 A 0 A_JumpIfInventory("CrystalTimerFlag",4,"Death")
TNT1 A 0 A_SpawnItemEx("CrystalWallG",0,0,0,0,0,0)
TNT1 A 4 A_TakeFromTarget("NatureStaffAmmo",1)
TNT1 A 0 A_TakeFromTarget("CrystalWallAmmo",1)
TNT1 A 0 A_GiveInventory("CrystalTimerFlag",1)
loop
SpawnY:
TNT1 A 0 A_JumpIfInventory("CrystalTimerFlag",4,"Death")
TNT1 A 0 A_SpawnItemEx("CrystalWallY",0,0,0,0,0,0)
TNT1 A 4 A_TakeFromTarget("NatureStaffAmmo",1)
TNT1 A 0 A_TakeFromTarget("CrystalWallAmmo",1)
TNT1 A 0 A_GiveInventory("CrystalTimerFlag",1)
loop
Death:
TNT1 A 1
stop
}
}

actor CrystalWallHorizontalSpawner : CrystalWallSpawner
{
States
{
Spawn:
TNT1 A 1
TNT1 A 0 A_JumpIfInventory("CrystalTimerFlag",2,"Death")
TNT1 A 0 A_JumpIfInTargetInventory("LightTeamFlag",1,"SpawnB")
TNT1 A 0 A_JumpIfInTargetInventory("WilyTeamFlag",1,"SpawnR")
TNT1 A 0 A_JumpIfInTargetInventory("CossackTeamFlag",1,"SpawnG")
TNT1 A 0 A_JumpIfInTargetInventory("KingTeamFlag",1,"SpawnY") 
TNT1 A 0 A_SpawnItemEx("CrystalWall",0,0,0,0,0,0)
TNT1 A 8 A_TakeFromTarget("NatureStaffAmmo",1)
TNT1 A 0 A_GiveInventory("CrystalTimerFlag",1)
loop
SpawnB:
TNT1 A 0 A_JumpIfInventory("CrystalTimerFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("CrystalWallB",0,0,0,0,0,0)
TNT1 A 8 A_TakeFromTarget("NatureStaffAmmo",1)
TNT1 A 0 A_GiveInventory("CrystalTimerFlag",1)
loop
SpawnR:
TNT1 A 0 A_JumpIfInventory("CrystalTimerFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("CrystalWallR",0,0,0,0,0,0)
TNT1 A 8 A_TakeFromTarget("NatureStaffAmmo",1)
TNT1 A 0 A_GiveInventory("CrystalTimerFlag",1)
loop
SpawnG:
TNT1 A 0 A_JumpIfInventory("CrystalTimerFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("CrystalWallG",0,0,0,0,0,0)
TNT1 A 8 A_TakeFromTarget("NatureStaffAmmo",1)
TNT1 A 0 A_GiveInventory("CrystalTimerFlag",1)
loop
SpawnY:
TNT1 A 0 A_JumpIfInventory("CrystalTimerFlag",2,"Death")
TNT1 A 0 A_SpawnItemEx("CrystalWallY",0,0,0,0,0,0)
TNT1 A 8 A_TakeFromTarget("NatureStaffAmmo",1)
TNT1 A 0 A_GiveInventory("CrystalTimerFlag",1)
loop
Death:
TNT1 A 1
stop
}
}

actor CrystalWallAroundSpawner : CrystalWallSpawner
{
States
{
Spawn:
TNT1 A 1
TNT1 A 0 A_JumpIfInTargetInventory("LightTeamFlag",1,"SpawnB")
TNT1 A 0 A_JumpIfInTargetInventory("WilyTeamFlag",1,"SpawnR")
TNT1 A 0 A_JumpIfInTargetInventory("CossackTeamFlag",1,"SpawnG")
TNT1 A 0 A_JumpIfInTargetInventory("KingTeamFlag",1,"SpawnY") 
TNT1 A 0 A_SpawnItemEx("CrystalWall",0,0,0,0,0,0)
stop
SpawnB:
TNT1 A 0 A_SpawnItemEx("CrystalWallB",0,0,0,0,0,0)
stop
SpawnR:
TNT1 A 0 A_SpawnItemEx("CrystalWallR",0,0,0,0,0,0)
stop
SpawnG:
TNT1 A 0 A_SpawnItemEx("CrystalWallG",0,0,0,0,0,0)
stop
SpawnY:
TNT1 A 0 A_SpawnItemEx("CrystalWallY",0,0,0,0,0,0)
stop
}
}

actor CrystalWall 
{
Projectile
-Missile
-NoBlockMap
-Solid
+Shootable
+DontBlast
-NoGravity
+NoPain
+noblood
+noblooddecals
+FORCEYBILLBOARD 
+NoTargetSwitch
+FloorHugger
Height 37
Radius 27
health 40
mass 99999999999
scale 2.5
speed 0
damage (20)
painchance 256
translation "58:58=197:197", "76:76=198:198"
Obituary "$OB_CRYSTALWALL"
damagetype "CrystalWall"
damagefactor "PrismWave", 0.0
damagefactor "CrystalWall", 1337.5
States
{
Spawn:
CRYS AA 1 A_PlaySoundEx("weapon/junkend","SoundSlot4")
CRYS B 2 A_Stop
CRYS CD 2 A_ChangeFlag("Missile",1)
CRYS D 1 A_JumpIfInventory("CrystalCounter",15,"Death")
CRYS D 0 A_ChangeFlag("DontRip",1)
CRYS D 0 A_ChangeFlag("NoPain",0)
CRYS D 10 A_GiveInventory("CrystalCounter",1)
goto Spawn+5 
Pain:
//CRYS G 0 A_ChangeFlag("NoPain",1)
HUNT B 0 A_PlaySoundEx("weapon/icewavespawn","Weapon")
CRYS FGHIJ 2 
//CRYS G 0 A_ChangeFlag("NoPain",0)
goto Spawn+5
Crash:
XDeath:
Death:
CRYS H 2
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
CRYS D 0 A_ChangeFlag("Shootable",0)
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
stop
}
}

actor CrystalWallB : CrystalWall 
{
translation "58:58=205:205", "76:76=74:74"
States
{
Crash:
XDeath:
Death:
CRYS H 2
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
CRYS D 0 A_ChangeFlag("Shootable",0)
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
stop
}
}

actor CrystalWallR : CrystalWall 
{
translation "58:58=171:171", "76:76=41:41"
States
{
Crash:
XDeath:
Death:
CRYS H 2
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
CRYS D 0 A_ChangeFlag("Shootable",0)
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
stop
}
}

actor CrystalWallG : CrystalWall 
{
translation "58:58=104:104", "76:76=128:128"
States
{
Crash:
XDeath:
Death:
CRYS H 2
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
CRYS D 0 A_ChangeFlag("Shootable",0)
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
stop
}
}

actor CrystalWallY : CrystalWall 
{
translation "58:58=229:229", "76:76=232:232"
States
{
Crash:
XDeath:
Death:
CRYS H 2
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
CRYS D 0 A_ChangeFlag("Shootable",0)
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
stop
}
}
actor CrystalShatter
{
Projectile
Radius 10 
Height 10 
scale 2.5 
damage (0)
-NoGravity
+Ripper
+HexenBounce
+FORCEXYBILLBOARD
+Clientsideonly
translation "58:58=197:197", "76:76=198:198"
BounceFactor .5 
BounceCount 3
speed 0 
States
{
Spawn:
CRYS E 1 
loop
Death:
HUNT E 0 
stop 
}
}

actor CrystalShatterB : CrystalShatter{translation "58:58=205:205", "76:76=74:74"}
actor CrystalShatterR : CrystalShatter{translation "58:58=171:171", "76:76=41:41"}
actor CrystalShatterG : CrystalShatter{translation "58:58=104:104", "76:76=128:128"}
actor CrystalShatterY : CrystalShatter{translation "58:58=229:229", "76:76=232:232"}

actor CrystalCounter : Inventory
{
Inventory.amount 0
Inventory.Maxamount 999
}


actor CrystalMissileCounter : Inventory
{
Inventory.amount 1
Inventory.Maxamount 1
}

actor CrystalMissileTarget : BasicFastProjectile
{
+DONTBLAST
+NoTargetSwitch
+DONTSPLASH
+SKYEXPLODE
Speed 9001
Radius 23
height 4
Scale 2.5
States
{
Spawn:
TNT1 A 1
Loop
Death:
TNT1 A 0 A_JumpIfInTargetInventory("LightTeamFlag",1,"DeathB")
TNT1 A 0 A_JumpIfInTargetInventory("WilyTeamFlag",1,"DeathR")
TNT1 A 0 A_JumpIfInTargetInventory("CossackTeamFlag",1,"DeathG")
TNT1 A 0 A_JumpIfInTargetInventory("KingTeamFlag",1,"DeathY") 
TNT1 A 1
TNT1 A 0 A_SpawnItemEx("CrystalMissileTarget1")
TNT1 A 1 
TNT1 A 0 A_SpawnItemEx("CrystalMissileTarget2")
TNT1 A 1 
TNT1 A 0 A_SpawnItemEx("CrystalMissileTarget3")
CRYS A 0 A_JumpIfInTargetInventory("CrystalMissileCounter",1,"Death2")
stop
DeathB:
TNT1 A 1
TNT1 A 0 A_SpawnItemEx("CrystalMissileTarget1B")
TNT1 A 1 
TNT1 A 0 A_SpawnItemEx("CrystalMissileTarget2B")
TNT1 A 1 
TNT1 A 0 A_SpawnItemEx("CrystalMissileTarget3B")
CRYS A 0 A_JumpIfInTargetInventory("CrystalMissileCounter",1,"Death2")
stop
DeathR:
TNT1 A 1
TNT1 A 0 A_SpawnItemEx("CrystalMissileTarget1R")
TNT1 A 1 
TNT1 A 0 A_SpawnItemEx("CrystalMissileTarget2R")
TNT1 A 1 
TNT1 A 0 A_SpawnItemEx("CrystalMissileTarget3R")
CRYS A 0 A_JumpIfInTargetInventory("CrystalMissileCounter",1,"Death2")
stop
DeathG:
TNT1 A 1
TNT1 A 0 A_SpawnItemEx("CrystalMissileTarget1G")
TNT1 A 1 
TNT1 A 0 A_SpawnItemEx("CrystalMissileTarget2G")
TNT1 A 1 
TNT1 A 0 A_SpawnItemEx("CrystalMissileTarget3G")
CRYS A 0 A_JumpIfInTargetInventory("CrystalMissileCounter",1,"Death2")
stop
DeathY:
TNT1 A 1
TNT1 A 0 A_SpawnItemEx("CrystalMissileTarget1Y")
TNT1 A 1 
TNT1 A 0 A_SpawnItemEx("CrystalMissileTarget2Y")
TNT1 A 1 
TNT1 A 0 A_SpawnItemEx("CrystalMissileTarget3Y")
CRYS A 0 A_JumpIfInTargetInventory("CrystalMissileCounter",1,"Death2")
stop
Death2:
TNT1 A 1 A_TakeFromTarget("NatureStaffAmmo",7)
TNT1 A 0 A_JumpIfInTargetInventory("LightTeamFlag",1,"Death2B")
TNT1 A 0 A_JumpIfInTargetInventory("WilyTeamFlag",1,"Death2R")
TNT1 A 0 A_JumpIfInTargetInventory("CossackTeamFlag",1,"Death2G")
TNT1 A 0 A_JumpIfInTargetInventory("KingTeamFlag",1,"Death2Y")
CRYA A 20 A_SpawnItemEx("CrystalMissileTargetEnd")
goto End
Death2B:
TNT1 A 20 A_SpawnItemEx("CrystalMissileTargetEndB")
goto End
Death2R:
TNT1 A 20 A_SpawnItemEx("CrystalMissileTargetEndR")
goto End
Death2G:
TNT1 A 20 A_SpawnItemEx("CrystalMissileTargetEndG")
goto End
Death2Y:
TNT1 A 20 A_SpawnItemEx("CrystalMissileTargetEndY")
goto End
End:
CRYS A 0 A_SpawnItemEx("CrystalMissileStart",0,0,40)
stop
}
}

actor CrystalMissileTarget1 
{
+NoInteraction
Radius 23
height 4
Scale 2.5
States
{
Spawn:
CRYA B 2
stop
}
}

actor CrystalMissileTarget2 : CrystalMissileTarget1
{
States
{
Spawn:
CRYA C 2
stop
}
}

actor CrystalMissileTarget3 : CrystalMissileTarget1
{
States
{
Spawn:
CRYA D 2
stop
}
}
actor CrystalMissileTarget1B : CrystalMissileTarget1 {translation "192:192=205:205", "198:198=74:74"}
actor CrystalMissileTarget2B : CrystalMissileTarget2 {translation "192:192=205:205", "198:198=74:74"}
actor CrystalMissileTarget3B : CrystalMissileTarget3 {translation "192:192=205:205", "198:198=74:74"}
actor CrystalMissileTarget1R : CrystalMissileTarget1 {translation "192:192=171:171", "198:198=41:41"}
actor CrystalMissileTarget2R : CrystalMissileTarget2 {translation "192:192=171:171", "198:198=41:41"}
actor CrystalMissileTarget3R : CrystalMissileTarget3 {translation "192:192=171:171", "198:198=41:41"}
actor CrystalMissileTarget1G : CrystalMissileTarget1 {translation "192:192=104:104", "198:198=128:128"}
actor CrystalMissileTarget2G : CrystalMissileTarget2 {translation "192:192=104:104", "198:198=128:128"}
actor CrystalMissileTarget3G : CrystalMissileTarget3 {translation "192:192=104:104", "198:198=128:128"}
actor CrystalMissileTarget1Y : CrystalMissileTarget1 {translation "192:192=229:229", "198:198=232:232"}
actor CrystalMissileTarget2Y : CrystalMissileTarget2 {translation "192:192=229:229", "198:198=232:232"}
actor CrystalMissileTarget3Y : CrystalMissileTarget3 {translation "192:192=229:229", "198:198=232:232"}

actor CrystalMissileTargetEnd : GeminiTrail
{
States
{
Spawn:
CRYA EFGEFGEFGEFGE 2
stop
}
}

actor CrystalMissileTargetEndB : CrystalMissileTargetEnd {translation "192:192=205:205", "198:198=74:74"}
actor CrystalMissileTargetEndR : CrystalMissileTargetEnd {translation "192:192=171:171", "198:198=41:41"}
actor CrystalMissileTargetEndG : CrystalMissileTargetEnd {translation "192:192=104:104", "198:198=128:128"}
actor CrystalMissileTargetEndY : CrystalMissileTargetEnd {translation "192:192=229:229", "198:198=232:232"}

actor CrystalMissileStart : BasicProjectile
{
Scale 2.5
+SKYEXPLODE
+FORCEXYBILLBOARD
+NoClip
+NoBlockMap
//seesound "weapon/mbuster"
Radius 23
height 38
States
{
Spawn:
TNT1 A 1 ThrustThingZ(0,9999,0,0)
TNT1 A 0 A_ChangeFlag("NoClip",0)
loop
Death:
TNT1 A 0 A_JumpIfInTargetInventory("LightTeamFlag",1,"DeathB")
TNT1 A 0 A_JumpIfInTargetInventory("WilyTeamFlag",1,"DeathR")
TNT1 A 0 A_JumpIfInTargetInventory("CossackTeamFlag",1,"DeathG")
TNT1 A 0 A_JumpIfInTargetInventory("KingTeamFlag",1,"DeathY") 
CRYS A 0 A_SpawnItemEX("CrystalMissile",0,0,0,0,0,-60)
stop
DeathB:
CRYS A 0 A_SpawnItemEX("CrystalMissileB",0,0,0,0,0,-60)
stop
DeathR:
CRYS A 0 A_SpawnItemEX("CrystalMissileR",0,0,0,0,0,-60)
stop
DeathG:
CRYS A 0 A_SpawnItemEX("CrystalMissileG",0,0,0,0,0,-60)
stop
DeathY:
CRYS A 0 A_SpawnItemEX("CrystalMissileY",0,0,0,0,0,-60)
stop
}
}

actor CrystalMissile : BasicProjectile
{
Scale 2.5
//seesound "weapon/mbuster"
Speed 26
Damage (50)
damagetype "CrystalMissile"
Height 37
Radius 23
translation "58:58=197:197", "76:76=198:198"
Obituary "$OB_CRYSTALSLAM" 
States
{
Spawn:
CRYS LLLLL 1 A_SpawnItemEX("CrystalMissileTrail",0,0,70)
CRYS L 0 A_ScaleVelocity(1.1)
loop
Death:
CRYS L 1
CRYS F 0 A_SpawnItemEx("CrystalShockWave")
TNT1 F 0 A_PlaySoundEx("misc/hugequake2","SoundSlot5")
CRYS F 0 A_SpawnItemEx("CrystalMissileWall",0,0,0)
stop
XDeath:
Crash:
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
stop
}
}

actor CrystalMissileB : CrystalMissile
{
translation "58:58=205:205", "76:76=74:74"
States
{
Death:
CRYS L 1
CRYS F 0 A_SpawnItemEx("CrystalShockWave")
TNT1 F 0 A_PlaySoundEx("misc/hugequake2","SoundSlot5")
CRYS F 0 A_SpawnItemEx("CrystalMissileWallB",0,0,0)
stop
XDeath:
Crash:
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
stop
}
}

actor CrystalMissileR : CrystalMissile
{
translation "58:58=171:171", "76:76=41:41"
States
{
Death:
CRYS L 1
CRYS F 0 A_SpawnItemEx("CrystalShockWave")
TNT1 F 0 A_PlaySoundEx("misc/hugequake2","SoundSlot5")
CRYS F 0 A_SpawnItemEx("CrystalMissileWallR",0,0,0)
stop
XDeath:
Crash:
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
stop
}
}

actor CrystalMissileG : CrystalMissile
{
translation "58:58=104:104", "76:76=128:128"
States
{
Death:
CRYS L 1
CRYS F 0 A_SpawnItemEx("CrystalShockWave")
TNT1 F 0 A_PlaySoundEx("misc/hugequake2","SoundSlot5")
CRYS F 0 A_SpawnItemEx("CrystalMissileWallG",0,0,0)
stop
XDeath:
Crash:
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
stop
}
}

actor CrystalMissileY : CrystalMissile
{
translation "58:58=229:229", "76:76=232:232"
States
{
Death:
CRYS L 1
CRYS F 0 A_SpawnItemEx("CrystalShockWave")
TNT1 F 0 A_PlaySoundEx("misc/hugequake2","SoundSlot5")
CRYS F 0 A_SpawnItemEx("CrystalMissileWallY",0,0,0)
stop
XDeath:
Crash:
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
stop
}
}

actor CrystalMissileWall : CrystalWall
{
Health 100
Radius 23
damage 0
+Ripper
+THRUSPECIES
Species Prism
Obituary "$OB_PRISMWAVE"
translation "58:58=197:197", "76:76=198:198"
damagetype "PrismWave"
damagefactor "CrystalShockwave", 0.0
damagefactor "PrismWave", 0.0
DamageFactor "CrystalWall" , 1.0
-DontRip
States
{
Spawn:
TNT1 A 0
CRYS L 1 A_SpawnItemEX("CrystalMissileTrail",0,0,50)
CRYS LL 1 A_PlaySoundEx("weapon/junkend","SoundSlot4")
CRYS L 2 Radius_Quake (5, 30, 0, 10,0)
CRYS LL 2 A_ChangeFlag("Missile",1)
CRYS L 1 A_JumpIfInventory("CrystalCounter",15,"Death")
CRYS L 0 A_ChangeFlag("DontRip",1)
CRYS D 0 A_ChangeFlag("NoPain",0)
CRYS LLLL 4
CRYS L 0 A_GiveInventory("CrystalCounter",1)
goto Spawn+7
Pain:
//CRYS G 0 A_ChangeFlag("NoPain",1) //Probably more balanced with these flags
//CRYS G 0 A_ChangeFlag("Invulnerable",1)
ASEX A 0 A_Explode(ACS_NamedExecuteWithResult("CSCC_Prism"),200,0, 0, 200)
CRYS L 0 A_JumpIfInventory("CrystalCounter",15,"Death")
CRYS F 0 A_GiveInventory("Health",100)
TNT1 A 0 A_JumpIfInTargetInventory("LightTeamFlag",1,"WaveB")
TNT1 A 0 A_JumpIfInTargetInventory("WilyTeamFlag",1,"WaveR")
TNT1 A 0 A_JumpIfInTargetInventory("CossackTeamFlag",1,"WaveG")
TNT1 A 0 A_JumpIfInTargetInventory("KingTeamFlag",1,"WaveY") 
CRYS F 0 A_SpawnItemEx("PrismWave")
goto EndPain
WaveB:
CRYS F 0 A_SpawnItemEx("PrismWaveB")
goto EndPain
WaveR:
CRYS F 0 A_SpawnItemEx("PrismWaveR")
goto EndPain
WaveG:
CRYS F 0 A_SpawnItemEx("PrismWaveG")
goto EndPain
WaveY:
CRYS F 0 A_SpawnItemEx("PrismWaveY")
goto EndPain
EndPain:
HUNT B 0 A_PlaySoundEx("weapon/icewavespawn","Weapon")
CRYS L 0 A_GiveInventory("CrystalCounter",1)
CRYS MNOPQR 2 
//CRYS G 0 A_ChangeFlag("NoPain",0)
//CRYS G 0 A_ChangeFlag("Invulnerable",0)
goto Spawn+7
Crash:
XDeath:
CRYS S 2
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
CRYS D 0 A_ChangeFlag("Shootable",0)
goto Shatter
Death:
CRYS S 2
//ASEX A 0 A_Explode(20,128,0)
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
CRYS D 0 A_ChangeFlag("Shootable",0)
Shatter:
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatter",0,0,10,random(10,-10),random(10,-10),random(15,5))
ASEX ABCDEF 2
stop
}
}

actor CrystalMissileWallB : CrystalMissileWall
{
translation "58:58=205:205", "76:76=74:74"
States
{
Crash:
XDeath:
CRYS S 2
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
CRYS D 0 A_ChangeFlag("Shootable",0)
goto Shatter
Death:
CRYS S 2
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
CRYS D 0 A_ChangeFlag("Shootable",0)
Shatter:
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterB",0,0,10,random(10,-10),random(10,-10),random(15,5))
ASEX ABCDEF 2
stop
}
}

actor CrystalMissileWallR : CrystalMissileWall
{
translation "58:58=171:171", "76:76=41:41"
States
{
Crash:
XDeath:
CRYS S 2
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
CRYS D 0 A_ChangeFlag("Shootable",0)
goto Shatter
Death:
CRYS S 2
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
CRYS D 0 A_ChangeFlag("Shootable",0)
Shatter:
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterR",0,0,10,random(10,-10),random(10,-10),random(15,5))
ASEX ABCDEF 2
stop
}
}

actor CrystalMissileWallG : CrystalMissileWall
{
translation "58:58=104:104", "76:76=128:128"
States
{
Crash:
XDeath:
CRYS S 2
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
CRYS D 0 A_ChangeFlag("Shootable",0)
goto Shatter
Death:
CRYS S 2
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
CRYS D 0 A_ChangeFlag("Shootable",0)
Shatter:
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterG",0,0,10,random(10,-10),random(10,-10),random(15,5))
ASEX ABCDEF 2
stop
}
}

actor CrystalMissileWallY : CrystalMissileWall
{
translation "58:58=229:229", "76:76=232:232"
States
{
Crash:
XDeath:
CRYS S 2
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
CRYS D 0 A_ChangeFlag("Shootable",0)
goto Shatter
Death:
CRYS S 2
TOAD H 0 A_PlaySoundEx("weapon/CrystalBreak","SoundSlot5")
CRYS D 0 A_ChangeFlag("Shootable",0)
Shatter:
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
HUNT E 0 A_SpawnItemEx("CrystalShatterY",0,0,10,random(10,-10),random(10,-10),random(15,5))
ASEX ABCDEF 2
stop
}
}


actor CrystalShockWave
{
PROJECTILE
States
{
Spawn:
TNT1 A 0
//TNT1 A 0 A_Explode(20,64,0)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,0)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,15)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,30)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,45)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,60)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,75)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,90)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,105)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,120)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,135)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,150)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,165)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,180)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,195)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,210)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,225)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,240)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,255)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,270)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,285)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,300)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,315)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,330)
TNT1 A 0 A_SpawnItemEx("CrystalDustPart",50,0,0,18,0,5,345)
stop
}
}

actor PrismWave 
{
PROJECTILE
States
{
Spawn:
TNT1 A 0
//TNT1 A 0 A_Explode(20,64,0)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,0,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,15,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,30,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,45,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,60,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,75,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,90,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,120,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,135,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,150,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,165,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,180,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,195,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,210,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,225,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,240,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,255,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,270,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,285,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,300,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,315,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,330,SXF_TRANSFERTRANSLATION)
TNT1 A 0 A_SpawnItemEx("PrismPart",200,0,0,0,0,20,345,SXF_TRANSFERTRANSLATION)
stop
}
}

actor PrismWaveB : PrismWave {translation "192:192=205:205"}
actor PrismWaveR : PrismWave {translation "192:192=171:171"}
actor PrismWaveG : PrismWave {translation "192:192=104:104"}
actor PrismWaveY : PrismWave {translation "192:192=229:229"}

actor CrystalDustPart : GeminiTrail
{
translation "192:192=152:152"
States
{
Spawn:
CRYS TUVWX 2 A_FadeOut(0.2)
loop
}
}

actor PrismPart : CrystalDustPart
{
translation "192:192=4:4"
States
{
Spawn:
TNT1 A 0
DUOR T 0 A_SpawnItemEx("PrismTrail",0,0,0,0,0,0,0,SXF_TRANSFERTRANSLATION)
DUOR T 1 A_FadeOut(0.5)
DUOR TTT 1 A_SpawnItemEx("PrismTrail",0,0,0,0,0,0,0)
DUOR TTTTTTTTTT 1 A_SpawnItemEx("PrismTrail",0,0,0,0,0,0,0,SXF_TRANSFERTRANSLATION)
stop
}
}
actor PrismTrail : CrystalDustPart
{
translation "192:192=4:4"
States
{
Spawn:
TNT1 A 0
DUOR T 1 A_FadeOut(0.5)
Spawn2:
DUOR T 1 A_Fadeout(0.05)
loop
}
}

actor CrystalMissileTrail
{
scale 2.5
+NoInteraction
States
{
Spawn:
CTRA AAAAA 2 A_FadeOut(0.1)
CTRA BCDE 3 A_FadeOut(0.1)
stop
}
}
